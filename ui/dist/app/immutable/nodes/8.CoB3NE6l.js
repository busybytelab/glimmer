import{t as x,a as u,n as ie,b as le}from"../chunks/Budn9l7p.js";import"../chunks/C5lklyGm.js";import{p as ne,t as b,g as r,a as me,s as i,c as o,an as l,m as q,n as f,r as d,b as C}from"../chunks/Dy_2QLcd.js";import{e as ce,s as L}from"../chunks/HzhFnYKD.js";import{i as g}from"../chunks/CSRWkSd7.js";import{s as v,r as S,a as B,p as pe}from"../chunks/NYO04WNS.js";import{b as D,a as ue}from"../chunks/B4PIr2Xs.js";import{p as fe}from"../chunks/Bfc47y5P.js";import{i as ve}from"../chunks/Bd0QBR9D.js";import{s as be,a as I}from"../chunks/CbMnyNtw.js";import{e as y,i as ge}from"../chunks/BsBrNaBX.js";import{o as ye}from"../chunks/CeJAMhHV.js";import{s as xe}from"../chunks/DZ250PhT.js";import{p as we}from"../chunks/PWoLFK6J.js";var he=x('<div class="bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-3 py-2 rounded relative text-sm" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),_e=x('<p id="email-error" class="mt-1 text-xs text-red-600 dark:text-red-300"> </p>'),ke=x('<p id="password-error" class="mt-1 text-xs text-red-600 dark:text-red-300"> </p>'),Pe=ie('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Signing in...',1),$e=x('<div class="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"><div class="max-w-sm w-full space-y-6 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md"><div class="text-center"><div class="flex items-center justify-center"><img alt="Glimmer Logo" class="h-10 w-10 mr-3"> <h1 class="text-2xl font-bold text-primary dark:text-white svelte-10g4fm5">Glimmer</h1></div> <p class="mt-1 text-gray-600 dark:text-gray-300 text-base">Learning Helper for Kids</p></div> <form class="space-y-4"><!> <div class="space-y-2"><div><label for="email" class="sr-only">Email address</label> <input id="email" name="email" type="email" autocomplete="email" required placeholder="Email address"> <!></div> <div><label for="password" class="sr-only">Password</label> <input id="password" name="password" type="password" autocomplete="current-password" required placeholder="Password"> <!></div></div> <div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-secondary focus:ring-secondary border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 svelte-10g4fm5"> <label for="remember-me" class="ml-2 block text-xs text-gray-900 dark:text-gray-200">Remember me</label></div> <div class="text-xs"><a href="/forgot-password" class="font-medium text-secondary hover:text-secondary focus:outline-none focus:underline dark:text-blue-400">Forgot your password?</a></div></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-secondary hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 svelte-10g4fm5"><!></button></div></form></div></div>');function Ve(K,T){ne(T,!1);const[U,W]=be(),J=()=>I(we,"$page",U),A=()=>I(y,"$error",U),N="/glimmer.svg";let t=q({email:"",password:"",rememberMe:!1}),n=q(!1),a=q({}),w=null;function O(){C(a,{});let e=!0;return r(t).email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r(t).email)||(l(a,r(a).email="Please enter a valid email address"),e=!1):(l(a,r(a).email="Email is required"),e=!1),r(t).password?r(t).password.length<6&&(l(a,r(a).password="Password must be at least 6 characters"),e=!1):(l(a,r(a).password="Password is required"),e=!1),e}async function Q(){if(O()){C(n,!0),y.set(null);try{await pe.collection("users").authWithPassword(r(t).email,r(t).password),xe(r(t).rememberMe),ge.set(!0);const e=w?decodeURIComponent(w):"/dashboard";window.location.href=e}catch(e){const s=e instanceof Error?e.message:"Login failed. Please check your credentials.";y.set(s),l(a,r(a).email=s)}finally{C(n,!1)}}}ye(()=>{w=J().url.searchParams.get("returnUrl"),y.set(null)}),ve();var h=$e(),z=o(h),_=o(z),F=o(_),X=o(F);v(X,"src",N),f(2),d(F),f(2),d(_);var k=i(_,2),G=o(k);{var Y=e=>{var s=he(),p=i(o(s),2),de=o(p,!0);d(p),d(s),b(()=>L(de,A())),u(e,s)};g(G,e=>{A()&&e(Y)})}var P=i(G,2),$=o(P),m=i(o($),2);S(m);var Z=i(m,2);{var ee=e=>{var s=_e(),p=o(s,!0);d(s),b(()=>L(p,r(a).email)),u(e,s)};g(Z,e=>{r(a).email&&e(ee)})}d($);var H=i($,2),c=i(o(H),2);S(c);var re=i(c,2);{var ae=e=>{var s=ke(),p=o(s,!0);d(s),b(()=>L(p,r(a).password)),u(e,s)};g(re,e=>{r(a).password&&e(ae)})}d(H),d(P);var M=i(P,2),R=o(M),E=o(R);S(E),f(2),d(R),f(2),d(M);var V=i(M,2),j=o(V),se=o(j);{var te=e=>{var s=Pe();f(),u(e,s)},oe=e=>{var s=le("Sign in");u(e,s)};g(se,e=>{r(n)?e(te):e(oe,!1)})}d(j),d(V),d(k),d(z),d(h),b(()=>{B(m,1,`block w-full px-3 py-2 rounded-t-md border ${r(a).email?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm`,"svelte-10g4fm5"),m.disabled=r(n),v(m,"aria-invalid",!!r(a).email),v(m,"aria-describedby",r(a).email?"email-error":void 0),B(c,1,`block w-full px-3 py-2 rounded-b-md border ${r(a).password?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm`,"svelte-10g4fm5"),c.disabled=r(n),v(c,"aria-invalid",!!r(a).password),v(c,"aria-describedby",r(a).password?"password-error":void 0),E.disabled=r(n),j.disabled=r(n)}),D(m,()=>r(t).email,e=>l(t,r(t).email=e)),D(c,()=>r(t).password,e=>l(t,r(t).password=e)),ue(E,()=>r(t).rememberMe,e=>l(t,r(t).rememberMe=e)),ce("submit",k,fe(Q)),u(K,h),me(),W()}export{Ve as component};
//# sourceMappingURL=8.CoB3NE6l.js.map
