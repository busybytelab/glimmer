import{t as y,a as f,b as de}from"../chunks/Bm7YDail.js";import"../chunks/Cp0t8ydx.js";import{p as le,t as M,g as r,a as me,s as d,c as o,a7 as l,m as S,n as u,r as i,b as j,f as ne}from"../chunks/DwP7UOR7.js";import{e as ce,s as H}from"../chunks/DSFJq4oy.js";import{i as b}from"../chunks/DCRH5Z1i.js";import{s as v,r as q,a as I,p as pe}from"../chunks/CGzTdwYZ.js";import{b as K,a as fe}from"../chunks/BHoMrDBE.js";import{p as ue}from"../chunks/Bfc47y5P.js";import{i as ve}from"../chunks/C1itxWee.js";import{s as be,a as T}from"../chunks/C3LHyfkz.js";import{e as g,i as ge}from"../chunks/D4zxndPO.js";import{o as ye}from"../chunks/CPg3bG_u.js";import{s as xe}from"../chunks/D5JSxh5g.js";import{p as we}from"../chunks/CHjSzMbL.js";import{E as he}from"../chunks/CW8wjXXj.js";import{L as _e}from"../chunks/D1v2Wa_-.js";var ke=y('<p id="email-error" class="mt-1 text-xs text-red-600 dark:text-red-300"> </p>'),Pe=y('<p id="password-error" class="mt-1 text-xs text-red-600 dark:text-red-300"> </p>'),$e=y('<div class="w-5 h-5 mr-3"><!></div> Signing in...',1),Ee=y('<div class="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"><div class="max-w-sm w-full space-y-6 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md"><div class="text-center"><div class="flex items-center justify-center"><img alt="Glimmer Logo" class="h-10 w-10 mr-3"> <h1 class="text-2xl font-bold text-primary dark:text-white svelte-10g4fm5">Glimmer</h1></div> <p class="mt-1 text-gray-600 dark:text-gray-300 text-base">Learning Helper for Kids</p></div> <form class="space-y-4"><!> <div class="space-y-2"><div><label for="email" class="sr-only">Email address</label> <input id="email" name="email" type="email" autocomplete="email" required placeholder="Email address"> <!></div> <div><label for="password" class="sr-only">Password</label> <input id="password" name="password" type="password" autocomplete="current-password" required placeholder="Password"> <!></div></div> <div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-secondary focus:ring-secondary border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 svelte-10g4fm5"> <label for="remember-me" class="ml-2 block text-xs text-gray-900 dark:text-gray-200">Remember me</label></div> <div class="text-xs"><a href="/forgot-password" class="font-medium text-secondary hover:text-secondary focus:outline-none focus:underline dark:text-blue-400">Forgot your password?</a></div></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-secondary hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 svelte-10g4fm5"><!></button></div></form></div></div>');function Te(V,W){le(W,!1);const[U,B]=be(),J=()=>T(we,"$page",U),A=()=>T(g,"$error",U),N="/glimmer.svg";let s=S({email:"",password:"",rememberMe:!1}),m=S(!1),a=S({}),x=null;function O(){j(a,{});let e=!0;return r(s).email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(r(s).email)||(l(a,r(a).email="Please enter a valid email address"),e=!1):(l(a,r(a).email="Email is required"),e=!1),r(s).password?r(s).password.length<6&&(l(a,r(a).password="Password must be at least 6 characters"),e=!1):(l(a,r(a).password="Password is required"),e=!1),e}async function Q(){if(O()){j(m,!0),g.set(null);try{await pe.collection("users").authWithPassword(r(s).email,r(s).password),xe(r(s).rememberMe),ge.set(!0);const e=x?decodeURIComponent(x):"/dashboard";window.location.href=e}catch(e){const t=e instanceof Error?e.message:"Login failed. Please check your credentials.";g.set(t),l(a,r(a).email=t)}finally{j(m,!1)}}}ye(()=>{x=J().url.searchParams.get("returnUrl"),g.set(null)}),ve();var w=Ee(),F=o(w),h=o(F),G=o(h),X=o(G);v(X,"src",N),u(2),i(G),u(2),i(h);var _=d(h,2),R=o(_);{var Y=e=>{he(e,{get message(){return A()}})};b(R,e=>{A()&&e(Y)})}var k=d(R,2),P=o(k),n=d(o(P),2);q(n);var Z=d(n,2);{var ee=e=>{var t=ke(),p=o(t,!0);i(t),M(()=>H(p,r(a).email)),f(e,t)};b(Z,e=>{r(a).email&&e(ee)})}i(P);var z=d(P,2),c=d(o(z),2);q(c);var re=d(c,2);{var ae=e=>{var t=Pe(),p=o(t,!0);i(t),M(()=>H(p,r(a).password)),f(e,t)};b(re,e=>{r(a).password&&e(ae)})}i(z),i(k);var $=d(k,2),C=o($),E=o(C);q(E),u(2),i(C),u(2),i($);var D=d($,2),L=o(D),se=o(L);{var te=e=>{var t=$e(),p=ne(t),ie=o(p);_e(ie,{size:"sm",color:"white"}),i(p),u(),f(e,t)},oe=e=>{var t=de("Sign in");f(e,t)};b(se,e=>{r(m)?e(te):e(oe,!1)})}i(L),i(D),i(_),i(F),i(w),M(()=>{I(n,1,`block w-full px-3 py-2 rounded-t-md border ${r(a).email?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm`,"svelte-10g4fm5"),n.disabled=r(m),v(n,"aria-invalid",!!r(a).email),v(n,"aria-describedby",r(a).email?"email-error":void 0),I(c,1,`block w-full px-3 py-2 rounded-b-md border ${r(a).password?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm`,"svelte-10g4fm5"),c.disabled=r(m),v(c,"aria-invalid",!!r(a).password),v(c,"aria-describedby",r(a).password?"password-error":void 0),E.disabled=r(m),L.disabled=r(m)}),K(n,()=>r(s).email,e=>l(s,r(s).email=e)),K(c,()=>r(s).password,e=>l(s,r(s).password=e)),fe(E,()=>r(s).rememberMe,e=>l(s,r(s).rememberMe=e)),ce("submit",_,ue(Q)),f(V,w),me(),B()}export{Te as component};
//# sourceMappingURL=8.BiBZ8fG3.js.map
