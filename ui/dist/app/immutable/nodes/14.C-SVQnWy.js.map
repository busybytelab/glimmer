{"version":3,"file":"14.C-SVQnWy.js","sources":["../../../../../../src/routes/practice-topics/edit/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n    import { onMount } from 'svelte';\n    import { page } from '$app/stores';\n    import { goto } from '$app/navigation';\n    import type { PracticeTopic } from '$lib/types';\n    import pb from '$lib/pocketbase';\n    import PracticeTopicForm from '../../../../components/practice-topics/PracticeTopicForm.svelte';\n    import Breadcrumbs from '../../../../components/common/Breadcrumbs.svelte';\n    import ActionToolbar from '../../../../components/common/ActionToolbar.svelte';\n\n    // Define the breadcrumb item type\n    type BreadcrumbItem = {\n        label: string;\n        href?: string;\n        icon?: string;\n    };\n\n    let topic: PracticeTopic | null = null;\n    let loading = true;\n    let error: string | null = null;\n    let breadcrumbItems: BreadcrumbItem[] = [];\n\n    onMount(async () => {\n        // Get topic ID from the URL parameter\n        const topicId = $page.params.id;\n        \n        if (!topicId) {\n            error = 'No topic ID provided';\n            loading = false;\n            return;\n        }\n        \n        await loadTopic(topicId);\n        updateBreadcrumbs();\n    });\n\n    async function loadTopic(id: string) {\n        try {\n            loading = true;\n            error = null;\n            \n            const result = await pb.collection('practice_topics').getOne<PracticeTopic>(id);\n            \n            // Make sure tags are properly formatted as arrays\n            if (result.tags) {\n                const tagsValue = result.tags as unknown;\n                if (typeof tagsValue === 'string') {\n                    try {\n                        if (tagsValue.trim().startsWith('[')) {\n                            result.tags = JSON.parse(tagsValue) as string[];\n                        } else {\n                            result.tags = tagsValue.split(',').map((tag: string) => tag.trim()).filter(Boolean);\n                        }\n                    } catch (e) {\n                        console.error('Error parsing tags:', e);\n                        result.tags = [];\n                    }\n                }\n            } else {\n                result.tags = [];\n            }\n            \n            topic = result;\n        } catch (err) {\n            console.error('Failed to load topic:', err);\n            error = 'Failed to load practice topic';\n        } finally {\n            loading = false;\n        }\n    }\n\n    function updateBreadcrumbs() {\n        if (!topic) {\n            // Basic breadcrumbs while topic is still loading\n            breadcrumbItems = [\n                {\n                    label: 'Topics',\n                    href: '/practice-topics',\n                    icon: 'topic'\n                },\n                {\n                    label: 'Edit Topic',\n                    icon: 'edit'\n                }\n            ];\n            return;\n        }\n        \n        breadcrumbItems = [\n            {\n                label: 'Topics',\n                href: '/practice-topics',\n                icon: 'topic'\n            },\n            {\n                label: topic.name,\n                href: `/practice-topics/${topic.id}`,\n                icon: 'topic'\n            },\n            {\n                label: `Edit ${topic.name}`,\n                icon: 'edit'\n            }\n        ];\n    }\n\n    function handleTopicUpdate(_updatedTopic: PracticeTopic) {\n        goto('/practice-topics');\n    }\n\n    function handleTopicDelete(_topicId: string) {\n        goto('/practice-topics');\n    }\n\n    function handleCancel() {\n        goto('/practice-topics');\n    }\n\n    // Actions for the toolbar\n    $: topicActions = [\n        {\n            id: 'back',\n            label: 'Back',\n            icon: 'back',\n            variant: 'secondary' as const,\n            onClick: handleCancel\n        }\n    ];\n</script>\n\n<div class=\"container mx-auto px-4 py-8 max-w-7xl\">\n    <div class=\"flex justify-between items-center mb-6\">\n        <div>\n            <Breadcrumbs items={breadcrumbItems} />\n        </div>\n        <ActionToolbar actions={topicActions} />\n    </div>\n\n    {#if loading}\n        <div class=\"flex justify-center items-center h-64\">\n            <div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\n        </div>\n    {:else if error}\n        <div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n            <strong class=\"font-bold\">Error!</strong>\n            <span class=\"block sm:inline\"> {error}</span>\n        </div>\n    {:else if topic}\n        <div class=\"w-full\">\n            <PracticeTopicForm\n                {topic}\n                on:update={({ detail }) => handleTopicUpdate(detail)}\n                on:delete={({ detail }) => handleTopicDelete(detail)}\n                on:cancel={handleCancel}\n            />\n        </div>\n    {/if}\n</div> "],"names":["topic","loading","error","breadcrumbItems","$.mutable_source","onMount","topicId","$page","$.set","loadTopic","updateBreadcrumbs","id","result","pb","tagsValue","tag","e","err","$.get","handleTopicUpdate","_updatedTopic","goto","handleTopicDelete","_topicId","handleCancel","topicActions","detail","$$render","consequent_2","consequent_1","alternate_1","consequent","alternate"],"mappings":"4sCAiBQ,IAAAA,IAA8B,IAAI,EAClCC,IAAU,EAAI,EACdC,IAAuB,IAAI,EAC3BC,EAAiCC,EAAA,EAAA,EAErCC,EAAoB,SAAA,CAEV,MAAAC,EAAUC,IAAM,OAAO,GAExB,GAAA,CAAAD,EAAS,CACVE,EAAAN,EAAQ,sBAAsB,EAC9BM,EAAAP,EAAU,EAAK,QAEnB,CAEM,MAAAQ,EAAUH,CAAO,EACvBI,EAAiB,EACpB,iBAEcD,EAAUE,EAAY,CAC7B,GAAA,CACAH,EAAAP,EAAU,EAAI,EACdO,EAAAN,EAAQ,IAAI,QAENU,EAAM,MAASC,GAAG,WAAW,iBAAiB,EAAE,OAAsBF,CAAE,KAG1EC,EAAO,KAAM,OACPE,EAAYF,EAAO,eACdE,GAAc,SACjB,GAAA,CACIA,EAAU,KAAI,EAAG,WAAW,GAAG,EAC/BF,EAAO,KAAO,KAAK,MAAME,CAAS,EAElCF,EAAO,KAAOE,EAAU,MAAM,GAAG,EAAE,IAAKC,GAAgBA,EAAI,KAAQ,CAAA,EAAA,OAAO,OAAO,CAEzF,OAAQC,EAAG,CACR,QAAQ,MAAM,sBAAuBA,CAAC,EACtCJ,EAAO,KAAI,CAAA,CACf,CAER,MACIA,EAAO,KAAI,CAAA,EAGfJ,EAAAR,EAAQY,CAAM,CACjB,OAAQK,EAAK,CACV,QAAQ,MAAM,wBAAyBA,CAAG,EAC1CT,EAAAN,EAAQ,+BAA+B,CAC3C,QAAU,CACNM,EAAAP,EAAU,EAAK,CACnB,CACJ,CAES,SAAAS,GAAoB,CACpB,GAAA,CAAAQ,EAAAlB,CAAK,EAAE,GAERG,EAAe,EAEP,MAAO,SACP,KAAM,mBACN,KAAM,SAGN,CAAA,MAAO,aACP,KAAM,MAAK,UAIvB,GAEAA,EAAe,EAEP,MAAO,SACP,KAAM,mBACN,KAAM,UAGN,MAAKe,EAAElB,CAAK,EAAC,KACb,KAAI,oBAAAkB,EAAsBlB,CAAK,EAAC,EAAE,GAClC,KAAM,UAGN,MAAK,QAAAkB,EAAUlB,CAAK,EAAC,IAAI,GACzB,KAAM,SAGlB,UAESmB,EAAkBC,EAA8B,CACrDC,EAAK,kBAAkB,CAC3B,UAESC,EAAkBC,EAAkB,CACzCF,EAAK,kBAAkB,CAC3B,CAES,SAAAG,GAAe,CACpBH,EAAK,kBAAkB,CAC3B,iBAGGI,EAAY,EAEP,GAAI,OACJ,MAAO,OACP,KAAM,OACN,QAAS,YACT,QAASD,0EAQWrB,CAAe,oDAEfsB,CAAY,iIAUAvB,CAAK,CAAA,CAAA,mGAMnB,OAAAwB,CAAM,IAAOP,EAAwB,WACrC,OAAAO,CAAM,IAAOJ,EAAwB,SACxCE,4BANbxB,CAAK,GAAA2B,EAAAC,CAAA,kBALL1B,CAAK,EAAAyB,EAAAE,CAAA,EAAAF,EAAAG,EAAA,EAAA,kBAJV7B,CAAO,EAAA0B,EAAAI,CAAA,EAAAJ,EAAAK,EAAA,EAAA"}