{"version":3,"file":"4.D0dMSW6g.js","sources":["../../../../../../node_modules/svelte/src/internal/client/dom/blocks/html.js","../../../../../../src/components/dashboard/StatCard.svelte","../../../../../../src/components/dashboard/DashboardContent.svelte","../../../../../../src/routes/dashboard/+page.svelte"],"sourcesContent":["/** @import { Effect, TemplateNode } from '#client' */\nimport { FILENAME, HYDRATION_ERROR } from '../../../../constants.js';\nimport { remove_effect_dom, template_effect } from '../../reactivity/effects.js';\nimport { hydrate_next, hydrate_node, hydrating, set_hydrate_node } from '../hydration.js';\nimport { create_fragment_from_html } from '../reconciler.js';\nimport { assign_nodes } from '../template.js';\nimport * as w from '../../warnings.js';\nimport { hash, sanitize_location } from '../../../../utils.js';\nimport { DEV } from 'esm-env';\nimport { dev_current_component_function } from '../../context.js';\nimport { get_first_child, get_next_sibling } from '../operations.js';\nimport { active_effect } from '../../runtime.js';\n\n/**\n * @param {Element} element\n * @param {string | null} server_hash\n * @param {string} value\n */\nfunction check_hash(element, server_hash, value) {\n\tif (!server_hash || server_hash === hash(String(value ?? ''))) return;\n\n\tlet location;\n\n\t// @ts-expect-error\n\tconst loc = element.__svelte_meta?.loc;\n\tif (loc) {\n\t\tlocation = `near ${loc.file}:${loc.line}:${loc.column}`;\n\t} else if (dev_current_component_function?.[FILENAME]) {\n\t\tlocation = `in ${dev_current_component_function[FILENAME]}`;\n\t}\n\n\tw.hydration_html_changed(sanitize_location(location));\n}\n\n/**\n * @param {Element | Text | Comment} node\n * @param {() => string} get_value\n * @param {boolean} [svg]\n * @param {boolean} [mathml]\n * @param {boolean} [skip_warning]\n * @returns {void}\n */\nexport function html(node, get_value, svg = false, mathml = false, skip_warning = false) {\n\tvar anchor = node;\n\n\tvar value = '';\n\n\ttemplate_effect(() => {\n\t\tvar effect = /** @type {Effect} */ (active_effect);\n\n\t\tif (value === (value = get_value() ?? '')) {\n\t\t\tif (hydrating) hydrate_next();\n\t\t\treturn;\n\t\t}\n\n\t\tif (effect.nodes_start !== null) {\n\t\t\tremove_effect_dom(effect.nodes_start, /** @type {TemplateNode} */ (effect.nodes_end));\n\t\t\teffect.nodes_start = effect.nodes_end = null;\n\t\t}\n\n\t\tif (value === '') return;\n\n\t\tif (hydrating) {\n\t\t\t// We're deliberately not trying to repair mismatches between server and client,\n\t\t\t// as it's costly and error-prone (and it's an edge case to have a mismatch anyway)\n\t\t\tvar hash = /** @type {Comment} */ (hydrate_node).data;\n\t\t\tvar next = hydrate_next();\n\t\t\tvar last = next;\n\n\t\t\twhile (next !== null && (next.nodeType !== 8 || /** @type {Comment} */ (next).data !== '')) {\n\t\t\t\tlast = next;\n\t\t\t\tnext = /** @type {TemplateNode} */ (get_next_sibling(next));\n\t\t\t}\n\n\t\t\tif (next === null) {\n\t\t\t\tw.hydration_mismatch();\n\t\t\t\tthrow HYDRATION_ERROR;\n\t\t\t}\n\n\t\t\tif (DEV && !skip_warning) {\n\t\t\t\tcheck_hash(/** @type {Element} */ (next.parentNode), hash, value);\n\t\t\t}\n\n\t\t\tassign_nodes(hydrate_node, last);\n\t\t\tanchor = set_hydrate_node(next);\n\t\t\treturn;\n\t\t}\n\n\t\tvar html = value + '';\n\t\tif (svg) html = `<svg>${html}</svg>`;\n\t\telse if (mathml) html = `<math>${html}</math>`;\n\n\t\t// Don't use create_fragment_with_script_from_html here because that would mean script tags are executed.\n\t\t// @html is basically `.innerHTML = ...` and that doesn't execute scripts either due to security reasons.\n\t\t/** @type {DocumentFragment | Element} */\n\t\tvar node = create_fragment_from_html(html);\n\n\t\tif (svg || mathml) {\n\t\t\tnode = /** @type {Element} */ (get_first_child(node));\n\t\t}\n\n\t\tassign_nodes(\n\t\t\t/** @type {TemplateNode} */ (get_first_child(node)),\n\t\t\t/** @type {TemplateNode} */ (node.lastChild)\n\t\t);\n\n\t\tif (svg || mathml) {\n\t\t\twhile (get_first_child(node)) {\n\t\t\t\tanchor.before(/** @type {Node} */ (get_first_child(node)));\n\t\t\t}\n\t\t} else {\n\t\t\tanchor.before(node);\n\t\t}\n\t});\n}\n","<script lang=\"ts\">\n\texport let title: string;\n\texport let value: number | string;\n\texport let isLoading: boolean = false;\n\texport let icon: string;\n</script>\n\n<div class=\"bg-white overflow-hidden shadow rounded-lg\">\n\t<div class=\"p-5\">\n\t\t<div class=\"flex items-center\">\n\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t<svg class=\"h-6 w-6 text-gray-400\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n\t\t\t\t\t{@html icon}\n\t\t\t\t</svg>\n\t\t\t</div>\n\t\t\t<div class=\"ml-5 w-0 flex-1\">\n\t\t\t\t<dl>\n\t\t\t\t\t<dt class=\"text-sm font-medium text-gray-500 truncate\">\n\t\t\t\t\t\t{title}\n\t\t\t\t\t</dt>\n\t\t\t\t\t<dd class=\"flex items-baseline\">\n\t\t\t\t\t\t<div class=\"text-2xl font-semibold text-gray-900\">\n\t\t\t\t\t\t\t{#if isLoading}\n\t\t\t\t\t\t\t\t<svg class=\"animate-spin h-5 w-5 text-gray-400\" xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\">\n\t\t\t\t\t\t\t\t\t<circle class=\"opacity-25\" cx=\"12\" cy=\"12\" r=\"10\" stroke=\"currentColor\" stroke-width=\"4\"></circle>\n\t\t\t\t\t\t\t\t\t<path class=\"opacity-75\" fill=\"currentColor\" d=\"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z\"></path>\n\t\t\t\t\t\t\t\t</svg>\n\t\t\t\t\t\t\t{:else}\n\t\t\t\t\t\t\t\t{value}\n\t\t\t\t\t\t\t{/if}\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</dd>\n\t\t\t\t</dl>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div> ","<script lang=\"ts\">\n\timport { error } from '$lib/stores';\n\timport ErrorAlert from '../common/ErrorAlert.svelte';\n\timport StatCard from './StatCard.svelte';\n\n\texport let activeLearners: number;\n\texport let practiceTopics: number;\n\texport let completedSessions: number;\n\texport let isLoading: boolean = false;\n\n\t// SVG path data for icons\n\tconst icons = {\n\t\tlearners: '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z\" />',\n\t\ttopics: '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10\" />',\n\t\tsessions: '<path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z\" />'\n\t};\n</script>\n\n<div class=\"py-6\">\n\t<div class=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n\t\t<h1 class=\"text-2xl font-semibold text-gray-900\">Dashboard</h1>\n\t</div>\n\t{#if $error}\n\t\t<div class=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-4\">\n\t\t\t<ErrorAlert message={$error} />\n\t\t</div>\n\t{/if}\n\t<div class=\"max-w-7xl mx-auto px-4 sm:px-6 md:px-8\">\n\t\t<div class=\"py-4\">\n\t\t\t<div class=\"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3\">\n\t\t\t\t<!-- Quick Stats -->\n\t\t\t\t<StatCard \n\t\t\t\t\ttitle=\"Active Learners\" \n\t\t\t\t\tvalue={activeLearners} \n\t\t\t\t\tisLoading={isLoading} \n\t\t\t\t\ticon={icons.learners} \n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<StatCard \n\t\t\t\t\ttitle=\"Practice Topics\" \n\t\t\t\t\tvalue={practiceTopics} \n\t\t\t\t\tisLoading={isLoading} \n\t\t\t\t\ticon={icons.topics} \n\t\t\t\t/>\n\t\t\t\t\n\t\t\t\t<StatCard \n\t\t\t\t\ttitle=\"Completed Sessions\" \n\t\t\t\t\tvalue={completedSessions} \n\t\t\t\t\tisLoading={isLoading} \n\t\t\t\t\ticon={icons.sessions} \n\t\t\t\t/>\n\t\t\t</div>\n\t\t</div>\n\t</div>\n</div> ","<script lang=\"ts\">\n\timport { user, error } from '$lib/stores';\n\timport { onMount } from 'svelte';\n\timport type { Instructor, Learner } from '$lib/types';\n\timport DashboardContent from '../../components/dashboard/DashboardContent.svelte';\n\n\tlet activeLearners = 0;\n\tlet practiceTopics = 0;\n\tlet completedSessions = 0;\n\tlet isLoading = true;\n\n\tinterface DashboardStats {\n\t\tactiveLearners: number;\n\t\tpracticeTopics: number;\n\t\tcompletedSessions: number;\n\t}\n\n\tonMount(async () => {\n\t\tawait fetchStats();\n\t});\n\n\tasync function fetchStats() {\n\t\tisLoading = true;\n\t\terror.set(null);\n\n\t\ttry {\n\t\t\tconst currentUser = $user;\n\t\t\tif (!currentUser) {\n\t\t\t\tthrow new Error('User not found');\n\t\t\t}\n\n\t\t\tlet stats: DashboardStats = {\n\t\t\t\tactiveLearners: 0,\n\t\t\t\tpracticeTopics: 0,\n\t\t\t\tcompletedSessions: 0\n\t\t\t};\n\n\t\t\tif ('account' in currentUser) {\n\t\t\t\t// Instructor dashboard\n\t\t\t\tconst instructor = currentUser as Instructor;\n\t\t\t\tconsole.log(instructor);\n\t\t\t\t// TODO: fix collection relationships and rules\n\n\t\t\t\tstats = {\n\t\t\t\t\tactiveLearners: 0,\n\t\t\t\t\tpracticeTopics: 0,\n\t\t\t\t\tcompletedSessions: 0\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\t// Learner dashboard\n\t\t\t\tconst learner = currentUser as Learner;\n\t\t\t\tconsole.log(learner);\n\n\t\t\t\tstats = {\n\t\t\t\t\tactiveLearners: 1, // The learner themselves\n\t\t\t\t\tpracticeTopics: 0,\n\t\t\t\t\tcompletedSessions: 0\n\t\t\t\t};\n\t\t\t}\n\n\t\t\tactiveLearners = stats.activeLearners;\n\t\t\tpracticeTopics = stats.practiceTopics;\n\t\t\tcompletedSessions = stats.completedSessions;\n\t\t} catch (err) {\n\t\t\tconsole.error('Error fetching dashboard stats:', err);\n\t\t\terror.set(err instanceof Error ? err.message : 'Failed to fetch dashboard stats');\n\t\t} finally {\n\t\t\tisLoading = false;\n\t\t}\n\t}\n</script>\n\n<DashboardContent\n\t{activeLearners}\n\t{practiceTopics}\n\t{completedSessions}\n\t{isLoading}\n/>\n\n<style lang=\"postcss\">\n\t:global(html) {\n\t\t--primary: #2c3e50;\n\t\t--secondary: #3498db;\n\t}\n</style> "],"names":["html","node","get_value","svg","mathml","skip_warning","anchor","value","template_effect","effect","active_effect","hydrating","hydrate_next","remove_effect_dom","hydrate_node","next","last","get_next_sibling","w.hydration_mismatch","HYDRATION_ERROR","assign_nodes","set_hydrate_node","create_fragment_from_html","get_first_child","title","$.prop","$$props","isLoading","icon","$$render","consequent","alternate","activeLearners","practiceTopics","completedSessions","icons","$error","onMount","fetchStats","$.set","error","currentUser","$user","stats","err"],"mappings":"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","x_google_ignoreList":[0]}