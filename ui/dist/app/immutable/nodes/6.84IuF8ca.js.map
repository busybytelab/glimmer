{"version":3,"file":"6.84IuF8ca.js","sources":["../../../../../../src/routes/learners/[id]/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport { page } from '$app/stores';\n\timport { goto } from '$app/navigation';\n\timport type { Learner } from '$lib/types';\n\timport pb from '$lib/pocketbase';\n\timport FormButton from '../../../components/common/FormButton.svelte';\n\n\tlet learner: Learner | null = null;\n\tlet loading = true;\n\tlet error: string | null = null;\n\n\tonMount(async () => {\n\t\t// Get learner ID from the URL parameter\n\t\tconst learnerId = $page.params.id;\n\t\t\n\t\tif (!learnerId) {\n\t\t\terror = 'No learner ID provided';\n\t\t\tloading = false;\n\t\t\treturn;\n\t\t}\n\t\t\n\t\tawait loadLearner(learnerId);\n\t});\n\n\tasync function loadLearner(id: string) {\n\t\ttry {\n\t\t\tloading = true;\n\t\t\terror = null;\n\t\t\t\n\t\t\tconst result = await pb.collection('learners').getOne<Learner>(id, {\n\t\t\t\texpand: 'user'\n\t\t\t});\n\t\t\t\n\t\t\t// Map expanded user data to the learner object\n\t\t\tconst expandedData = result.expand;\n\t\t\tlearner = {\n\t\t\t\t...result,\n\t\t\t\tuser: expandedData?.user || { name: 'Unknown user' }\n\t\t\t} as unknown as Learner;\n\t\t} catch (err) {\n\t\t\tconsole.error('Failed to load learner:', err);\n\t\t\terror = 'Failed to load learner';\n\t\t} finally {\n\t\t\tloading = false;\n\t\t}\n\t}\n\n\tfunction editLearner() {\n\t\tif (!learner) return;\n\t\tgoto(`/learners/edit/${learner.id}`);\n\t}\n</script>\n\n<div class=\"container mx-auto px-4 py-8\">\n\t<div class=\"flex justify-between items-center mb-6\">\n\t\t<h1 class=\"text-2xl font-bold text-gray-900\">Learner Profile</h1>\n\t\t<FormButton\n\t\t\ttype=\"button\"\n\t\t\tvariant=\"primary\"\n\t\t\ton:click={editLearner}\n\t\t>\n\t\t\tEdit Learner\n\t\t</FormButton>\n\t</div>\n\n\t{#if loading}\n\t\t<div class=\"flex justify-center items-center h-64\">\n\t\t\t<div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\n\t\t</div>\n\t{:else if error}\n\t\t<div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n\t\t\t<strong class=\"font-bold\">Error!</strong>\n\t\t\t<span class=\"block sm:inline\"> {error}</span>\n\t\t</div>\n\t{:else if learner}\n\t\t<div class=\"bg-white shadow-md rounded-lg p-6\">\n\t\t\t<div class=\"flex items-center space-x-4 mb-6\">\n\t\t\t\t{#if learner.avatar}\n\t\t\t\t\t<img src={learner.avatar} alt={learner.nickname} class=\"w-16 h-16 rounded-full\" />\n\t\t\t\t{:else}\n\t\t\t\t\t<div class=\"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center\">\n\t\t\t\t\t\t<span class=\"text-2xl text-gray-500\">{learner.nickname[0].toUpperCase()}</span>\n\t\t\t\t\t</div>\n\t\t\t\t{/if}\n\t\t\t\t<div>\n\t\t\t\t\t<h2 class=\"text-xl font-semibold text-gray-900\">{learner.nickname}</h2>\n\t\t\t\t\t<p class=\"text-gray-600\">{learner.user.name}</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t<div class=\"grid grid-cols-2 gap-4 mb-6\">\n\t\t\t\t<div class=\"bg-gray-50 p-3 rounded\">\n\t\t\t\t\t<div class=\"text-sm font-semibold text-gray-700 mb-1\">Age:</div>\n\t\t\t\t\t<div>{learner.age}</div>\n\t\t\t\t</div>\n\t\t\t\t\n\t\t\t\t<div class=\"bg-gray-50 p-3 rounded\">\n\t\t\t\t\t<div class=\"text-sm font-semibold text-gray-700 mb-1\">Grade Level:</div>\n\t\t\t\t\t<div>{learner.grade_level || 'Not specified'}</div>\n\t\t\t\t</div>\n\t\t\t</div>\n\n\t\t\t{#if learner.learning_preferences && learner.learning_preferences.length > 0}\n\t\t\t\t<div class=\"mb-6\">\n\t\t\t\t\t<div class=\"text-sm font-semibold text-gray-700 mb-2\">Learning Preferences:</div>\n\t\t\t\t\t<div class=\"flex flex-wrap gap-2\">\n\t\t\t\t\t\t{#each learner.learning_preferences as preference}\n\t\t\t\t\t\t\t<span class=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded\">\n\t\t\t\t\t\t\t\t{preference}\n\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t{/each}\n\t\t\t\t\t</div>\n\t\t\t\t</div>\n\t\t\t{/if}\n\t\t</div>\n\t{/if}\n</div> "],"names":["learner","loading","error","onMount","learnerId","$page","$.set","loadLearner","id","result","pb","expandedData","err","editLearner","goto","$.get","$.set_attribute","img","$$render","consequent_2","alternate_2","$.index","$$anchor","preference","consequent_3","$.set_text","text_3","text_5","consequent_4","consequent_1","alternate_1","consequent","alternate"],"mappings":"uqEAQK,IAAAA,IAA0B,IAAI,EAC9BC,IAAU,EAAI,EACdC,IAAuB,IAAI,EAE/BC,GAAoB,SAAA,CAEb,MAAAC,EAAYC,IAAM,OAAO,GAE1B,GAAA,CAAAD,EAAW,CACfE,EAAAJ,EAAQ,wBAAwB,EAChCI,EAAAL,EAAU,EAAK,QAEhB,CAEM,MAAAM,EAAYH,CAAS,EAC3B,iBAEcG,EAAYC,EAAY,CAClC,GAAA,CACHF,EAAAL,EAAU,EAAI,EACdK,EAAAJ,EAAQ,IAAI,EAEN,MAAAO,EAAe,MAAAC,GAAG,WAAW,UAAU,EAAE,OAAgBF,EAC9D,CAAA,OAAQ,OAAK,EAIRG,EAAeF,EAAO,SAC5BT,EAAO,IACHS,EACH,MAAME,GAAA,YAAAA,EAAc,OAAU,CAAA,KAAM,cAAc,GAEnD,OAAQC,EAAK,CACb,QAAQ,MAAM,0BAA2BA,CAAG,EAC5CN,EAAAJ,EAAQ,wBAAwB,CACjC,QAAU,CACTI,EAAAL,EAAU,EAAK,CAChB,CACD,CAES,SAAAY,GAAc,GACjBb,CAAO,GACZc,GAAI,kBAAAC,EAAmBf,CAAO,EAAC,EAAE,EAAA,CAClC,0FASYa,CAAW,4MAaWX,CAAK,CAAA,CAAA,qFAMzBc,EAAAC,EAAA,MAAAF,EAAAf,CAAO,EAAC,MAAM,EAAOgB,EAAAC,EAAA,MAAAF,EAAAf,CAAO,EAAC,QAAQ,sEAGR,IAAAe,EAAAf,CAAO,EAAC,SAAS,CAAC,EAAE,YAAW,uBAJlEe,EAAAf,CAAO,EAAC,OAAMkB,EAAAC,CAAA,EAAAD,EAAAE,GAAA,EAAA,qPA6BVpB,CAAO,EAAC,qBAAoBqB,GAAA,CAAAC,EAAIC,IAAU,yCAE9CA,CAAU,CAAA,CAAA,wCANXvB,CAAO,EAAC,sBAAwBe,EAAAf,CAAO,EAAC,qBAAqB,OAAS,GAACkB,EAAAM,EAAA,gBAjBzBC,EAAAC,GAAAX,EAAAf,CAAO,EAAC,QAAQ,SACvCA,CAAO,EAAC,KAAK,IAAI,EAOrCyB,EAAAE,GAAAZ,EAAAf,CAAO,EAAC,GAAG,SAKXA,CAAO,EAAC,aAAe,eAAe,sBAxBtCA,CAAO,GAAAkB,EAAAU,CAAA,kBALP1B,CAAK,EAAAgB,EAAAW,CAAA,EAAAX,EAAAY,EAAA,EAAA,kBAJV7B,CAAO,EAAAiB,EAAAa,CAAA,EAAAb,EAAAc,EAAA,EAAA"}