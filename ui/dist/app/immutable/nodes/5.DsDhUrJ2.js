import{t as y,a as c,b as B}from"../chunks/Bm7YDail.js";import"../chunks/Cp0t8ydx.js";import{p as E,a as P,c as u,s as g,n as R,r as d,g as a,m as b,b as o,t as S}from"../chunks/DwP7UOR7.js";import{s as U}from"../chunks/DSFJq4oy.js";import{i as h}from"../chunks/DCRH5Z1i.js";import{i as Y}from"../chunks/C1itxWee.js";import{o as q}from"../chunks/CPg3bG_u.js";import{p as x}from"../chunks/CGzTdwYZ.js";import{g as L}from"../chunks/CxGvuVDF.js";import{L as z}from"../chunks/E2d_wykc.js";import{F as G}from"../chunks/BEZkXVQy.js";var H=y('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div></div>'),J=y('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),K=y('<div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">Learners</h1> <!></div> <!></div>');function ae(w,F){E(F,!1);let m=b([]),i=b(!0),s=b(null);async function $(){try{o(i,!0),o(s,null);const e=x.authStore.model;if(!e){o(s,"You must be logged in to view learners");return}const t=await x.collection("instructors").getFirstListItem(`user="${e.id}"`),n=await x.collection("learners").getFullList({filter:`account="${t.account}"`,sort:"-created",expand:"user,account"});o(m,n.map(l=>{console.log("learner Item:",l);const r=l.expand;return{...l,user:(r==null?void 0:r.user)||{name:"Unknown user"},account:(r==null?void 0:r.account)||null}})),console.log("Loaded learners:",a(m))}catch(e){console.error("Failed to load learners:",e),o(s,"Failed to load learners")}finally{o(i,!1)}}q(async()=>{console.log("Learners mounted, loading learners"),await $()});function k(){L("/learners/create")}function C(e){L(`/learners/${e.id}`)}Y();var f=K(),p=u(f),N=g(u(p),2);G(N,{type:"button",$$events:{click:k},children:(e,t)=>{R();var n=B("Create New Learner");c(e,n)},$$slots:{default:!0}}),d(p);var j=g(p,2);{var I=e=>{var t=H();c(e,t)},M=(e,t)=>{{var n=r=>{var v=J(),_=g(u(v),2),A=u(_,!0);d(_),d(v),S(()=>U(A,a(s))),c(r,v)},l=r=>{z(r,{get learners(){return a(m)},get loading(){return a(i)},emptyMessage:"No learners found. Create your first learner!",onClick:C,cardActions:[]})};h(e,r=>{a(s)?r(n):r(l,!1)},t)}};h(j,e=>{a(i)?e(I):e(M,!1)})}d(f),c(w,f),P()}export{ae as component};
//# sourceMappingURL=5.DsDhUrJ2.js.map
