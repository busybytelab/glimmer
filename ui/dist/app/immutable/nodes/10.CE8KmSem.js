import{t as d,a as l,b as Q}from"../chunks/Bm7YDail.js";import"../chunks/Cp0t8ydx.js";import{p as J,c as i,s as p,r as s,t as k,a as O,g as v,n as R,m as H,b as F,d as U}from"../chunks/DwP7UOR7.js";import{s as b,e as V}from"../chunks/DSFJq4oy.js";import{p as G,i as h}from"../chunks/DCRH5Z1i.js";import{e as S,i as W}from"../chunks/-4v8aoCK.js";import{i as D}from"../chunks/C1itxWee.js";import{o as X}from"../chunks/CPg3bG_u.js";import{s as Y,p as Z}from"../chunks/CGzTdwYZ.js";import{g as q}from"../chunks/CxGvuVDF.js";import{F as tt}from"../chunks/BEZkXVQy.js";var et=d("<p> </p>"),at=d('<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),rt=d('<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),st=d('<span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded"> </span>'),ot=d('<div class="w-full mt-2 pt-2 border-t border-gray-50"><div class="flex flex-wrap gap-1"></div></div>'),it=d('<div class="relative bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer" tabindex="0" role="button"><button class="absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full z-10" aria-label="Edit topic"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button> <h2 class="text-xl font-semibold text-gray-900 mb-2"> </h2> <div class="text-gray-600 mb-4 min-h-[1.5rem]"><!></div> <div class="flex flex-wrap gap-2"><span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span> <!> <!> <!></div></div>');function lt(T,C){J(C,!1);let a=G(C,"topic",8),z=G(C,"href",8,"");function x(){q(z())}function $(t){t.stopPropagation(),q(`/practice-topics/edit/${a().id}`)}D();var g=it(),y=i(g),_=p(y,2),j=i(_,!0);s(_);var A=p(_,2),B=i(A);{var L=t=>{var r=et(),n=i(r,!0);s(r),k(()=>b(n,a().description)),l(t,r)};h(B,t=>{a().description&&t(L)})}s(A);var o=p(A,2),e=i(o),c=i(e,!0);s(e);var P=p(e,2);{var f=t=>{var r=at(),n=i(r);s(r),k(()=>b(n,`Age: ${a().target_age_range??""}`)),l(t,r)};h(P,t=>{a().target_age_range&&t(f)})}var u=p(P,2);{var w=t=>{var r=rt(),n=i(r);s(r),k(()=>b(n,`Grade: ${a().target_grade_level??""}`)),l(t,r)};h(u,t=>{a().target_grade_level&&t(w)})}var E=p(u,2);{var m=t=>{var r=ot(),n=i(r);S(n,5,()=>a().tags,W,(M,I)=>{var N=st(),K=i(N,!0);s(N),k(()=>b(K,v(I))),l(M,N)}),s(n),s(r),l(t,r)};h(E,t=>{a().tags&&Array.isArray(a().tags)&&a().tags.length>0&&t(m)})}s(o),s(g),k(()=>{Y(g,"aria-label",`View ${a().name}`),b(j,a().name),b(c,a().subject)}),V("click",y,$),V("click",g,x),V("keydown",g,t=>t.key==="Enter"&&x()),l(T,g),O()}var nt=d('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div></div>'),dt=d('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),vt=d('<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-700">No practice topics available. Create your first topic!</p></div></div></div>'),ct=d('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),pt=d('<div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">Practice Topics</h1> <!></div> <!></div>');function Ct(T,C){J(C,!1);let a=H([]),z=H(!0),x=H(null);async function $(){try{F(z,!0),F(x,null);const o=await Z.collection("practice_topics").getFullList({sort:"-created",expand:"account"});F(a,o.map(e=>{if(e.tags&&!Array.isArray(e.tags))try{typeof e.tags=="string"&&e.tags.trim().startsWith("[")?e.tags=JSON.parse(e.tags):typeof e.tags=="string"&&(e.tags=e.tags.split(",").map(c=>c.trim()).filter(Boolean))}catch(c){console.error("Error parsing tags:",c),e.tags=[]}else e.tags||(e.tags=[]);return e})),console.log("Loaded topics:",v(a))}catch(o){console.error("Failed to load topics:",o),F(x,"Failed to load practice topics")}finally{F(z,!1)}}X(async()=>{console.log("PracticeTopics mounted, loading topics"),await $()});function g(){q("/practice-topics/create")}D();var y=pt(),_=i(y),j=p(i(_),2);tt(j,{type:"button",$$events:{click:g},children:(o,e)=>{R();var c=Q("Create New Topic");l(o,c)},$$slots:{default:!0}}),s(_);var A=p(_,2);{var B=o=>{var e=nt();l(o,e)},L=(o,e)=>{{var c=f=>{var u=dt(),w=p(i(u),2),E=i(w,!0);s(w),s(u),k(()=>b(E,v(x))),l(f,u)},P=(f,u)=>{{var w=m=>{var t=vt();l(m,t)},E=m=>{var t=ct();S(t,5,()=>v(a),W,(r,n)=>{const M=U(()=>`/practice-topics/${v(n).id}`);lt(r,{get topic(){return v(n)},get href(){return v(M)}})}),s(t),l(m,t)};h(f,m=>{v(a).length===0?m(w):m(E,!1)},u)}};h(o,f=>{v(x)?f(c):f(P,!1)},e)}};h(A,o=>{v(z)?o(B):o(L,!1)})}s(y),l(T,y),O()}export{Ct as component};
//# sourceMappingURL=10.CE8KmSem.js.map
