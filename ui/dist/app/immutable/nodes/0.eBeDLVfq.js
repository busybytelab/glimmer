import{t as x,a as d,c as F}from"../chunks/Bm7YDail.js";import"../chunks/Cp0t8ydx.js";import{p as ie,c as r,n as pe,r as t,s as u,t as Z,d as ge,g as f,a as ne,l as be,e as _e,f as J,b as T,m as ee}from"../chunks/DwP7UOR7.js";import{s as xe,e as k}from"../chunks/DSFJq4oy.js";import{p as we,i as I}from"../chunks/DCRH5Z1i.js";import{s as te}from"../chunks/DPHS4RLb.js";import{i as le}from"../chunks/C1itxWee.js";import{s as ce,a as S}from"../chunks/C3LHyfkz.js";import{o as ye}from"../chunks/CPg3bG_u.js";import{a as W,e as re,u as K,i as h}from"../chunks/D4zxndPO.js";import{s as U,a as ae,p as i}from"../chunks/CGzTdwYZ.js";import{i as oe,g as ke,c as Q}from"../chunks/D5JSxh5g.js";import{e as Se,i as Me}from"../chunks/-4v8aoCK.js";import"../chunks/CxGvuVDF.js";import{p as Ae}from"../chunks/CHjSzMbL.js";import{L as ze}from"../chunks/D1v2Wa_-.js";import{E as $e}from"../chunks/CW8wjXXj.js";const Le=!1,Oe=!1,et=Object.freeze(Object.defineProperty({__proto__:null,prerender:Le,ssr:Oe},Symbol.toStringTag,{value:"Module"}));var je=x('<li><a><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> <span> </span></a></li>'),Ce=x('<aside><div class="h-full flex flex-col"><div class="flex items-center justify-center h-16 border-b border-gray-200"><img alt="Glimmer Logo" class="h-8 w-8 mr-2"> <div class="text-xl font-semibold text-gray-800">Glimmer</div></div> <nav class="flex-1 overflow-y-auto p-4"><ul class="space-y-2"></ul></nav> <div class="p-4 border-t border-gray-200"><button class="flex items-center justify-center w-full p-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> Sign Out</button></div></div></aside>');function se(P,m){ie(m,!1);const[p,G]=ce(),M=()=>S(Ae,"$page",p),A="/glimmer.svg";let H=we(m,"isOpen",8,!0);const N=[{href:"/dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{href:"/practice-topics",label:"Practice Topics",icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{href:"/learners",label:"Learners",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{href:"/chat",label:"Chat",icon:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},{href:"/profile",label:"Profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{href:"/settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function z(s){if(M()){const o=M().url.pathname;return s==="/dashboard"&&o==="/dashboard"?!0:o.startsWith(s)}return!1}le();var n=Ce(),$=r(n),w=r($),L=r(w);U(L,"src",A),pe(2),t(w);var y=u(w,2),O=r(y);Se(O,5,()=>N,Me,(s,o)=>{var c=je(),a=r(c),e=r(a),g=r(e);t(e);var b=u(e,2),B=r(b,!0);t(b),t(a),t(c),Z(v=>{U(a,"href",f(o).href),ae(a,1,v),U(g,"d",f(o).icon),xe(B,f(o).label)},[()=>`flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors ${z(f(o).href)?"bg-gray-100 text-indigo-600":"text-gray-700"}`],ge),d(s,c)}),t(O),t(y);var j=u(y,2),l=r(j);t(j),t($),t(n),Z(()=>ae(n,1,`bg-white border-r border-gray-200 w-64 flex-shrink-0 ${H()?"":"hidden"} md:block`)),k("click",l,()=>{i.authStore.clear(),document.cookie="pb_auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Lax",localStorage.removeItem("pocketbase_auth"),localStorage.removeItem("authToken"),window.location.href="/login"}),d(P,n),ne(),G()}var Te=x('<div class="flex justify-center items-center h-screen"><!></div>'),Ie=x('<div class="flex flex-col items-center justify-center h-screen"><!> <button class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Try Again</button></div>'),Pe=x('<div class="md:hidden fixed inset-0 flex z-40 print:hidden"><button class="fixed inset-0 bg-gray-600 bg-opacity-75" aria-label="Close sidebar overlay"></button> <!></div>'),Ge=x('<div class="h-screen flex overflow-hidden bg-gray-100 print:h-auto print:overflow-visible"><!> <div class="hidden md:flex md:flex-shrink-0 print:hidden"><!></div> <div class="flex flex-col w-0 flex-1 overflow-hidden h-screen print:h-auto print:overflow-visible print:relative print:z-0"><div class="md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 print:hidden"><button class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-secondary"><span class="sr-only">Open sidebar</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div> <main class="flex-1 relative z-0 overflow-y-auto focus:outline-none h-full print:h-auto print:overflow-visible print:relative print:z-0"><!></main></div></div>');function tt(P,m){ie(m,!1);const[p,G]=ce(),M=()=>S(W,"$isAuthLoading",p),A=()=>S(re,"$error",p),H=()=>S(h,"$isAuthenticated",p),N=()=>S(K,"$user",p),z=ee();let n=ee(!0);function $(){T(n,!f(n))}async function w(){var l,s,o;W.set(!0),re.set(null);try{const c=ke();if(c){i.authStore.token!==c&&(i.authStore.clear(),localStorage.setItem("pocketbase_auth",JSON.stringify({token:c,model:i.authStore.model})));try{if(await i.collection("users").authRefresh(),i.authStore.isValid){const a=await i.collection("users").getOne(((l=i.authStore.record)==null?void 0:l.id)??"");try{const e=await i.collection("instructors").getFirstListItem(`user="${(s=i.authStore.record)==null?void 0:s.id}"`);if(e){e.user=a,K.set(e),h.set(!0);return}}catch{}try{const e=await i.collection("learners").getFirstListItem(`user.id="${(o=i.authStore.record)==null?void 0:o.id}"`,{requestKey:null});if(e){e.user=a,K.set(e),h.set(!0);return}}catch{}console.log("WARNING: no instructor or learner found"),Q(),h.set(!1)}}catch(a){console.error("Auth refresh failed:",a),Q(),h.set(!1)}}else h.set(!1)}catch(c){console.error("Authentication initialization failed:",c),Q(),h.set(!1)}finally{W.set(!1)}}ye(()=>{w()}),be(()=>oe,()=>{T(z,oe(window.location.pathname))}),_e(),le();var L=F(),y=J(L);{var O=l=>{var s=Te(),o=r(s);ze(o,{size:"lg",color:"gray"}),t(s),d(l,s)},j=(l,s)=>{{var o=a=>{var e=Ie(),g=r(e);$e(g,{get message(){return A()}});var b=u(g,2);t(e),k("click",b,()=>window.location.reload()),d(a,e)},c=a=>{var e=F(),g=J(e);{var b=v=>{var _=Ge(),C=r(_);{var de=V=>{var q=Pe(),D=r(q),he=u(D,2);se(he,{isOpen:!0}),t(q),k("click",D,()=>T(n,!1)),k("keydown",D,me=>me.key==="Escape"&&T(n,!1)),d(V,q)};I(C,V=>{f(n)&&V(de)})}var E=u(C,2),ve=r(E);se(ve,{get isOpen(){return f(n)}}),t(E);var X=u(E,2),R=r(X),ue=r(R);t(R);var Y=u(R,2),fe=r(Y);te(fe,m,"default",{},null),t(Y),t(X),t(_),k("click",ue,$),d(v,_)},B=v=>{var _=F(),C=J(_);te(C,m,"default",{},null),d(v,_)};I(g,v=>{H()&&N()&&!f(z)?v(b):v(B,!1)})}d(a,e)};I(l,a=>{A()?a(o):a(c,!1)},s)}};I(y,l=>{M()?l(O):l(j,!1)})}d(P,L),ne(),G()}export{tt as component,et as universal};
//# sourceMappingURL=0.eBeDLVfq.js.map
