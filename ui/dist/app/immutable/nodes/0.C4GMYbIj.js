import{t as y,a as c,c as W}from"../chunks/Budn9l7p.js";import"../chunks/C5lklyGm.js";import{p as ie,c as t,n as ge,r as e,s as d,t as Y,d as be,g as h,a as ne,l as _e,e as we,f as J,b as I,m as re}from"../chunks/Dy_2QLcd.js";import{s as le,e as S}from"../chunks/HzhFnYKD.js";import{i as T}from"../chunks/CSRWkSd7.js";import{s as te}from"../chunks/DM-nhMx8.js";import{i as ce}from"../chunks/Bd0QBR9D.js";import{s as de,a as z}from"../chunks/CbMnyNtw.js";import{o as xe}from"../chunks/CeJAMhHV.js";import{a as K,e as ae,u as U,i as p}from"../chunks/BsBrNaBX.js";import{s as Q,a as se,p as n}from"../chunks/3tUVfVXT.js";import{g as ye,c as X}from"../chunks/_w6Hibhv.js";import{e as ke,i as Me}from"../chunks/KXxnkizF.js";import{p as Se}from"../chunks/DOVCkyMW.js";import"../chunks/BHgSklzR.js";import{p as ze}from"../chunks/DtAyR18x.js";const Ae=!1,$e=!1,Xe=Object.freeze(Object.defineProperty({__proto__:null,prerender:Ae,ssr:$e},Symbol.toStringTag,{value:"Module"}));var Oe=y('<li><a><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> <span> </span></a></li>'),je=y('<aside><div class="h-full flex flex-col"><div class="flex items-center justify-center h-16 border-b border-gray-200"><img alt="Glimmer Logo" class="h-8 w-8 mr-2"> <div class="text-xl font-semibold text-gray-800">Glimmer</div></div> <nav class="flex-1 overflow-y-auto p-4"><ul class="space-y-2"></ul></nav> <div class="p-4 border-t border-gray-200"><button class="flex items-center justify-center w-full p-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> Sign Out</button></div></div></aside>');function oe(H,m){ie(m,!1);const[g,P]=de(),A=()=>z(ze,"$page",g),$="/glimmer.svg";let B=Se(m,"isOpen",8,!0);const R=[{href:"/dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{href:"/practice-topics",label:"Practice Topics",icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{href:"/learners",label:"Learners",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{href:"/chat",label:"Chat",icon:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},{href:"/profile",label:"Profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{href:"/settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function O(a){if(A()){const o=A().url.pathname;return a==="/dashboard"&&o==="/dashboard"?!0:o.startsWith(a)}return!1}ce();var b=je(),l=t(b),k=t(l),V=t(k);Q(V,"src",$),ge(2),e(k);var _=d(k,2),j=t(_);ke(j,5,()=>R,Me,(a,o)=>{var v=Oe(),i=t(v),s=t(i),r=t(s);e(s);var u=d(s,2),w=t(u,!0);e(u),e(i),e(v),Y(M=>{Q(i,"href",h(o).href),se(i,1,M),Q(r,"d",h(o).icon),le(w,h(o).label)},[()=>`flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors ${O(h(o).href)?"bg-gray-100 text-indigo-600":"text-gray-700"}`],be),c(a,v)}),e(j),e(_);var C=d(_,2),q=t(C);e(C),e(l),e(b),Y(()=>se(b,1,`bg-white border-r border-gray-200 w-64 flex-shrink-0 ${B()?"":"hidden"} md:block`)),S("click",q,()=>{localStorage.removeItem("pocketbase_auth"),window.location.href="/"}),c(H,b),ne(),P()}var Ce=y('<div class="flex justify-center items-center h-screen"><div class="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900 dark:border-white"></div></div>'),Le=y('<div class="flex flex-col items-center justify-center h-screen"><div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div> <button class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Try Again</button></div>'),Ie=y('<div class="md:hidden fixed inset-0 flex z-40 print:hidden"><button class="fixed inset-0 bg-gray-600 bg-opacity-75" aria-label="Close sidebar overlay"></button> <!></div>'),Te=y('<div class="h-screen flex overflow-hidden bg-gray-100 print:h-auto print:overflow-visible"><!> <div class="hidden md:flex md:flex-shrink-0 print:hidden"><!></div> <div class="flex flex-col w-0 flex-1 overflow-hidden h-screen print:h-auto print:overflow-visible print:relative print:z-0"><div class="md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 print:hidden"><button class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-secondary"><span class="sr-only">Open sidebar</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div> <main class="flex-1 relative z-0 overflow-y-auto focus:outline-none h-full print:h-auto print:overflow-visible print:relative print:z-0"><!></main></div></div>');function Ye(H,m){ie(m,!1);const[g,P]=de(),A=()=>z(K,"$isAuthLoading",g),$=()=>z(ae,"$error",g),B=()=>z(p,"$isAuthenticated",g),R=()=>z(U,"$user",g),O=re(),b=["/login","/forgot-password","/reset-password"];let l=re(!0);function k(){I(l,!h(l))}async function V(){var a,o,v;K.set(!0),ae.set(null);try{const i=ye();if(i){n.authStore.token!==i&&(n.authStore.clear(),localStorage.setItem("pocketbase_auth",JSON.stringify({token:i,model:n.authStore.model})));try{if(await n.collection("users").authRefresh(),n.authStore.isValid){const s=await n.collection("users").getOne(((a=n.authStore.record)==null?void 0:a.id)??"");try{const r=await n.collection("instructors").getFirstListItem(`user="${(o=n.authStore.record)==null?void 0:o.id}"`);if(r){r.user=s,U.set(r),p.set(!0);return}}catch{}try{const r=await n.collection("learners").getFirstListItem(`user="${(v=n.authStore.record)==null?void 0:v.id}"`,{requestKey:null});if(r){r.user=s,U.set(r),p.set(!0);return}}catch{}X(),p.set(!1)}}catch(s){console.error("Auth refresh failed:",s),X(),p.set(!1)}}else p.set(!1)}catch(i){console.error("Authentication initialization failed:",i),X(),p.set(!1)}finally{K.set(!1)}}xe(()=>{V()}),_e(()=>{},()=>{I(O,b.some(a=>window.location.pathname.startsWith(a)))}),we(),ce();var _=W(),j=J(_);{var C=a=>{var o=Ce();c(a,o)},q=(a,o)=>{{var v=s=>{var r=Le(),u=t(r),w=d(t(u),2),M=t(w,!0);e(w),e(u);var f=d(u,2);e(r),Y(()=>le(M,$())),S("click",f,()=>window.location.reload()),c(s,r)},i=s=>{var r=W(),u=J(r);{var w=f=>{var x=Te(),L=t(x);{var ve=F=>{var G=Ie(),N=t(G),pe=d(N,2);oe(pe,{isOpen:!0}),e(G),S("click",N,()=>I(l,!1)),S("keydown",N,me=>me.key==="Escape"&&I(l,!1)),c(F,G)};T(L,F=>{h(l)&&F(ve)})}var D=d(L,2),ue=t(D);oe(ue,{get isOpen(){return h(l)}}),e(D);var Z=d(D,2),E=t(Z),fe=t(E);e(E);var ee=d(E,2),he=t(ee);te(he,m,"default",{},null),e(ee),e(Z),e(x),S("click",fe,k),c(f,x)},M=f=>{var x=W(),L=J(x);te(L,m,"default",{},null),c(f,x)};T(u,f=>{B()&&R()&&!h(O)?f(w):f(M,!1)})}c(s,r)};T(a,s=>{$()?s(v):s(i,!1)},o)}};T(j,a=>{A()?a(C):a(q,!1)})}c(H,_),ne(),P()}export{Ye as component,Xe as universal};
//# sourceMappingURL=0.C4GMYbIj.js.map
