{"version":3,"file":"10.CE8KmSem.js","sources":["../../../../../../src/components/practice-topics/PracticeTopicCard.svelte","../../../../../../src/routes/practice-topics/+page.svelte"],"sourcesContent":["<script lang=\"ts\">\n    import type { PracticeTopic } from '$lib/types';\n    import { goto } from '$app/navigation';\n\n    export let topic: PracticeTopic;\n    export let href: string = '';\n\n    function handleCardClick() {\n        goto(href);\n    }\n    \n    function handleEditClick(e: Event) {\n        e.stopPropagation();\n        goto(`/practice-topics/edit/${topic.id}`);\n    }\n</script>\n\n<div\n    class=\"relative bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer\"\n    on:click={handleCardClick}\n    on:keydown={(e) => e.key === 'Enter' && handleCardClick()}\n    tabindex=\"0\"\n    role=\"button\"\n    aria-label={`View ${topic.name}`}\n>\n    <!-- Edit button positioned in the top-right corner -->\n    <button \n        class=\"absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full z-10\" \n        on:click={handleEditClick}\n        aria-label=\"Edit topic\"\n    >\n        <svg xmlns=\"http://www.w3.org/2000/svg\" class=\"h-5 w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\">\n            <path stroke-linecap=\"round\" stroke-linejoin=\"round\" stroke-width=\"2\" d=\"M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z\" />\n        </svg>\n    </button>\n\n    <h2 class=\"text-xl font-semibold text-gray-900 mb-2\">{topic.name}</h2>\n    \n    <!-- Keep consistent spacing with min-height even when no description -->\n    <div class=\"text-gray-600 mb-4 min-h-[1.5rem]\">\n        {#if topic.description}\n            <p>{topic.description}</p>\n        {/if}\n    </div>\n    \n    <div class=\"flex flex-wrap gap-2\">\n        <span class=\"bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded\">\n            {topic.subject}\n        </span>\n        \n        {#if topic.target_age_range}\n            <span class=\"bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded\">\n                Age: {topic.target_age_range}\n            </span>\n        {/if}\n        \n        {#if topic.target_grade_level}\n            <span class=\"bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded\">\n                Grade: {topic.target_grade_level}\n            </span>\n        {/if}\n\n        {#if topic.tags && Array.isArray(topic.tags) && topic.tags.length > 0}\n            <div class=\"w-full mt-2 pt-2 border-t border-gray-50\">\n                <div class=\"flex flex-wrap gap-1\">\n                    {#each topic.tags as tag}\n                        <span class=\"bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded\">\n                            {tag}\n                        </span>\n                    {/each}\n                </div>\n            </div>\n        {/if}\n    </div>\n</div> ","<script lang=\"ts\">\n\timport { onMount } from 'svelte';\n\timport pb from '$lib/pocketbase';\n\timport { goto } from '$app/navigation';\n\timport type { PracticeTopic } from '$lib/types';\n\timport PracticeTopicCard from '../../components/practice-topics/PracticeTopicCard.svelte';\n\timport FormButton from '../../components/common/FormButton.svelte';\n\n\tlet topics: PracticeTopic[] = [];\n\tlet loading = true;\n\tlet error: string | null = null;\n\n\tasync function loadTopics() {\n\t\ttry {\n\t\t\tloading = true;\n\t\t\terror = null;\n\t\t\tconst result = await pb.collection('practice_topics').getFullList({\n\t\t\t\tsort: '-created',\n\t\t\t\texpand: 'account'\n\t\t\t});\n\t\t\t\n\t\t\t// Make sure tags are properly formatted as arrays\n\t\t\ttopics = result.map((topic: any) => {\n\t\t\t\tif (topic.tags && !Array.isArray(topic.tags)) {\n\t\t\t\t\t// Handle case where PocketBase may return stringified JSON\n\t\t\t\t\ttry {\n\t\t\t\t\t\tif (typeof topic.tags === 'string' && topic.tags.trim().startsWith('[')) {\n\t\t\t\t\t\t\ttopic.tags = JSON.parse(topic.tags);\n\t\t\t\t\t\t} else if (typeof topic.tags === 'string') {\n\t\t\t\t\t\t\ttopic.tags = topic.tags.split(',').map((tag: string) => tag.trim()).filter(Boolean);\n\t\t\t\t\t\t}\n\t\t\t\t\t} catch (e) {\n\t\t\t\t\t\tconsole.error('Error parsing tags:', e);\n\t\t\t\t\t\ttopic.tags = [];\n\t\t\t\t\t}\n\t\t\t\t} else if (!topic.tags) {\n\t\t\t\t\ttopic.tags = [];\n\t\t\t\t}\n\t\t\t\t\n\t\t\t\treturn topic;\n\t\t\t}) as unknown as PracticeTopic[];\n\t\t\t\n\t\t\tconsole.log('Loaded topics:', topics);\n\t\t} catch (err) {\n\t\t\tconsole.error('Failed to load topics:', err);\n\t\t\terror = 'Failed to load practice topics';\n\t\t} finally {\n\t\t\tloading = false;\n\t\t}\n\t}\n\n\tonMount(async () => {\n\t\tconsole.log('PracticeTopics mounted, loading topics');\n\t\tawait loadTopics();\n\t});\n\n\tfunction handleCreateNew() {\n\t\tgoto('/practice-topics/create');\n\t}\n</script>\n\n<div class=\"container mx-auto px-4 py-8\">\n\t<div class=\"flex justify-between items-center mb-6\">\n\t\t<h1 class=\"text-2xl font-bold text-gray-900\">Practice Topics</h1>\n\t\t<FormButton\n\t\t\ttype=\"button\"\n\t\t\ton:click={handleCreateNew}\n\t\t>\n\t\t\tCreate New Topic\n\t\t</FormButton>\n\t</div>\n\n\t{#if loading}\n\t\t<div class=\"flex justify-center items-center h-64\">\n\t\t\t<div class=\"animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary\"></div>\n\t\t</div>\n\t{:else if error}\n\t\t<div class=\"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative\" role=\"alert\">\n\t\t\t<strong class=\"font-bold\">Error!</strong>\n\t\t\t<span class=\"block sm:inline\"> {error}</span>\n\t\t</div>\n\t{:else if topics.length === 0}\n\t\t<div class=\"bg-yellow-50 border-l-4 border-yellow-400 p-4\">\n\t\t\t<div class=\"flex\">\n\t\t\t\t<div class=\"flex-shrink-0\">\n\t\t\t\t\t<svg class=\"h-5 w-5 text-yellow-400\" viewBox=\"0 0 20 20\" fill=\"currentColor\">\n\t\t\t\t\t\t<path fill-rule=\"evenodd\" d=\"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z\" clip-rule=\"evenodd\" />\n\t\t\t\t\t</svg>\n\t\t\t\t</div>\n\t\t\t\t<div class=\"ml-3\">\n\t\t\t\t\t<p class=\"text-sm text-yellow-700\">\n\t\t\t\t\t\tNo practice topics available. Create your first topic!\n\t\t\t\t\t</p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t</div>\n\t{:else}\n\t\t<div class=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n\t\t\t{#each topics as topic}\n\t\t\t\t<PracticeTopicCard \n\t\t\t\t\t{topic} \n\t\t\t\t\thref={`/practice-topics/${topic.id}`}\n\t\t\t\t/>\n\t\t\t{/each}\n\t\t</div>\n\t{/if}\n</div> "],"names":["topic","$.prop","$$props","href","handleCardClick","goto","handleEditClick","e","$.template_effect","$.set_text","text_1","$$render","consequent","text_3","consequent_1","text_4","consequent_2","$.index","$$anchor","tag","consequent_3","$.set_attribute","div","text","text_2","$.event","topics","$.mutable_source","loading","error","loadTopics","$.set","result","pb","err","onMount","handleCreateNew","$.each","div_5","$.get","expression","$.derived_safe_equal","alternate_2","alternate_1","alternate"],"mappings":"80DAIeA,EAAoBC,EAAAC,EAAA,QAAA,CAAA,EACpBC,eAAe,EAAE,EAEnB,SAAAC,GAAkB,CACvBC,EAAKF,EAAI,CAAA,CACb,UAESG,EAAgBC,EAAU,CAC/BA,EAAE,gBAAe,EACjBF,EAAI,yBAA0BL,EAAK,EAAC,EAAE,EAAA,CAC1C,wGA2BYQ,EAAA,IAAAC,EAAAC,EAAAV,IAAM,WAAW,CAAA,kBADpBA,IAAM,aAAWW,EAAAC,CAAA,2FAYRJ,EAAA,IAAAC,EAAAI,EAAA,QAAAb,EAAK,EAAC,kBAAgB,EAAA,EAAA,CAAA,kBAF/BA,IAAM,kBAAgBW,EAAAG,CAAA,mDAQXN,EAAA,IAAAC,EAAAM,EAAA,UAAAf,EAAK,EAAC,oBAAkB,EAAA,EAAA,CAAA,kBAFnCA,IAAM,oBAAkBW,EAAAK,CAAA,wDASVhB,EAAK,EAAC,KAAIiB,EAAA,CAAAC,EAAIC,IAAG,uCAEfA,CAAG,CAAA,CAAA,qCALnBnB,IAAM,MAAQ,MAAM,QAAQA,EAAK,EAAC,IAAI,GAAKA,EAAK,EAAC,KAAK,OAAS,GAACW,EAAAS,CAAA,qBAvCrDC,EAAAC,EAAA,aAAA,QAAAtB,IAAM,IAAI,EAAA,EAawBS,EAAAc,EAAAvB,IAAM,IAAI,EAWvDS,EAAAe,EAAAxB,IAAM,OAAO,gBAnBRM,CAAe,cATnBF,CAAe,EACZqB,EAAA,UAAAH,EAAAf,GAAMA,EAAE,MAAQ,SAAWH,GAAe,ivCCZtDsB,EAAuBC,EAAA,EAAA,EACvBC,IAAU,EAAI,EACdC,IAAuB,IAAI,EAEhB,eAAAC,GAAa,CACvB,GAAA,CACHC,EAAAH,EAAU,EAAI,EACdG,EAAAF,EAAQ,IAAI,EACN,MAAAG,EAAe,MAAAC,EAAG,WAAW,iBAAiB,EAAE,YAAW,CAChE,KAAM,WACN,OAAQ,SAAQ,CAAA,EAIjBF,EAAAL,EAASM,EAAO,IAAKhC,GAAe,IAC/BA,EAAM,MAAI,CAAK,MAAM,QAAQA,EAAM,IAAI,EAEtC,GAAA,CACQ,OAAAA,EAAM,MAAS,UAAYA,EAAM,KAAK,KAAI,EAAG,WAAW,GAAG,EACrEA,EAAM,KAAO,KAAK,MAAMA,EAAM,IAAI,SACjBA,EAAM,MAAS,WAChCA,EAAM,KAAOA,EAAM,KAAK,MAAM,GAAG,EAAE,IAAKmB,GAAgBA,EAAI,KAAI,CAAA,EAAI,OAAO,OAAO,EAEnF,OAAQZ,EAAG,CACX,QAAQ,MAAM,sBAAuBA,CAAC,EACtCP,EAAM,KAAI,CAAA,CACX,MACWA,EAAM,OACjBA,EAAM,KAAI,CAAA,UAGJA,EACP,CAAA,EAED,QAAQ,IAAI,mBAAkB0B,CAAM,CAAA,CACpC,OAAQQ,EAAK,CACb,QAAQ,MAAM,yBAA0BA,CAAG,EAC3CH,EAAAF,EAAQ,gCAAgC,CACzC,QAAU,CACTE,EAAAH,EAAU,EAAK,CAChB,CACD,CAEAO,EAAoB,SAAA,CACnB,QAAQ,IAAI,wCAAwC,QAC9CL,EAAU,EAChB,EAEQ,SAAAM,GAAkB,CAC1B/B,EAAK,yBAAyB,CAC/B,uEAQY+B,CAAe,8MAaOP,CAAK,CAAA,CAAA,mEAmB9BQ,EAAAC,EAAA,EAAA,IAAAC,EAAAb,CAAM,OAAI1B,IAAK,CAGM,MAAAwC,EAAAC,EAAA,IAAA,oBAAAF,EAAAvC,CAAK,EAAC,EAAE,EAAA,oFApB5B0B,CAAM,EAAC,SAAW,EAACf,EAAAK,CAAA,EAAAL,EAAA+B,EAAA,EAAA,kBALnBb,CAAK,EAAAlB,EAAAG,CAAA,EAAAH,EAAAgC,EAAA,EAAA,kBAJVf,CAAO,EAAAjB,EAAAC,CAAA,EAAAD,EAAAiC,EAAA,EAAA"}