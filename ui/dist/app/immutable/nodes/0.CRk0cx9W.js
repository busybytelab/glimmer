import{t as x,a as v,c as F}from"../chunks/Budn9l7p.js";import"../chunks/C5lklyGm.js";import{p as ie,c as t,n as ge,r,s as u,t as X,d as be,g as f,a as ne,l as _e,e as xe,f as J,b as I,m as ee}from"../chunks/Dy_2QLcd.js";import{s as le,e as S}from"../chunks/HzhFnYKD.js";import{i as P}from"../chunks/CSRWkSd7.js";import{s as re}from"../chunks/DM-nhMx8.js";import{i as ce}from"../chunks/Bd0QBR9D.js";import{s as de,a as M}from"../chunks/CbMnyNtw.js";import{o as we}from"../chunks/CeJAMhHV.js";import{a as W,e as te,u as K,i as m}from"../chunks/BsBrNaBX.js";import{s as U,a as ae,p as o}from"../chunks/NYO04WNS.js";import{i as se,g as ye,c as Q}from"../chunks/DZ250PhT.js";import{e as ke,i as Se}from"../chunks/KXxnkizF.js";import{p as Me}from"../chunks/DOVCkyMW.js";import"../chunks/CBbAiqO3.js";import{p as Ae}from"../chunks/PWoLFK6J.js";const ze=!1,$e=!1,Xe=Object.freeze(Object.defineProperty({__proto__:null,prerender:ze,ssr:$e},Symbol.toStringTag,{value:"Module"}));var Oe=x('<li><a><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> <span> </span></a></li>'),je=x('<aside><div class="h-full flex flex-col"><div class="flex items-center justify-center h-16 border-b border-gray-200"><img alt="Glimmer Logo" class="h-8 w-8 mr-2"> <div class="text-xl font-semibold text-gray-800">Glimmer</div></div> <nav class="flex-1 overflow-y-auto p-4"><ul class="space-y-2"></ul></nav> <div class="p-4 border-t border-gray-200"><button class="flex items-center justify-center w-full p-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> Sign Out</button></div></div></aside>');function oe(G,g){ie(g,!1);const[b,H]=de(),A=()=>M(Ae,"$page",b),z="/glimmer.svg";let N=Me(g,"isOpen",8,!0);const B=[{href:"/dashboard",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{href:"/practice-topics",label:"Practice Topics",icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{href:"/learners",label:"Learners",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{href:"/chat",label:"Chat",icon:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},{href:"/profile",label:"Profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{href:"/settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function $(l){if(A()){const s=A().url.pathname;return l==="/dashboard"&&s==="/dashboard"?!0:s.startsWith(l)}return!1}ce();var i=je(),O=t(i),w=t(O),j=t(w);U(j,"src",z),ge(2),r(w);var y=u(w,2),C=t(y);ke(C,5,()=>B,Se,(l,s)=>{var c=Oe(),a=t(c),e=t(a),h=t(e);r(e);var p=u(e,2),k=t(p,!0);r(p),r(a),r(c),X(d=>{U(a,"href",f(s).href),ae(a,1,d),U(h,"d",f(s).icon),le(k,f(s).label)},[()=>`flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors ${$(f(s).href)?"bg-gray-100 text-indigo-600":"text-gray-700"}`],be),v(l,c)}),r(C),r(y);var L=u(y,2),n=t(L);r(L),r(O),r(i),X(()=>ae(i,1,`bg-white border-r border-gray-200 w-64 flex-shrink-0 ${N()?"":"hidden"} md:block`)),S("click",n,()=>{o.authStore.clear(),document.cookie="pb_auth_token=; path=/; expires=Thu, 01 Jan 1970 00:00:00 GMT; SameSite=Lax",localStorage.removeItem("pocketbase_auth"),localStorage.removeItem("authToken"),window.location.href="/login"}),v(G,i),ne(),H()}var Ce=x('<div class="flex justify-center items-center h-screen"><div class="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900 dark:border-white"></div></div>'),Le=x('<div class="flex flex-col items-center justify-center h-screen"><div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div> <button class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Try Again</button></div>'),Te=x('<div class="md:hidden fixed inset-0 flex z-40 print:hidden"><button class="fixed inset-0 bg-gray-600 bg-opacity-75" aria-label="Close sidebar overlay"></button> <!></div>'),Ie=x('<div class="h-screen flex overflow-hidden bg-gray-100 print:h-auto print:overflow-visible"><!> <div class="hidden md:flex md:flex-shrink-0 print:hidden"><!></div> <div class="flex flex-col w-0 flex-1 overflow-hidden h-screen print:h-auto print:overflow-visible print:relative print:z-0"><div class="md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3 print:hidden"><button class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-secondary"><span class="sr-only">Open sidebar</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div> <main class="flex-1 relative z-0 overflow-y-auto focus:outline-none h-full print:h-auto print:overflow-visible print:relative print:z-0"><!></main></div></div>');function Ye(G,g){ie(g,!1);const[b,H]=de(),A=()=>M(W,"$isAuthLoading",b),z=()=>M(te,"$error",b),N=()=>M(m,"$isAuthenticated",b),B=()=>M(K,"$user",b),$=ee();let i=ee(!0);function O(){I(i,!f(i))}async function w(){var n,l,s;W.set(!0),te.set(null);try{const c=ye();if(c){o.authStore.token!==c&&(o.authStore.clear(),localStorage.setItem("pocketbase_auth",JSON.stringify({token:c,model:o.authStore.model})));try{if(await o.collection("users").authRefresh(),o.authStore.isValid){const a=await o.collection("users").getOne(((n=o.authStore.record)==null?void 0:n.id)??"");try{const e=await o.collection("instructors").getFirstListItem(`user="${(l=o.authStore.record)==null?void 0:l.id}"`);if(e){e.user=a,K.set(e),m.set(!0);return}}catch{}try{const e=await o.collection("learners").getFirstListItem(`user.id="${(s=o.authStore.record)==null?void 0:s.id}"`,{requestKey:null});if(e){e.user=a,K.set(e),m.set(!0);return}}catch{}console.log("WARNING: no instructor or learner found"),Q(),m.set(!1)}}catch(a){console.error("Auth refresh failed:",a),Q(),m.set(!1)}}else m.set(!1)}catch(c){console.error("Authentication initialization failed:",c),Q(),m.set(!1)}finally{W.set(!1)}}we(()=>{w()}),_e(()=>se,()=>{I($,se(window.location.pathname))}),xe(),ce();var j=F(),y=J(j);{var C=n=>{var l=Ce();v(n,l)},L=(n,l)=>{{var s=a=>{var e=Le(),h=t(e),p=u(t(h),2),k=t(p,!0);r(p),r(h);var d=u(h,2);r(e),X(()=>le(k,z())),S("click",d,()=>window.location.reload()),v(a,e)},c=a=>{var e=F(),h=J(e);{var p=d=>{var _=Ie(),T=t(_);{var ve=q=>{var D=Te(),E=t(D),pe=u(E,2);oe(pe,{isOpen:!0}),r(D),S("click",E,()=>I(i,!1)),S("keydown",E,me=>me.key==="Escape"&&I(i,!1)),v(q,D)};P(T,q=>{f(i)&&q(ve)})}var R=u(T,2),ue=t(R);oe(ue,{get isOpen(){return f(i)}}),r(R);var Y=u(R,2),V=t(Y),fe=t(V);r(V);var Z=u(V,2),he=t(Z);re(he,g,"default",{},null),r(Z),r(Y),r(_),S("click",fe,O),v(d,_)},k=d=>{var _=F(),T=J(_);re(T,g,"default",{},null),v(d,_)};P(h,d=>{N()&&B()&&!f($)?d(p):d(k,!1)})}v(a,e)};P(n,a=>{z()?a(s):a(c,!1)},l)}};P(y,n=>{A()?n(C):n(L,!1)})}v(G,j),ne(),H()}export{Ye as component,Xe as universal};
//# sourceMappingURL=0.CRk0cx9W.js.map
