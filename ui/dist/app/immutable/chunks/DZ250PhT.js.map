{"version":3,"file":"DZ250PhT.js","sources":["../../../../../../src/lib/auth.ts"],"sourcesContent":["import pb from './pocketbase';\n\n/**\n * Gets the current authentication token from either PocketBase's authStore or localStorage.\n * @returns The authentication token or an empty string if not authenticated.\n */\nexport function getAuthToken(): string {\n  // Check if PocketBase has a valid token in memory\n  if (pb.authStore.isValid && typeof pb.authStore.token === 'string' && pb.authStore.token !== '') {\n    return pb.authStore.token;\n  }\n  \n  // Fallback to localStorage\n  const storedToken = localStorage.getItem('authToken');\n  return storedToken !== null ? storedToken : '';\n}\n\n/**\n * Checks if the user is currently authenticated.\n * @returns True if authenticated, false otherwise.\n */\nexport function isAuthenticated(): boolean {\n  return getAuthToken() !== '';\n}\n\n/**\n * Saves the authentication token to localStorage for persistence between sessions.\n * @param rememberMe Whether to save the token in localStorage for persistence.\n */\nexport function saveAuthToken(rememberMe: boolean = true): void {\n  if (rememberMe && pb.authStore.isValid) {\n    localStorage.setItem('authToken', pb.authStore.token);\n  }\n}\n\n/**\n * Clears the authentication token from both PocketBase's authStore and localStorage.\n */\nexport function clearAuthToken(): void {\n  pb.authStore.clear();\n  localStorage.removeItem('authToken');\n}\n\n// Public routes that don't require authentication\nexport const PUBLIC_ROUTES = ['/login', '/forgot-password', '/reset-password'] as const;\n\n// Type for public routes\nexport type PublicRoute = typeof PUBLIC_ROUTES[number];\n\n// Helper function to check if a path is a public route\nexport function isPublicRoute(path: string): boolean {\n    return PUBLIC_ROUTES.some(route => path.startsWith(route));\n} "],"names":["getAuthToken","pb","storedToken","saveAuthToken","rememberMe","clearAuthToken","PUBLIC_ROUTES","isPublicRoute","path","route"],"mappings":"kCAMO,SAASA,GAAuB,CAEjC,GAAAC,EAAG,UAAU,SAAW,OAAOA,EAAG,UAAU,OAAU,UAAYA,EAAG,UAAU,QAAU,GAC3F,OAAOA,EAAG,UAAU,MAIhB,MAAAC,EAAc,aAAa,QAAQ,WAAW,EAC7C,OAAAA,IAAgB,KAAOA,EAAc,EAC9C,CAcgB,SAAAC,EAAcC,EAAsB,GAAY,CAC1DA,GAAcH,EAAG,UAAU,SAC7B,aAAa,QAAQ,YAAaA,EAAG,UAAU,KAAK,CAExD,CAKO,SAASI,GAAuB,CACrCJ,EAAG,UAAU,MAAM,EACnB,aAAa,WAAW,WAAW,CACrC,CAGO,MAAMK,EAAgB,CAAC,SAAU,mBAAoB,iBAAiB,EAMtE,SAASC,EAAcC,EAAuB,CACjD,OAAOF,EAAc,KAAKG,GAASD,EAAK,WAAWC,CAAK,CAAC,CAC7D"}