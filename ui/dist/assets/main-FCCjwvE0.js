var Ss=Object.defineProperty;var ks=(r,e,t)=>e in r?Ss(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var gr=(r,e,t)=>ks(r,typeof e!="symbol"?e+"":e,t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))n(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&n(i)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();const nn=!1;var Ut=Array.isArray,Cs=Array.prototype.indexOf,jr=Array.from,En=Object.defineProperty,wt=Object.getOwnPropertyDescriptor,On=Object.getOwnPropertyDescriptors,Es=Object.prototype,Os=Array.prototype,Dr=Object.getPrototypeOf,sn=Object.isExtensible;const xt=()=>{};function Ts(r){return r()}function kr(r){for(var e=0;e<r.length;e++)r[e]()}const Ue=2,Tn=4,ar=8,Fr=16,Xe=32,Ct=64,Jt=128,je=256,Qt=512,Se=1024,Ke=2048,dt=4096,Qe=8192,ir=16384,Ps=32768,Nr=65536,Pn=1<<17,$s=1<<19,$n=1<<20,Cr=1<<21,ot=Symbol("$state"),Ls=Symbol("legacy props"),As=Symbol("");function Ln(r){return r===this.v}function An(r,e){return r!=r?e==e:r!==e||r!==null&&typeof r=="object"||typeof r=="function"}function qr(r){return!An(r,this.v)}function Is(r){throw new Error("https://svelte.dev/e/effect_in_teardown")}function Rs(){throw new Error("https://svelte.dev/e/effect_in_unowned_derived")}function js(r){throw new Error("https://svelte.dev/e/effect_orphan")}function Ds(){throw new Error("https://svelte.dev/e/effect_update_depth_exceeded")}function Fs(r){throw new Error("https://svelte.dev/e/props_invalid_value")}function Ns(){throw new Error("https://svelte.dev/e/state_descriptors_fixed")}function qs(){throw new Error("https://svelte.dev/e/state_prototype_fixed")}function Us(){throw new Error("https://svelte.dev/e/state_unsafe_mutation")}let Et=!1,Ms=!1;function Bs(){Et=!0}const Ur=1,Mr=2,In=4,zs=8,Hs=16,Gs=1,Vs=2,Ws=4,Ks=8,Ys=16,Rn=1,Js=2,Te=Symbol(),Qs="http://www.w3.org/1999/xhtml";function jn(r){throw new Error("https://svelte.dev/e/lifecycle_outside_component")}let oe=null;function an(r){oe=r}function ke(r,e=!1,t){var n=oe={p:oe,c:null,d:!1,e:null,m:!1,s:r,x:null,l:null};Et&&!e&&(oe.l={s:null,u:null,r1:[],r2:Dt(!1)}),Br(()=>{n.d=!0})}function Ce(r){const e=oe;if(e!==null){const i=e.e;if(i!==null){var t=re,n=se;e.e=null;try{for(var s=0;s<i.length;s++){var a=i[s];ct(a.effect),Ye(a.reaction),cr(a.fn)}}finally{ct(t),Ye(n)}}oe=e.p,e.m=!0}return{}}function Mt(){return!Et||oe!==null&&oe.l===null}function pt(r){if(typeof r!="object"||r===null||ot in r)return r;const e=Dr(r);if(e!==Es&&e!==Os)return r;var t=new Map,n=Ut(r),s=tt(0),a=se,i=l=>{var c=se;Ye(a);var u=l();return Ye(c),u};return n&&t.set("length",tt(r.length)),new Proxy(r,{defineProperty(l,c,u){(!("value"in u)||u.configurable===!1||u.enumerable===!1||u.writable===!1)&&Ns();var w=t.get(c);return w===void 0?(w=i(()=>tt(u.value)),t.set(c,w)):b(w,i(()=>pt(u.value))),!0},deleteProperty(l,c){var u=t.get(c);if(u===void 0)c in l&&(t.set(c,i(()=>tt(Te))),mr(s));else{if(n&&typeof c=="string"){var w=t.get("length"),p=Number(c);Number.isInteger(p)&&p<w.v&&b(w,p)}b(u,Te),mr(s)}return!0},get(l,c,u){var v;if(c===ot)return r;var w=t.get(c),p=c in l;if(w===void 0&&(!p||(v=wt(l,c))!=null&&v.writable)&&(w=i(()=>tt(pt(p?l[c]:Te))),t.set(c,w)),w!==void 0){var h=o(w);return h===Te?void 0:h}return Reflect.get(l,c,u)},getOwnPropertyDescriptor(l,c){var u=Reflect.getOwnPropertyDescriptor(l,c);if(u&&"value"in u){var w=t.get(c);w&&(u.value=o(w))}else if(u===void 0){var p=t.get(c),h=p==null?void 0:p.v;if(p!==void 0&&h!==Te)return{enumerable:!0,configurable:!0,value:h,writable:!0}}return u},has(l,c){var h;if(c===ot)return!0;var u=t.get(c),w=u!==void 0&&u.v!==Te||Reflect.has(l,c);if(u!==void 0||re!==null&&(!w||(h=wt(l,c))!=null&&h.writable)){u===void 0&&(u=i(()=>tt(w?pt(l[c]):Te)),t.set(c,u));var p=o(u);if(p===Te)return!1}return w},set(l,c,u,w){var P;var p=t.get(c),h=c in l;if(n&&c==="length")for(var v=u;v<p.v;v+=1){var d=t.get(v+"");d!==void 0?b(d,Te):v in l&&(d=i(()=>tt(Te)),t.set(v+"",d))}p===void 0?(!h||(P=wt(l,c))!=null&&P.writable)&&(p=i(()=>tt(void 0)),b(p,i(()=>pt(u))),t.set(c,p)):(h=p.v!==Te,b(p,i(()=>pt(u))));var g=Reflect.getOwnPropertyDescriptor(l,c);if(g!=null&&g.set&&g.set.call(w,u),!h){if(n&&typeof c=="string"){var m=t.get("length"),O=Number(c);Number.isInteger(O)&&O>=m.v&&b(m,O+1)}mr(s)}return!0},ownKeys(l){o(s);var c=Reflect.ownKeys(l).filter(p=>{var h=t.get(p);return h===void 0||h.v!==Te});for(var[u,w]of t)w.v!==Te&&!(u in l)&&c.push(u);return c},setPrototypeOf(){qs()}})}function mr(r,e=1){b(r,r.v+e)}function on(r){try{if(r!==null&&typeof r=="object"&&ot in r)return r[ot]}catch{}return r}function Zs(r,e){return Object.is(on(r),on(e))}function Rt(r){var e=Ue|Ke,t=se!==null&&(se.f&Ue)!==0?se:null;return re===null||t!==null&&(t.f&je)!==0?e|=je:re.f|=$n,{ctx:oe,deps:null,effects:null,equals:Ln,f:e,fn:r,reactions:null,rv:0,v:null,wv:0,parent:t??re}}function De(r){const e=Rt(r);return e.equals=qr,e}function Dn(r){var e=r.effects;if(e!==null){r.effects=null;for(var t=0;t<e.length;t+=1)lt(e[t])}}function Xs(r){for(var e=r.parent;e!==null;){if((e.f&Ue)===0)return e;e=e.parent}return null}function Fn(r){var e,t=re;ct(Xs(r));try{Dn(r),e=es(r)}finally{ct(t)}return e}function Nn(r){var e=Fn(r),t=(it||(r.f&je)!==0)&&r.deps!==null?dt:Se;Me(r,t),r.equals(e)||(r.v=e,r.wv=Zn())}const jt=new Map;function Dt(r,e){var t={f:0,v:r,reactions:null,equals:Ln,rv:0,wv:0};return t}function tt(r,e){const t=Dt(r);return la(t),t}function j(r,e=!1){var n;const t=Dt(r);return e||(t.equals=qr),Et&&oe!==null&&oe.l!==null&&((n=oe.l).s??(n.s=[])).push(t),t}function pe(r,e){return b(r,Ve(()=>o(r))),e}function b(r,e,t=!1){se!==null&&!We&&Mt()&&(se.f&(Ue|Fr))!==0&&!(xe!=null&&xe.includes(r))&&Us();let n=t?pt(e):e;return Ft(r,n)}function Ft(r,e){if(!r.equals(e)){var t=r.v;zt?jt.set(r,e):jt.set(r,t),r.v=e,(r.f&Ue)!==0&&((r.f&Ke)!==0&&Fn(r),Me(r,(r.f&je)===0?Se:dt)),r.wv=Zn(),qn(r,Ke),Mt()&&re!==null&&(re.f&Se)!==0&&(re.f&(Xe|Ct))===0&&(qe===null?ca([r]):qe.push(r))}return e}function qn(r,e){var t=r.reactions;if(t!==null)for(var n=Mt(),s=t.length,a=0;a<s;a++){var i=t[a],l=i.f;(l&Ke)===0&&(!n&&i===re||(Me(i,e),(l&(Se|je))!==0&&((l&Ue)!==0?qn(i,dt):fr(i))))}}let ea=!1;var ln,Un,Mn,Bn;function ta(){if(ln===void 0){ln=window,Un=/Firefox/.test(navigator.userAgent);var r=Element.prototype,e=Node.prototype,t=Text.prototype;Mn=wt(e,"firstChild").get,Bn=wt(e,"nextSibling").get,sn(r)&&(r.__click=void 0,r.__className=void 0,r.__attributes=null,r.__style=void 0,r.__e=void 0),sn(t)&&(t.__t=void 0)}}function or(r=""){return document.createTextNode(r)}function Re(r){return Mn.call(r)}function lr(r){return Bn.call(r)}function f(r,e){return Re(r)}function Ne(r,e){{var t=Re(r);return t instanceof Comment&&t.data===""?lr(t):t}}function S(r,e=1,t=!1){let n=r;for(;e--;)n=lr(n);return n}function ra(r){r.textContent=""}function zn(r){re===null&&se===null&&js(),se!==null&&(se.f&je)!==0&&re===null&&Rs(),zt&&Is()}function na(r,e){var t=e.last;t===null?e.last=e.first=r:(t.next=r,r.prev=t,e.last=r)}function Ot(r,e,t,n=!0){var s=re,a={ctx:oe,deps:null,nodes_start:null,nodes_end:null,f:r|Ke,first:null,fn:e,last:null,next:null,parent:s,prev:null,teardown:null,transitions:null,wv:0};if(t)try{ur(a),a.f|=Ps}catch(c){throw lt(a),c}else e!==null&&fr(a);var i=t&&a.deps===null&&a.first===null&&a.nodes_start===null&&a.teardown===null&&(a.f&($n|Jt))===0;if(!i&&n&&(s!==null&&na(a,s),se!==null&&(se.f&Ue)!==0)){var l=se;(l.effects??(l.effects=[])).push(a)}return a}function Br(r){const e=Ot(ar,null,!1);return Me(e,Se),e.teardown=r,e}function Er(r){zn();var e=re!==null&&(re.f&Xe)!==0&&oe!==null&&!oe.m;if(e){var t=oe;(t.e??(t.e=[])).push({fn:r,effect:re,reaction:se})}else{var n=cr(r);return n}}function sa(r){return zn(),Bt(r)}function aa(r){const e=Ot(Ct,r,!0);return(t={})=>new Promise(n=>{t.outro?Xt(e,()=>{lt(e),n(void 0)}):(lt(e),n(void 0))})}function cr(r){return Ot(Tn,r,!1)}function Zt(r,e){var t=oe,n={effect:null,ran:!1};t.l.r1.push(n),n.effect=Bt(()=>{r(),!n.ran&&(n.ran=!0,b(t.l.r2,!0),Ve(e))})}function zr(){var r=oe;Bt(()=>{if(o(r.l.r2)){for(var e of r.l.r1){var t=e.effect;(t.f&Se)!==0&&Me(t,dt),Tt(t)&&ur(t),e.ran=!1}r.l.r2.v=!1}})}function Bt(r){return Ot(ar,r,!0)}function D(r,e=[],t=Rt){const n=e.map(t);return Hr(()=>r(...n.map(o)))}function Hr(r,e=0){return Ot(ar|Fr|e,r,!0)}function Nt(r,e=!0){return Ot(ar|Xe,r,!0,e)}function Hn(r){var e=r.teardown;if(e!==null){const t=zt,n=se;cn(!0),Ye(null);try{e.call(null)}finally{cn(t),Ye(n)}}}function Gn(r,e=!1){var t=r.first;for(r.first=r.last=null;t!==null;){var n=t.next;(t.f&Ct)!==0?t.parent=null:lt(t,e),t=n}}function ia(r){for(var e=r.first;e!==null;){var t=e.next;(e.f&Xe)===0&&lt(e),e=t}}function lt(r,e=!0){var t=!1;(e||(r.f&$s)!==0)&&r.nodes_start!==null&&(Vn(r.nodes_start,r.nodes_end),t=!0),Gn(r,e&&!t),sr(r,0),Me(r,ir);var n=r.transitions;if(n!==null)for(const a of n)a.stop();Hn(r);var s=r.parent;s!==null&&s.first!==null&&Wn(r),r.next=r.prev=r.teardown=r.ctx=r.deps=r.fn=r.nodes_start=r.nodes_end=null}function Vn(r,e){for(;r!==null;){var t=r===e?null:lr(r);r.remove(),r=t}}function Wn(r){var e=r.parent,t=r.prev,n=r.next;t!==null&&(t.next=n),n!==null&&(n.prev=t),e!==null&&(e.first===r&&(e.first=n),e.last===r&&(e.last=t))}function Xt(r,e){var t=[];Gr(r,t,!0),Kn(t,()=>{lt(r),e&&e()})}function Kn(r,e){var t=r.length;if(t>0){var n=()=>--t||e();for(var s of r)s.out(n)}else e()}function Gr(r,e,t){if((r.f&Qe)===0){if(r.f^=Qe,r.transitions!==null)for(const i of r.transitions)(i.is_global||t)&&e.push(i);for(var n=r.first;n!==null;){var s=n.next,a=(n.f&Nr)!==0||(n.f&Xe)!==0;Gr(n,e,a?t:!1),n=s}}}function er(r){Yn(r,!0)}function Yn(r,e){if((r.f&Qe)!==0){r.f^=Qe,(r.f&Se)===0&&(r.f^=Se),Tt(r)&&(Me(r,Ke),fr(r));for(var t=r.first;t!==null;){var n=t.next,s=(t.f&Nr)!==0||(t.f&Xe)!==0;Yn(t,s?e:!1),t=n}if(r.transitions!==null)for(const a of r.transitions)(a.is_global||e)&&a.in()}}let tr=[];function oa(){var r=tr;tr=[],kr(r)}function Jn(r){tr.length===0&&queueMicrotask(oa),tr.push(r)}let Kt=!1,Or=!1,rr=null,mt=!1,zt=!1;function cn(r){zt=r}let Yt=[];let se=null,We=!1;function Ye(r){se=r}let re=null;function ct(r){re=r}let xe=null;function la(r){se!==null&&se.f&Cr&&(xe===null?xe=[r]:xe.push(r))}let we=null,Ie=0,qe=null;function ca(r){qe=r}let Qn=1,nr=0,it=!1,at=null;function Zn(){return++Qn}function Tt(r){var p;var e=r.f;if((e&Ke)!==0)return!0;if((e&dt)!==0){var t=r.deps,n=(e&je)!==0;if(t!==null){var s,a,i=(e&Qt)!==0,l=n&&re!==null&&!it,c=t.length;if(i||l){var u=r,w=u.parent;for(s=0;s<c;s++)a=t[s],(i||!((p=a==null?void 0:a.reactions)!=null&&p.includes(u)))&&(a.reactions??(a.reactions=[])).push(u);i&&(u.f^=Qt),l&&w!==null&&(w.f&je)===0&&(u.f^=je)}for(s=0;s<c;s++)if(a=t[s],Tt(a)&&Nn(a),a.wv>r.wv)return!0}(!n||re!==null&&!it)&&Me(r,Se)}return!1}function da(r,e){for(var t=e;t!==null;){if((t.f&Jt)!==0)try{t.fn(r);return}catch{t.f^=Jt}t=t.parent}throw Kt=!1,r}function dn(r){return(r.f&ir)===0&&(r.parent===null||(r.parent.f&Jt)===0)}function dr(r,e,t,n){if(Kt){if(t===null&&(Kt=!1),dn(e))throw r;return}if(t!==null&&(Kt=!0),da(r,e),dn(e))throw r}function Xn(r,e,t=!0){var n=r.reactions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];xe!=null&&xe.includes(r)||((a.f&Ue)!==0?Xn(a,e,!1):e===a&&(t?Me(a,Ke):(a.f&Se)!==0&&Me(a,dt),fr(a)))}}function es(r){var v;var e=we,t=Ie,n=qe,s=se,a=it,i=xe,l=oe,c=We,u=r.f;we=null,Ie=0,qe=null,it=(u&je)!==0&&(We||!mt||se===null),se=(u&(Xe|Ct))===0?r:null,xe=null,an(r.ctx),We=!1,nr++,r.f|=Cr;try{var w=(0,r.fn)(),p=r.deps;if(we!==null){var h;if(sr(r,Ie),p!==null&&Ie>0)for(p.length=Ie+we.length,h=0;h<we.length;h++)p[Ie+h]=we[h];else r.deps=p=we;if(!it)for(h=Ie;h<p.length;h++)((v=p[h]).reactions??(v.reactions=[])).push(r)}else p!==null&&Ie<p.length&&(sr(r,Ie),p.length=Ie);if(Mt()&&qe!==null&&!We&&p!==null&&(r.f&(Ue|dt|Ke))===0)for(h=0;h<qe.length;h++)Xn(qe[h],r);return s!==null&&s!==r&&(nr++,qe!==null&&(n===null?n=qe:n.push(...qe))),w}finally{we=e,Ie=t,qe=n,se=s,it=a,xe=i,an(l),We=c,r.f^=Cr}}function ua(r,e){let t=e.reactions;if(t!==null){var n=Cs.call(t,r);if(n!==-1){var s=t.length-1;s===0?t=e.reactions=null:(t[n]=t[s],t.pop())}}t===null&&(e.f&Ue)!==0&&(we===null||!we.includes(e))&&(Me(e,dt),(e.f&(je|Qt))===0&&(e.f^=Qt),Dn(e),sr(e,0))}function sr(r,e){var t=r.deps;if(t!==null)for(var n=e;n<t.length;n++)ua(r,t[n])}function ur(r){var e=r.f;if((e&ir)===0){Me(r,Se);var t=re,n=oe,s=mt;re=r,mt=!0;try{(e&Fr)!==0?ia(r):Gn(r),Hn(r);var a=es(r);r.teardown=typeof a=="function"?a:null,r.wv=Qn;var i=r.deps,l;nn&&Ms&&r.f&Ke}catch(c){dr(c,r,t,n||r.ctx)}finally{mt=s,re=t}}}function fa(){try{Ds()}catch(r){if(rr!==null)dr(r,rr,null);else throw r}}function va(){var r=mt;try{var e=0;for(mt=!0;Yt.length>0;){e++>1e3&&fa();var t=Yt,n=t.length;Yt=[];for(var s=0;s<n;s++){var a=ha(t[s]);pa(a)}jt.clear()}}finally{Or=!1,mt=r,rr=null}}function pa(r){var e=r.length;if(e!==0)for(var t=0;t<e;t++){var n=r[t];if((n.f&(ir|Qe))===0)try{Tt(n)&&(ur(n),n.deps===null&&n.first===null&&n.nodes_start===null&&(n.teardown===null?Wn(n):n.fn=null))}catch(s){dr(s,n,null,n.ctx)}}}function fr(r){Or||(Or=!0,queueMicrotask(va));for(var e=rr=r;e.parent!==null;){e=e.parent;var t=e.f;if((t&(Ct|Xe))!==0){if((t&Se)===0)return;e.f^=Se}}Yt.push(e)}function ha(r){for(var e=[],t=r;t!==null;){var n=t.f,s=(n&(Xe|Ct))!==0,a=s&&(n&Se)!==0;if(!a&&(n&Qe)===0){if((n&Tn)!==0)e.push(t);else if(s)t.f^=Se;else try{Tt(t)&&ur(t)}catch(c){dr(c,t,null,t.ctx)}var i=t.first;if(i!==null){t=i;continue}}var l=t.parent;for(t=t.next;t===null&&l!==null;)t=l.next,l=l.parent}return e}function o(r){var e=r.f,t=(e&Ue)!==0;if(at!==null&&at.add(r),se!==null&&!We){if(!(xe!=null&&xe.includes(r))){var n=se.deps;r.rv<nr&&(r.rv=nr,we===null&&n!==null&&n[Ie]===r?Ie++:we===null?we=[r]:(!it||!we.includes(r))&&we.push(r))}}else if(t&&r.deps===null&&r.effects===null){var s=r,a=s.parent;a!==null&&(a.f&je)===0&&(s.f^=je)}return t&&(s=r,Tt(s)&&Nn(s)),zt&&jt.has(r)?jt.get(r):r.v}function ga(r){var e=at;at=new Set;var t=at,n;try{if(Ve(r),e!==null)for(n of at)e.add(n)}finally{at=e}return t}function ma(r){var e=ga(()=>Ve(r));for(var t of e)if((t.f&Pn)!==0)for(const n of t.deps||[])(n.f&Ue)===0&&Ft(n,n.v);else Ft(t,t.v)}function Ve(r){var e=We;try{return We=!0,r()}finally{We=e}}const ba=-7169;function Me(r,e){r.f=r.f&ba|e}function ts(r){if(!(typeof r!="object"||!r||r instanceof EventTarget)){if(ot in r)Tr(r);else if(!Array.isArray(r))for(let e in r){const t=r[e];typeof t=="object"&&t&&ot in t&&Tr(t)}}}function Tr(r,e=new Set){if(typeof r=="object"&&r!==null&&!(r instanceof EventTarget)&&!e.has(r)){e.add(r),r instanceof Date&&r.getTime();for(let n in r)try{Tr(r[n],e)}catch{}const t=Dr(r);if(t!==Object.prototype&&t!==Array.prototype&&t!==Map.prototype&&t!==Set.prototype&&t!==Date.prototype){const n=On(t);for(let s in n){const a=n[s].get;if(a)try{a.call(r)}catch{}}}}}const ya=["touchstart","touchmove"];function _a(r){return ya.includes(r)}let un=!1;function wa(){un||(un=!0,document.addEventListener("reset",r=>{Promise.resolve().then(()=>{var e;if(!r.defaultPrevented)for(const t of r.target.elements)(e=t.__on_r)==null||e.call(t)})},{capture:!0}))}function rs(r){var e=se,t=re;Ye(null),ct(null);try{return r()}finally{Ye(e),ct(t)}}function Vr(r,e,t,n=t){r.addEventListener(e,()=>rs(t));const s=r.__on_r;s?r.__on_r=()=>{s(),n(!0)}:r.__on_r=()=>n(!0),wa()}const xa=new Set,fn=new Set;function Sa(r,e,t,n={}){function s(a){if(n.capture||Lt.call(e,a),!a.cancelBubble)return rs(()=>t==null?void 0:t.call(this,a))}return r.startsWith("pointer")||r.startsWith("touch")||r==="wheel"?Jn(()=>{e.addEventListener(r,s,n)}):e.addEventListener(r,s,n),s}function ue(r,e,t,n,s){var a={capture:n,passive:s},i=Sa(r,e,t,a);(e===document.body||e===window||e===document)&&Br(()=>{e.removeEventListener(r,i,a)})}function Lt(r){var P;var e=this,t=e.ownerDocument,n=r.type,s=((P=r.composedPath)==null?void 0:P.call(r))||[],a=s[0]||r.target,i=0,l=r.__root;if(l){var c=s.indexOf(l);if(c!==-1&&(e===document||e===window)){r.__root=e;return}var u=s.indexOf(e);if(u===-1)return;c<=u&&(i=c)}if(a=s[i]||r.target,a!==e){En(r,"currentTarget",{configurable:!0,get(){return a||t}});var w=se,p=re;Ye(null),ct(null);try{for(var h,v=[];a!==null;){var d=a.assignedSlot||a.parentNode||a.host||null;try{var g=a["__"+n];if(g!=null&&(!a.disabled||r.target===a))if(Ut(g)){var[m,...O]=g;m.apply(a,[r,...O])}else g.call(a,r)}catch(k){h?v.push(k):h=k}if(r.cancelBubble||d===e||d===null)break;a=d}if(h){for(let k of v)queueMicrotask(()=>{throw k});throw h}}finally{r.__root=e,delete r.currentTarget,Ye(w),ct(p)}}}function Wr(r){var e=document.createElement("template");return e.innerHTML=r,e.content}function bt(r,e){var t=re;t.nodes_start===null&&(t.nodes_start=r,t.nodes_end=e)}function E(r,e){var t=(e&Rn)!==0,n=(e&Js)!==0,s,a=!r.startsWith("<!>");return()=>{s===void 0&&(s=Wr(a?r:"<!>"+r),t||(s=Re(s)));var i=n||Un?document.importNode(s,!0):s.cloneNode(!0);if(t){var l=Re(i),c=i.lastChild;bt(l,c)}else bt(i,i);return i}}function Ht(r,e,t="svg"){var n=!r.startsWith("<!>"),s=(e&Rn)!==0,a=`<${t}>${n?r:"<!>"+r}</${t}>`,i;return()=>{if(!i){var l=Wr(a),c=Re(l);if(s)for(i=document.createDocumentFragment();Re(c);)i.appendChild(Re(c));else i=Re(c)}var u=i.cloneNode(!0);if(s){var w=Re(u),p=u.lastChild;bt(w,p)}else bt(u,u);return u}}function Pe(r=""){{var e=or(r+"");return bt(e,e),e}}function Ze(){var r=document.createDocumentFragment(),e=document.createComment(""),t=or();return r.append(e,t),bt(e,t),r}function _(r,e){r!==null&&r.before(e)}function R(r,e){var t=e==null?"":typeof e=="object"?e+"":e;t!==(r.__t??(r.__t=r.nodeValue))&&(r.__t=t,r.nodeValue=t+"")}function ka(r,e){return Ca(r,e)}const yt=new Map;function Ca(r,{target:e,anchor:t,props:n={},events:s,context:a,intro:i=!0}){ta();var l=new Set,c=p=>{for(var h=0;h<p.length;h++){var v=p[h];if(!l.has(v)){l.add(v);var d=_a(v);e.addEventListener(v,Lt,{passive:d});var g=yt.get(v);g===void 0?(document.addEventListener(v,Lt,{passive:d}),yt.set(v,1)):yt.set(v,g+1)}}};c(jr(xa)),fn.add(c);var u=void 0,w=aa(()=>{var p=t??e.appendChild(or());return Nt(()=>{if(a){ke({});var h=oe;h.c=a}s&&(n.$$events=s),u=r(p,n)||{},a&&Ce()}),()=>{var d;for(var h of l){e.removeEventListener(h,Lt);var v=yt.get(h);--v===0?(document.removeEventListener(h,Lt),yt.delete(h)):yt.set(h,v)}fn.delete(c),p!==t&&((d=p.parentNode)==null||d.removeChild(p))}});return Ea.set(u,w),u}let Ea=new WeakMap;function A(r,e,[t,n]=[0,0]){var s=r,a=null,i=null,l=Te,c=t>0?Nr:0,u=!1;const w=(h,v=!0)=>{u=!0,p(v,h)},p=(h,v)=>{l!==(l=h)&&(l?(a?er(a):v&&(a=Nt(()=>v(s))),i&&Xt(i,()=>{i=null})):(i?er(i):v&&(i=Nt(()=>v(s,[t+1,n]))),a&&Xt(a,()=>{a=null})))};Hr(()=>{u=!1,e(w),u||p(null,null)},c)}function $e(r,e){return e}function Oa(r,e,t,n){for(var s=[],a=e.length,i=0;i<a;i++)Gr(e[i].e,s,!0);var l=a>0&&s.length===0&&t!==null;if(l){var c=t.parentNode;ra(c),c.append(t),n.clear(),st(r,e[0].prev,e[a-1].next)}Kn(s,()=>{for(var u=0;u<a;u++){var w=e[u];l||(n.delete(w.k),st(r,w.prev,w.next)),lt(w.e,!l)}})}function Le(r,e,t,n,s,a=null){var i=r,l={flags:e,items:new Map,first:null},c=(e&In)!==0;if(c){var u=r;i=u.appendChild(or())}var w=null,p=!1,h=De(()=>{var v=t();return Ut(v)?v:v==null?[]:jr(v)});Hr(()=>{var v=o(h),d=v.length;p&&d===0||(p=d===0,Ta(v,l,i,s,e,n,t),a!==null&&(d===0?w?er(w):w=Nt(()=>a(i)):w!==null&&Xt(w,()=>{w=null})),o(h))})}function Ta(r,e,t,n,s,a,i){var Z,ee,J,ne;var l=(s&zs)!==0,c=(s&(Ur|Mr))!==0,u=r.length,w=e.items,p=e.first,h=p,v,d=null,g,m=[],O=[],P,k,y,x;if(l)for(x=0;x<u;x+=1)P=r[x],k=a(P,x),y=w.get(k),y!==void 0&&((Z=y.a)==null||Z.measure(),(g??(g=new Set)).add(y));for(x=0;x<u;x+=1){if(P=r[x],k=a(P,x),y=w.get(k),y===void 0){var C=h?h.e.nodes_start:t;d=$a(C,e,d,d===null?e.first:d.next,P,k,x,n,s,i),w.set(k,d),m=[],O=[],h=d.next;continue}if(c&&Pa(y,P,x,s),(y.e.f&Qe)!==0&&(er(y.e),l&&((ee=y.a)==null||ee.unfix(),(g??(g=new Set)).delete(y))),y!==h){if(v!==void 0&&v.has(y)){if(m.length<O.length){var L=O[0],$;d=L.prev;var U=m[0],G=m[m.length-1];for($=0;$<m.length;$+=1)vn(m[$],L,t);for($=0;$<O.length;$+=1)v.delete(O[$]);st(e,U.prev,G.next),st(e,d,U),st(e,G,L),h=L,d=G,x-=1,m=[],O=[]}else v.delete(y),vn(y,h,t),st(e,y.prev,y.next),st(e,y,d===null?e.first:d.next),st(e,d,y),d=y;continue}for(m=[],O=[];h!==null&&h.k!==k;)(h.e.f&Qe)===0&&(v??(v=new Set)).add(h),O.push(h),h=h.next;if(h===null)continue;y=h}m.push(y),d=y,h=y.next}if(h!==null||v!==void 0){for(var V=v===void 0?[]:jr(v);h!==null;)(h.e.f&Qe)===0&&V.push(h),h=h.next;var W=V.length;if(W>0){var Q=(s&In)!==0&&u===0?t:null;if(l){for(x=0;x<W;x+=1)(J=V[x].a)==null||J.measure();for(x=0;x<W;x+=1)(ne=V[x].a)==null||ne.fix()}Oa(e,V,Q,w)}}l&&Jn(()=>{var I;if(g!==void 0)for(y of g)(I=y.a)==null||I.apply()}),re.first=e.first&&e.first.e,re.last=d&&d.e}function Pa(r,e,t,n){(n&Ur)!==0&&Ft(r.v,e),(n&Mr)!==0?Ft(r.i,t):r.i=t}function $a(r,e,t,n,s,a,i,l,c,u){var w=(c&Ur)!==0,p=(c&Hs)===0,h=w?p?j(s):Dt(s):s,v=(c&Mr)===0?i:Dt(i),d={i:v,v:h,k:a,a:null,e:null,prev:t,next:n};try{return d.e=Nt(()=>l(r,h,v,u),ea),d.e.prev=t&&t.e,d.e.next=n&&n.e,t===null?e.first=d:(t.next=d,t.e.next=d.e),n!==null&&(n.prev=d,n.e.prev=d.e),d}finally{}}function vn(r,e,t){for(var n=r.next?r.next.e.nodes_start:t,s=e?e.e.nodes_start:t,a=r.e.nodes_start;a!==n;){var i=lr(a);s.before(a),a=i}}function st(r,e,t){e===null?r.first=t:(e.next=t,e.e.next=t&&t.e),t!==null&&(t.prev=e,t.e.prev=e&&e.e)}function La(r,e,t=!1,n=!1,s=!1){var a=r,i="";D(()=>{var l=re;if(i!==(i=e()??"")&&(l.nodes_start!==null&&(Vn(l.nodes_start,l.nodes_end),l.nodes_start=l.nodes_end=null),i!=="")){var c=i+"";t?c=`<svg>${c}</svg>`:n&&(c=`<math>${c}</math>`);var u=Wr(c);if((t||n)&&(u=Re(u)),bt(Re(u),u.lastChild),t||n)for(;Re(u);)a.before(Re(u));else a.before(u)}})}function vr(r,e,t,n,s){var l;var a=(l=e.$$slots)==null?void 0:l[t],i=!1;a===!0&&(a=e.children,i=!0),a===void 0?s!==null&&s(r):a(r,i?()=>n:n)}function Aa(r,e,t){var n=r==null?"":""+r;return e&&(n=n?n+" "+e:e),n===""?null:n}function ge(r,e,t,n,s,a){var i=r.__className;if(i!==t||i===void 0){var l=Aa(t,n);l==null?r.removeAttribute("class"):r.className=l,r.__className=t}return a}const Ia=Symbol("is custom element"),Ra=Symbol("is html");function X(r,e,t,n){var s=ja(r);s[e]!==(s[e]=t)&&(e==="loading"&&(r[As]=t),t==null?r.removeAttribute(e):typeof t!="string"&&Da(r).includes(e)?r[e]=t:r.setAttribute(e,t))}function ja(r){return r.__attributes??(r.__attributes={[Ia]:r.nodeName.includes("-"),[Ra]:r.namespaceURI===Qs})}var pn=new Map;function Da(r){var e=pn.get(r.nodeName);if(e)return e;pn.set(r.nodeName,e=[]);for(var t,n=r,s=Element.prototype;s!==n;){t=On(n);for(var a in t)t[a].set&&e.push(a);n=Dr(n)}return e}function qt(r,e,t=e){var n=Mt();Vr(r,"input",s=>{var a=s?r.defaultValue:r.value;if(a=br(r)?yr(a):a,t(a),n&&a!==(a=e())){var i=r.selectionStart,l=r.selectionEnd;r.value=a??"",l!==null&&(r.selectionStart=i,r.selectionEnd=Math.min(l,r.value.length))}}),Ve(e)==null&&r.value&&t(br(r)?yr(r.value):r.value),Bt(()=>{var s=e();br(r)&&s===yr(r.value)||r.type==="date"&&!s&&!r.value||s!==r.value&&(r.value=s??"")})}function Fa(r,e,t=e){Vr(r,"change",n=>{var s=n?r.defaultChecked:r.checked;t(s)}),Ve(e)==null&&t(r.checked),Bt(()=>{var n=e();r.checked=!!n})}function br(r){var e=r.type;return e==="number"||e==="range"}function yr(r){return r===""?null:+r}function ns(r,e,t){if(r.multiple)return Ua(r,e);for(var n of r.options){var s=It(n);if(Zs(s,e)){n.selected=!0;return}}(!t||e!==void 0)&&(r.selectedIndex=-1)}function Na(r,e){cr(()=>{var t=new MutationObserver(()=>{var n=r.__value;ns(r,n)});return t.observe(r,{childList:!0,subtree:!0,attributes:!0,attributeFilter:["value"]}),()=>{t.disconnect()}})}function qa(r,e,t=e){var n=!0;Vr(r,"change",s=>{var a=s?"[selected]":":checked",i;if(r.multiple)i=[].map.call(r.querySelectorAll(a),It);else{var l=r.querySelector(a)??r.querySelector("option:not([disabled])");i=l&&It(l)}t(i)}),cr(()=>{var s=e();if(ns(r,s,n),n&&s===void 0){var a=r.querySelector(":checked");a!==null&&(s=It(a),t(s))}r.__value=s,n=!1}),Na(r)}function Ua(r,e){for(var t of r.options)t.selected=~e.indexOf(It(t))}function It(r){return"__value"in r?r.__value:r.value}function At(r){return function(...e){var t=e[0];return t.stopPropagation(),r==null?void 0:r.apply(this,e)}}function Kr(r){return function(...e){var t=e[0];return t.preventDefault(),r==null?void 0:r.apply(this,e)}}function Ae(r=!1){const e=oe,t=e.l.u;if(!t)return;let n=()=>ts(e.s);if(r){let s=0,a={};const i=Rt(()=>{let l=!1;const c=e.s;for(const u in c)c[u]!==a[u]&&(a[u]=c[u],l=!0);return l&&s++,s});n=()=>o(i)}t.b.length&&sa(()=>{hn(e,n),kr(t.b)}),Er(()=>{const s=Ve(()=>t.m.map(Ts));return()=>{for(const a of s)typeof a=="function"&&a()}}),t.a.length&&Er(()=>{hn(e,n),kr(t.a)})}function hn(r,e){if(r.l.s)for(const t of r.l.s)o(t);e()}function ss(r,e){var a;var t=(a=r.$$events)==null?void 0:a[e.type],n=Ut(t)?t.slice():t==null?[]:[t];for(var s of n)s.call(this,e)}function as(r,e,t){if(r==null)return e(void 0),xt;const n=Ve(()=>r.subscribe(e,t));return n.unsubscribe?()=>n.unsubscribe():n}const _t=[];function pr(r,e=xt){let t=null;const n=new Set;function s(l){if(An(r,l)&&(r=l,t)){const c=!_t.length;for(const u of n)u[1](),_t.push(u,r);if(c){for(let u=0;u<_t.length;u+=2)_t[u][0](_t[u+1]);_t.length=0}}}function a(l){s(l(r))}function i(l,c=xt){const u=[l,c];return n.add(u),n.size===1&&(t=e(s,a)||xt),l(r),()=>{n.delete(u),n.size===0&&t&&(t(),t=null)}}return{set:s,update:a,subscribe:i}}function Ma(r){let e;return as(r,t=>e=t)(),e}let Gt=!1,Pr=Symbol();function Je(r,e,t){const n=t[e]??(t[e]={store:null,source:j(void 0),unsubscribe:xt});if(n.store!==r&&!(Pr in t))if(n.unsubscribe(),n.store=r??null,r==null)n.source.v=void 0,n.unsubscribe=xt;else{var s=!0;n.unsubscribe=as(r,a=>{s?n.source.v=a:b(n.source,a)}),s=!1}return r&&Pr in t?Ma(r):o(n.source)}function Pt(){const r={};function e(){Br(()=>{for(var t in r)r[t].unsubscribe();En(r,Pr,{enumerable:!1,value:!0})})}return[r,e]}function Ba(r){var e=Gt;try{return Gt=!1,[r(),Gt]}finally{Gt=e}}function gn(r){var e;return((e=r.ctx)==null?void 0:e.d)??!1}function F(r,e,t,n){var L;var s=(t&Gs)!==0,a=!Et||(t&Vs)!==0,i=(t&Ks)!==0,l=(t&Ys)!==0,c=!1,u;i?[u,c]=Ba(()=>r[e]):u=r[e];var w=ot in r||Ls in r,p=i&&(((L=wt(r,e))==null?void 0:L.set)??(w&&e in r&&($=>r[e]=$)))||void 0,h=n,v=!0,d=!1,g=()=>(d=!0,v&&(v=!1,l?h=Ve(n):h=n),h);u===void 0&&n!==void 0&&(p&&a&&Fs(),u=g(),p&&p(u));var m;if(a)m=()=>{var $=r[e];return $===void 0?g():(v=!0,d=!1,$)};else{var O=(s?Rt:De)(()=>r[e]);O.f|=Pn,m=()=>{var $=o(O);return $!==void 0&&(h=void 0),$===void 0?h:$}}if((t&Ws)===0)return m;if(p){var P=r.$$legacy;return function($,U){return arguments.length>0?((!a||!U||P||c)&&p(U?m():$),$):m()}}var k=!1,y=!1,x=j(u),C=Rt(()=>{var $=m(),U=o(x);return k?(k=!1,y=!0,U):(y=!1,x.v=$)});return i&&o(C),s||(C.equals=qr),function($,U){if(at!==null&&(k=y,m(),o(x)),arguments.length>0){const G=U?o(C):a&&i?pt($):$;if(!C.equals(G)){if(k=!0,b(x,G),d&&h!==void 0&&(h=G),gn(C))return $;Ve(()=>o(C))}return $}return gn(C)?C.v:o(C)}}function ut(r){oe===null&&jn(),Et&&oe.l!==null?Ha(oe).m.push(r):Er(()=>{const e=Ve(r);if(typeof e=="function")return e})}function za(r,e,{bubbles:t=!1,cancelable:n=!1}={}){return new CustomEvent(r,{detail:e,bubbles:t,cancelable:n})}function is(){const r=oe;return r===null&&jn(),(e,t,n)=>{var a;const s=(a=r.s.$$events)==null?void 0:a[e];if(s){const i=Ut(s)?s.slice():[s],l=za(e,t,n);for(const c of i)c.call(r.x,l);return!l.defaultPrevented}return!0}}function Ha(r){var e=r.l;return e.u??(e.u={a:[],b:[],m:[]})}const Ga="5";var Cn;typeof window<"u"&&((Cn=window.__svelte??(window.__svelte={})).v??(Cn.v=new Set)).add(Ga);Bs();const St=pr(null),nt=pr(!1),_e=pr(null),_r=pr(!0);class Fe extends Error{constructor(e){var t,n,s,a;super("ClientResponseError"),this.url="",this.status=0,this.response={},this.isAbort=!1,this.originalError=null,Object.setPrototypeOf(this,Fe.prototype),e!==null&&typeof e=="object"&&(this.url=typeof e.url=="string"?e.url:"",this.status=typeof e.status=="number"?e.status:0,this.isAbort=!!e.isAbort,this.originalError=e.originalError,e.response!==null&&typeof e.response=="object"?this.response=e.response:e.data!==null&&typeof e.data=="object"?this.response=e.data:this.response={}),this.originalError||e instanceof Fe||(this.originalError=e),typeof DOMException<"u"&&e instanceof DOMException&&(this.isAbort=!0),this.name="ClientResponseError "+this.status,this.message=(t=this.response)==null?void 0:t.message,this.message||(this.isAbort?this.message="The request was autocancelled. You can find more info in https://github.com/pocketbase/js-sdk#auto-cancellation.":(a=(s=(n=this.originalError)==null?void 0:n.cause)==null?void 0:s.message)!=null&&a.includes("ECONNREFUSED ::1")?this.message="Failed to connect to the PocketBase server. Try changing the SDK URL from localhost to 127.0.0.1 (https://github.com/pocketbase/js-sdk/issues/21).":this.message="Something went wrong while processing your request.")}get data(){return this.response}toJSON(){return{...this}}}const Vt=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/;function Va(r,e){const t={};if(typeof r!="string")return t;const n=Object.assign({},{}).decode||Wa;let s=0;for(;s<r.length;){const a=r.indexOf("=",s);if(a===-1)break;let i=r.indexOf(";",s);if(i===-1)i=r.length;else if(i<a){s=r.lastIndexOf(";",a-1)+1;continue}const l=r.slice(s,a).trim();if(t[l]===void 0){let c=r.slice(a+1,i).trim();c.charCodeAt(0)===34&&(c=c.slice(1,-1));try{t[l]=n(c)}catch{t[l]=c}}s=i+1}return t}function mn(r,e,t){const n=Object.assign({},t||{}),s=n.encode||Ka;if(!Vt.test(r))throw new TypeError("argument name is invalid");const a=s(e);if(a&&!Vt.test(a))throw new TypeError("argument val is invalid");let i=r+"="+a;if(n.maxAge!=null){const l=n.maxAge-0;if(isNaN(l)||!isFinite(l))throw new TypeError("option maxAge is invalid");i+="; Max-Age="+Math.floor(l)}if(n.domain){if(!Vt.test(n.domain))throw new TypeError("option domain is invalid");i+="; Domain="+n.domain}if(n.path){if(!Vt.test(n.path))throw new TypeError("option path is invalid");i+="; Path="+n.path}if(n.expires){if(!function(c){return Object.prototype.toString.call(c)==="[object Date]"||c instanceof Date}(n.expires)||isNaN(n.expires.valueOf()))throw new TypeError("option expires is invalid");i+="; Expires="+n.expires.toUTCString()}if(n.httpOnly&&(i+="; HttpOnly"),n.secure&&(i+="; Secure"),n.priority)switch(typeof n.priority=="string"?n.priority.toLowerCase():n.priority){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}if(n.sameSite)switch(typeof n.sameSite=="string"?n.sameSite.toLowerCase():n.sameSite){case!0:i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"strict":i+="; SameSite=Strict";break;case"none":i+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}return i}function Wa(r){return r.indexOf("%")!==-1?decodeURIComponent(r):r}function Ka(r){return encodeURIComponent(r)}const Ya=typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal;let os;function kt(r){if(r)try{const e=decodeURIComponent(os(r.split(".")[1]).split("").map(function(t){return"%"+("00"+t.charCodeAt(0).toString(16)).slice(-2)}).join(""));return JSON.parse(e)||{}}catch{}return{}}function ls(r,e=0){let t=kt(r);return!(Object.keys(t).length>0&&(!t.exp||t.exp-e>Date.now()/1e3))}os=typeof atob!="function"||Ya?r=>{let e=String(r).replace(/=+$/,"");if(e.length%4==1)throw new Error("'atob' failed: The string to be decoded is not correctly encoded.");for(var t,n,s=0,a=0,i="";n=e.charAt(a++);~n&&(t=s%4?64*t+n:n,s++%4)?i+=String.fromCharCode(255&t>>(-2*s&6)):0)n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".indexOf(n);return i}:atob;const bn="pb_auth";class Yr{constructor(){this.baseToken="",this.baseModel=null,this._onChangeCallbacks=[]}get token(){return this.baseToken}get record(){return this.baseModel}get model(){return this.baseModel}get isValid(){return!ls(this.token)}get isSuperuser(){var t,n;let e=kt(this.token);return e.type=="auth"&&(((t=this.record)==null?void 0:t.collectionName)=="_superusers"||!((n=this.record)!=null&&n.collectionName)&&e.collectionId=="pbc_3142635823")}get isAdmin(){return console.warn("Please replace pb.authStore.isAdmin with pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),this.isSuperuser}get isAuthRecord(){return console.warn("Please replace pb.authStore.isAuthRecord with !pb.authStore.isSuperuser OR simply check the value of pb.authStore.record?.collectionName"),kt(this.token).type=="auth"&&!this.isSuperuser}save(e,t){this.baseToken=e||"",this.baseModel=t||null,this.triggerChange()}clear(){this.baseToken="",this.baseModel=null,this.triggerChange()}loadFromCookie(e,t=bn){const n=Va(e||"")[t]||"";let s={};try{s=JSON.parse(n),(typeof s===null||typeof s!="object"||Array.isArray(s))&&(s={})}catch{}this.save(s.token||"",s.record||s.model||null)}exportToCookie(e,t=bn){var c,u;const n={secure:!0,sameSite:!0,httpOnly:!0,path:"/"},s=kt(this.token);n.expires=s!=null&&s.exp?new Date(1e3*s.exp):new Date("1970-01-01"),e=Object.assign({},n,e);const a={token:this.token,record:this.record?JSON.parse(JSON.stringify(this.record)):null};let i=mn(t,JSON.stringify(a),e);const l=typeof Blob<"u"?new Blob([i]).size:i.length;if(a.record&&l>4096){a.record={id:(c=a.record)==null?void 0:c.id,email:(u=a.record)==null?void 0:u.email};const w=["collectionId","collectionName","verified"];for(const p in this.record)w.includes(p)&&(a.record[p]=this.record[p]);i=mn(t,JSON.stringify(a),e)}return i}onChange(e,t=!1){return this._onChangeCallbacks.push(e),t&&e(this.token,this.record),()=>{for(let n=this._onChangeCallbacks.length-1;n>=0;n--)if(this._onChangeCallbacks[n]==e)return delete this._onChangeCallbacks[n],void this._onChangeCallbacks.splice(n,1)}}triggerChange(){for(const e of this._onChangeCallbacks)e&&e(this.token,this.record)}}class Ja extends Yr{constructor(e="pocketbase_auth"){super(),this.storageFallback={},this.storageKey=e,this._bindStorageEvent()}get token(){return(this._storageGet(this.storageKey)||{}).token||""}get record(){const e=this._storageGet(this.storageKey)||{};return e.record||e.model||null}get model(){return this.record}save(e,t){this._storageSet(this.storageKey,{token:e,record:t}),super.save(e,t)}clear(){this._storageRemove(this.storageKey),super.clear()}_storageGet(e){if(typeof window<"u"&&(window!=null&&window.localStorage)){const t=window.localStorage.getItem(e)||"";try{return JSON.parse(t)}catch{return t}}return this.storageFallback[e]}_storageSet(e,t){if(typeof window<"u"&&(window!=null&&window.localStorage)){let n=t;typeof t!="string"&&(n=JSON.stringify(t)),window.localStorage.setItem(e,n)}else this.storageFallback[e]=t}_storageRemove(e){var t;typeof window<"u"&&(window!=null&&window.localStorage)&&((t=window.localStorage)==null||t.removeItem(e)),delete this.storageFallback[e]}_bindStorageEvent(){typeof window<"u"&&(window!=null&&window.localStorage)&&window.addEventListener&&window.addEventListener("storage",e=>{if(e.key!=this.storageKey)return;const t=this._storageGet(this.storageKey)||{};super.save(t.token||"",t.record||t.model||null)})}}class et{constructor(e){this.client=e}}class Qa extends et{async getAll(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/settings",e)}async update(e,t){return t=Object.assign({method:"PATCH",body:e},t),this.client.send("/api/settings",t)}async testS3(e="storage",t){return t=Object.assign({method:"POST",body:{filesystem:e}},t),this.client.send("/api/settings/test/s3",t).then(()=>!0)}async testEmail(e,t,n,s){return s=Object.assign({method:"POST",body:{email:t,template:n,collection:e}},s),this.client.send("/api/settings/test/email",s).then(()=>!0)}async generateAppleClientSecret(e,t,n,s,a,i){return i=Object.assign({method:"POST",body:{clientId:e,teamId:t,keyId:n,privateKey:s,duration:a}},i),this.client.send("/api/settings/apple/generate-client-secret",i)}}const Za=["requestKey","$cancelKey","$autoCancel","fetch","headers","body","query","params","cache","credentials","headers","integrity","keepalive","method","mode","redirect","referrer","referrerPolicy","signal","window"];function Jr(r){if(r){r.query=r.query||{};for(let e in r)Za.includes(e)||(r.query[e]=r[e],delete r[e])}}function cs(r){const e=[];for(const t in r){const n=encodeURIComponent(t),s=Array.isArray(r[t])?r[t]:[r[t]];for(let a of s)a=Xa(a),a!==null&&e.push(n+"="+a)}return e.join("&")}function Xa(r){return r==null?null:r instanceof Date?encodeURIComponent(r.toISOString().replace("T"," ")):encodeURIComponent(typeof r=="object"?JSON.stringify(r):r)}class ds extends et{constructor(){super(...arguments),this.clientId="",this.eventSource=null,this.subscriptions={},this.lastSentSubscriptions=[],this.maxConnectTimeout=15e3,this.reconnectAttempts=0,this.maxReconnectAttempts=1/0,this.predefinedReconnectIntervals=[200,300,500,1e3,1200,1500,2e3],this.pendingConnects=[]}get isConnected(){return!!this.eventSource&&!!this.clientId&&!this.pendingConnects.length}async subscribe(e,t,n){var i;if(!e)throw new Error("topic must be set.");let s=e;if(n){Jr(n=Object.assign({},n));const l="options="+encodeURIComponent(JSON.stringify({query:n.query,headers:n.headers}));s+=(s.includes("?")?"&":"?")+l}const a=function(l){const c=l;let u;try{u=JSON.parse(c==null?void 0:c.data)}catch{}t(u||{})};return this.subscriptions[s]||(this.subscriptions[s]=[]),this.subscriptions[s].push(a),this.isConnected?this.subscriptions[s].length===1?await this.submitSubscriptions():(i=this.eventSource)==null||i.addEventListener(s,a):await this.connect(),async()=>this.unsubscribeByTopicAndListener(e,a)}async unsubscribe(e){var n;let t=!1;if(e){const s=this.getSubscriptionsByTopic(e);for(let a in s)if(this.hasSubscriptionListeners(a)){for(let i of this.subscriptions[a])(n=this.eventSource)==null||n.removeEventListener(a,i);delete this.subscriptions[a],t||(t=!0)}}else this.subscriptions={};this.hasSubscriptionListeners()?t&&await this.submitSubscriptions():this.disconnect()}async unsubscribeByPrefix(e){var n;let t=!1;for(let s in this.subscriptions)if((s+"?").startsWith(e)){t=!0;for(let a of this.subscriptions[s])(n=this.eventSource)==null||n.removeEventListener(s,a);delete this.subscriptions[s]}t&&(this.hasSubscriptionListeners()?await this.submitSubscriptions():this.disconnect())}async unsubscribeByTopicAndListener(e,t){var a;let n=!1;const s=this.getSubscriptionsByTopic(e);for(let i in s){if(!Array.isArray(this.subscriptions[i])||!this.subscriptions[i].length)continue;let l=!1;for(let c=this.subscriptions[i].length-1;c>=0;c--)this.subscriptions[i][c]===t&&(l=!0,delete this.subscriptions[i][c],this.subscriptions[i].splice(c,1),(a=this.eventSource)==null||a.removeEventListener(i,t));l&&(this.subscriptions[i].length||delete this.subscriptions[i],n||this.hasSubscriptionListeners(i)||(n=!0))}this.hasSubscriptionListeners()?n&&await this.submitSubscriptions():this.disconnect()}hasSubscriptionListeners(e){var t,n;if(this.subscriptions=this.subscriptions||{},e)return!!((t=this.subscriptions[e])!=null&&t.length);for(let s in this.subscriptions)if((n=this.subscriptions[s])!=null&&n.length)return!0;return!1}async submitSubscriptions(){if(this.clientId)return this.addAllSubscriptionListeners(),this.lastSentSubscriptions=this.getNonEmptySubscriptionKeys(),this.client.send("/api/realtime",{method:"POST",body:{clientId:this.clientId,subscriptions:this.lastSentSubscriptions},requestKey:this.getSubscriptionsCancelKey()}).catch(e=>{if(!(e!=null&&e.isAbort))throw e})}getSubscriptionsCancelKey(){return"realtime_"+this.clientId}getSubscriptionsByTopic(e){const t={};e=e.includes("?")?e:e+"?";for(let n in this.subscriptions)(n+"?").startsWith(e)&&(t[n]=this.subscriptions[n]);return t}getNonEmptySubscriptionKeys(){const e=[];for(let t in this.subscriptions)this.subscriptions[t].length&&e.push(t);return e}addAllSubscriptionListeners(){if(this.eventSource){this.removeAllSubscriptionListeners();for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.addEventListener(e,t)}}removeAllSubscriptionListeners(){if(this.eventSource)for(let e in this.subscriptions)for(let t of this.subscriptions[e])this.eventSource.removeEventListener(e,t)}async connect(){if(!(this.reconnectAttempts>0))return new Promise((e,t)=>{this.pendingConnects.push({resolve:e,reject:t}),this.pendingConnects.length>1||this.initConnect()})}initConnect(){this.disconnect(!0),clearTimeout(this.connectTimeoutId),this.connectTimeoutId=setTimeout(()=>{this.connectErrorHandler(new Error("EventSource connect took too long."))},this.maxConnectTimeout),this.eventSource=new EventSource(this.client.buildURL("/api/realtime")),this.eventSource.onerror=e=>{this.connectErrorHandler(new Error("Failed to establish realtime connection."))},this.eventSource.addEventListener("PB_CONNECT",e=>{const t=e;this.clientId=t==null?void 0:t.lastEventId,this.submitSubscriptions().then(async()=>{let n=3;for(;this.hasUnsentSubscriptions()&&n>0;)n--,await this.submitSubscriptions()}).then(()=>{for(let s of this.pendingConnects)s.resolve();this.pendingConnects=[],this.reconnectAttempts=0,clearTimeout(this.reconnectTimeoutId),clearTimeout(this.connectTimeoutId);const n=this.getSubscriptionsByTopic("PB_CONNECT");for(let s in n)for(let a of n[s])a(e)}).catch(n=>{this.clientId="",this.connectErrorHandler(n)})})}hasUnsentSubscriptions(){const e=this.getNonEmptySubscriptionKeys();if(e.length!=this.lastSentSubscriptions.length)return!0;for(const t of e)if(!this.lastSentSubscriptions.includes(t))return!0;return!1}connectErrorHandler(e){if(clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),!this.clientId&&!this.reconnectAttempts||this.reconnectAttempts>this.maxReconnectAttempts){for(let n of this.pendingConnects)n.reject(new Fe(e));return this.pendingConnects=[],void this.disconnect()}this.disconnect(!0);const t=this.predefinedReconnectIntervals[this.reconnectAttempts]||this.predefinedReconnectIntervals[this.predefinedReconnectIntervals.length-1];this.reconnectAttempts++,this.reconnectTimeoutId=setTimeout(()=>{this.initConnect()},t)}disconnect(e=!1){var t;if(this.clientId&&this.onDisconnect&&this.onDisconnect(Object.keys(this.subscriptions)),clearTimeout(this.connectTimeoutId),clearTimeout(this.reconnectTimeoutId),this.removeAllSubscriptionListeners(),this.client.cancelRequest(this.getSubscriptionsCancelKey()),(t=this.eventSource)==null||t.close(),this.eventSource=null,this.clientId="",!e){this.reconnectAttempts=0;for(let n of this.pendingConnects)n.resolve();this.pendingConnects=[]}}}class us extends et{decode(e){return e}async getFullList(e,t){if(typeof e=="number")return this._getFullList(e,t);let n=500;return(t=Object.assign({},e,t)).batch&&(n=t.batch,delete t.batch),this._getFullList(n,t)}async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send(this.baseCrudPath,n).then(s=>{var a;return s.items=((a=s.items)==null?void 0:a.map(i=>this.decode(i)))||[],s})}async getFirstListItem(e,t){return(t=Object.assign({requestKey:"one_by_filter_"+this.baseCrudPath+"_"+e},t)).query=Object.assign({filter:e,skipTotal:1},t.query),this.getList(1,1,t).then(n=>{var s;if(!((s=n==null?void 0:n.items)!=null&&s.length))throw new Fe({status:404,response:{code:404,message:"The requested resource wasn't found.",data:{}}});return n.items[0]})}async getOne(e,t){if(!e)throw new Fe({url:this.client.buildURL(this.baseCrudPath+"/"),status:404,response:{code:404,message:"Missing required record id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(n=>this.decode(n))}async create(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send(this.baseCrudPath,t).then(n=>this.decode(n))}async update(e,t,n){return n=Object.assign({method:"PATCH",body:t},n),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),n).then(s=>this.decode(s))}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e),t).then(()=>!0)}_getFullList(e=500,t){(t=t||{}).query=Object.assign({skipTotal:1},t.query);let n=[],s=async a=>this.getList(a,e||500,t).then(i=>{const l=i.items;return n=n.concat(l),l.length==i.perPage?s(a+1):n});return s(1)}}function rt(r,e,t,n){const s=n!==void 0;return s||t!==void 0?s?(console.warn(r),e.body=Object.assign({},e.body,t),e.query=Object.assign({},e.query,n),e):Object.assign(e,t):e}function wr(r){var e;(e=r._resetAutoRefresh)==null||e.call(r)}class ei extends us{constructor(e,t){super(e),this.collectionIdOrName=t}get baseCrudPath(){return this.baseCollectionPath+"/records"}get baseCollectionPath(){return"/api/collections/"+encodeURIComponent(this.collectionIdOrName)}get isSuperusers(){return this.collectionIdOrName=="_superusers"||this.collectionIdOrName=="_pbc_2773867675"}async subscribe(e,t,n){if(!e)throw new Error("Missing topic.");if(!t)throw new Error("Missing subscription callback.");return this.client.realtime.subscribe(this.collectionIdOrName+"/"+e,t,n)}async unsubscribe(e){return e?this.client.realtime.unsubscribe(this.collectionIdOrName+"/"+e):this.client.realtime.unsubscribeByPrefix(this.collectionIdOrName)}async getFullList(e,t){if(typeof e=="number")return super.getFullList(e,t);const n=Object.assign({},e,t);return super.getFullList(n)}async getList(e=1,t=30,n){return super.getList(e,t,n)}async getFirstListItem(e,t){return super.getFirstListItem(e,t)}async getOne(e,t){return super.getOne(e,t)}async create(e,t){return super.create(e,t)}async update(e,t,n){return super.update(e,t,n).then(s=>{var a,i,l;if(((a=this.client.authStore.record)==null?void 0:a.id)===(s==null?void 0:s.id)&&(((i=this.client.authStore.record)==null?void 0:i.collectionId)===this.collectionIdOrName||((l=this.client.authStore.record)==null?void 0:l.collectionName)===this.collectionIdOrName)){let c=Object.assign({},this.client.authStore.record.expand),u=Object.assign({},this.client.authStore.record,s);c&&(u.expand=Object.assign(c,s.expand)),this.client.authStore.save(this.client.authStore.token,u)}return s})}async delete(e,t){return super.delete(e,t).then(n=>{var s,a,i;return!n||((s=this.client.authStore.record)==null?void 0:s.id)!==e||((a=this.client.authStore.record)==null?void 0:a.collectionId)!==this.collectionIdOrName&&((i=this.client.authStore.record)==null?void 0:i.collectionName)!==this.collectionIdOrName||this.client.authStore.clear(),n})}authResponse(e){const t=this.decode((e==null?void 0:e.record)||{});return this.client.authStore.save(e==null?void 0:e.token,t),Object.assign({},e,{token:(e==null?void 0:e.token)||"",record:t})}async listAuthMethods(e){return e=Object.assign({method:"GET",fields:"mfa,otp,password,oauth2"},e),this.client.send(this.baseCollectionPath+"/auth-methods",e)}async authWithPassword(e,t,n){let s;n=Object.assign({method:"POST",body:{identity:e,password:t}},n),this.isSuperusers&&(s=n.autoRefreshThreshold,delete n.autoRefreshThreshold,n.autoRefresh||wr(this.client));let a=await this.client.send(this.baseCollectionPath+"/auth-with-password",n);return a=this.authResponse(a),s&&this.isSuperusers&&function(l,c,u,w){wr(l);const p=l.beforeSend,h=l.authStore.record,v=l.authStore.onChange((d,g)=>{(!d||(g==null?void 0:g.id)!=(h==null?void 0:h.id)||(g!=null&&g.collectionId||h!=null&&h.collectionId)&&(g==null?void 0:g.collectionId)!=(h==null?void 0:h.collectionId))&&wr(l)});l._resetAutoRefresh=function(){v(),l.beforeSend=p,delete l._resetAutoRefresh},l.beforeSend=async(d,g)=>{var k;const m=l.authStore.token;if((k=g.query)!=null&&k.autoRefresh)return p?p(d,g):{url:d,sendOptions:g};let O=l.authStore.isValid;if(O&&ls(l.authStore.token,c))try{await u()}catch{O=!1}O||await w();const P=g.headers||{};for(let y in P)if(y.toLowerCase()=="authorization"&&m==P[y]&&l.authStore.token){P[y]=l.authStore.token;break}return g.headers=P,p?p(d,g):{url:d,sendOptions:g}}}(this.client,s,()=>this.authRefresh({autoRefresh:!0}),()=>this.authWithPassword(e,t,Object.assign({autoRefresh:!0},n))),a}async authWithOAuth2Code(e,t,n,s,a,i,l){let c={method:"POST",body:{provider:e,code:t,codeVerifier:n,redirectURL:s,createData:a}};return c=rt("This form of authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, body?, query?) is deprecated. Consider replacing it with authWithOAuth2Code(provider, code, codeVerifier, redirectURL, createData?, options?).",c,i,l),this.client.send(this.baseCollectionPath+"/auth-with-oauth2",c).then(u=>this.authResponse(u))}authWithOAuth2(...e){if(e.length>1||typeof(e==null?void 0:e[0])=="string")return console.warn("PocketBase: This form of authWithOAuth2() is deprecated and may get removed in the future. Please replace with authWithOAuth2Code() OR use the authWithOAuth2() realtime form as shown in https://pocketbase.io/docs/authentication/#oauth2-integration."),this.authWithOAuth2Code((e==null?void 0:e[0])||"",(e==null?void 0:e[1])||"",(e==null?void 0:e[2])||"",(e==null?void 0:e[3])||"",(e==null?void 0:e[4])||{},(e==null?void 0:e[5])||{},(e==null?void 0:e[6])||{});const t=(e==null?void 0:e[0])||{};let n=null;t.urlCallback||(n=yn(void 0));const s=new ds(this.client);function a(){n==null||n.close(),s.unsubscribe()}const i={},l=t.requestKey;return l&&(i.requestKey=l),this.listAuthMethods(i).then(c=>{var h;const u=c.oauth2.providers.find(v=>v.name===t.provider);if(!u)throw new Fe(new Error(`Missing or invalid provider "${t.provider}".`));const w=this.client.buildURL("/api/oauth2-redirect"),p=l?(h=this.client.cancelControllers)==null?void 0:h[l]:void 0;return p&&(p.signal.onabort=()=>{a()}),new Promise(async(v,d)=>{var g;try{await s.subscribe("@oauth2",async k=>{var x;const y=s.clientId;try{if(!k.state||y!==k.state)throw new Error("State parameters don't match.");if(k.error||!k.code)throw new Error("OAuth2 redirect error or missing code: "+k.error);const C=Object.assign({},t);delete C.provider,delete C.scopes,delete C.createData,delete C.urlCallback,(x=p==null?void 0:p.signal)!=null&&x.onabort&&(p.signal.onabort=null);const L=await this.authWithOAuth2Code(u.name,k.code,u.codeVerifier,w,t.createData,C);v(L)}catch(C){d(new Fe(C))}a()});const m={state:s.clientId};(g=t.scopes)!=null&&g.length&&(m.scope=t.scopes.join(" "));const O=this._replaceQueryParams(u.authURL+w,m);await(t.urlCallback||function(k){n?n.location.href=k:n=yn(k)})(O)}catch(m){a(),d(new Fe(m))}})}).catch(c=>{throw a(),c})}async authRefresh(e,t){let n={method:"POST"};return n=rt("This form of authRefresh(body?, query?) is deprecated. Consider replacing it with authRefresh(options?).",n,e,t),this.client.send(this.baseCollectionPath+"/auth-refresh",n).then(s=>this.authResponse(s))}async requestPasswordReset(e,t,n){let s={method:"POST",body:{email:e}};return s=rt("This form of requestPasswordReset(email, body?, query?) is deprecated. Consider replacing it with requestPasswordReset(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-password-reset",s).then(()=>!0)}async confirmPasswordReset(e,t,n,s,a){let i={method:"POST",body:{token:e,password:t,passwordConfirm:n}};return i=rt("This form of confirmPasswordReset(token, password, passwordConfirm, body?, query?) is deprecated. Consider replacing it with confirmPasswordReset(token, password, passwordConfirm, options?).",i,s,a),this.client.send(this.baseCollectionPath+"/confirm-password-reset",i).then(()=>!0)}async requestVerification(e,t,n){let s={method:"POST",body:{email:e}};return s=rt("This form of requestVerification(email, body?, query?) is deprecated. Consider replacing it with requestVerification(email, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-verification",s).then(()=>!0)}async confirmVerification(e,t,n){let s={method:"POST",body:{token:e}};return s=rt("This form of confirmVerification(token, body?, query?) is deprecated. Consider replacing it with confirmVerification(token, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/confirm-verification",s).then(()=>{const a=kt(e),i=this.client.authStore.record;return i&&!i.verified&&i.id===a.id&&i.collectionId===a.collectionId&&(i.verified=!0,this.client.authStore.save(this.client.authStore.token,i)),!0})}async requestEmailChange(e,t,n){let s={method:"POST",body:{newEmail:e}};return s=rt("This form of requestEmailChange(newEmail, body?, query?) is deprecated. Consider replacing it with requestEmailChange(newEmail, options?).",s,t,n),this.client.send(this.baseCollectionPath+"/request-email-change",s).then(()=>!0)}async confirmEmailChange(e,t,n,s){let a={method:"POST",body:{token:e,password:t}};return a=rt("This form of confirmEmailChange(token, password, body?, query?) is deprecated. Consider replacing it with confirmEmailChange(token, password, options?).",a,n,s),this.client.send(this.baseCollectionPath+"/confirm-email-change",a).then(()=>{const i=kt(e),l=this.client.authStore.record;return l&&l.id===i.id&&l.collectionId===i.collectionId&&this.client.authStore.clear(),!0})}async listExternalAuths(e,t){return this.client.collection("_externalAuths").getFullList(Object.assign({},t,{filter:this.client.filter("recordRef = {:id}",{id:e})}))}async unlinkExternalAuth(e,t,n){const s=await this.client.collection("_externalAuths").getFirstListItem(this.client.filter("recordRef = {:recordId} && provider = {:provider}",{recordId:e,provider:t}));return this.client.collection("_externalAuths").delete(s.id,n).then(()=>!0)}async requestOTP(e,t){return t=Object.assign({method:"POST",body:{email:e}},t),this.client.send(this.baseCollectionPath+"/request-otp",t)}async authWithOTP(e,t,n){return n=Object.assign({method:"POST",body:{otpId:e,password:t}},n),this.client.send(this.baseCollectionPath+"/auth-with-otp",n).then(s=>this.authResponse(s))}async impersonate(e,t,n){(n=Object.assign({method:"POST",body:{duration:t}},n)).headers=n.headers||{},n.headers.Authorization||(n.headers.Authorization=this.client.authStore.token);const s=new fs(this.client.baseURL,new Yr,this.client.lang),a=await s.send(this.baseCollectionPath+"/impersonate/"+encodeURIComponent(e),n);return s.authStore.save(a==null?void 0:a.token,this.decode((a==null?void 0:a.record)||{})),s}_replaceQueryParams(e,t={}){let n=e,s="";e.indexOf("?")>=0&&(n=e.substring(0,e.indexOf("?")),s=e.substring(e.indexOf("?")+1));const a={},i=s.split("&");for(const l of i){if(l=="")continue;const c=l.split("=");a[decodeURIComponent(c[0].replace(/\+/g," "))]=decodeURIComponent((c[1]||"").replace(/\+/g," "))}for(let l in t)t.hasOwnProperty(l)&&(t[l]==null?delete a[l]:a[l]=t[l]);s="";for(let l in a)a.hasOwnProperty(l)&&(s!=""&&(s+="&"),s+=encodeURIComponent(l.replace(/%20/g,"+"))+"="+encodeURIComponent(a[l].replace(/%20/g,"+")));return s!=""?n+"?"+s:n}}function yn(r){if(typeof window>"u"||!(window!=null&&window.open))throw new Fe(new Error("Not in a browser context - please pass a custom urlCallback function."));let e=1024,t=768,n=window.innerWidth,s=window.innerHeight;e=e>n?n:e,t=t>s?s:t;let a=n/2-e/2,i=s/2-t/2;return window.open(r,"popup_window","width="+e+",height="+t+",top="+i+",left="+a+",resizable,menubar=no")}class ti extends us{get baseCrudPath(){return"/api/collections"}async import(e,t=!1,n){return n=Object.assign({method:"PUT",body:{collections:e,deleteMissing:t}},n),this.client.send(this.baseCrudPath+"/import",n).then(()=>!0)}async getScaffolds(e){return e=Object.assign({method:"GET"},e),this.client.send(this.baseCrudPath+"/meta/scaffolds",e)}async truncate(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(this.baseCrudPath+"/"+encodeURIComponent(e)+"/truncate",t).then(()=>!0)}}class ri extends et{async getList(e=1,t=30,n){return(n=Object.assign({method:"GET"},n)).query=Object.assign({page:e,perPage:t},n.query),this.client.send("/api/logs",n)}async getOne(e,t){if(!e)throw new Fe({url:this.client.buildURL("/api/logs/"),status:404,response:{code:404,message:"Missing required log id.",data:{}}});return t=Object.assign({method:"GET"},t),this.client.send("/api/logs/"+encodeURIComponent(e),t)}async getStats(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/logs/stats",e)}}class ni extends et{async check(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/health",e)}}class si extends et{getUrl(e,t,n={}){return console.warn("Please replace pb.files.getUrl() with pb.files.getURL()"),this.getURL(e,t,n)}getURL(e,t,n={}){if(!t||!(e!=null&&e.id)||!(e!=null&&e.collectionId)&&!(e!=null&&e.collectionName))return"";const s=[];s.push("api"),s.push("files"),s.push(encodeURIComponent(e.collectionId||e.collectionName)),s.push(encodeURIComponent(e.id)),s.push(encodeURIComponent(t));let a=this.client.buildURL(s.join("/"));if(Object.keys(n).length){n.download===!1&&delete n.download;const i=new URLSearchParams(n);a+=(a.includes("?")?"&":"?")+i}return a}async getToken(e){return e=Object.assign({method:"POST"},e),this.client.send("/api/files/token",e).then(t=>(t==null?void 0:t.token)||"")}}class ai extends et{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/backups",e)}async create(e,t){return t=Object.assign({method:"POST",body:{name:e}},t),this.client.send("/api/backups",t).then(()=>!0)}async upload(e,t){return t=Object.assign({method:"POST",body:e},t),this.client.send("/api/backups/upload",t).then(()=>!0)}async delete(e,t){return t=Object.assign({method:"DELETE"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}`,t).then(()=>!0)}async restore(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/backups/${encodeURIComponent(e)}/restore`,t).then(()=>!0)}getDownloadUrl(e,t){return console.warn("Please replace pb.backups.getDownloadUrl() with pb.backups.getDownloadURL()"),this.getDownloadURL(e,t)}getDownloadURL(e,t){return this.client.buildURL(`/api/backups/${encodeURIComponent(t)}?token=${encodeURIComponent(e)}`)}}class ii extends et{async getFullList(e){return e=Object.assign({method:"GET"},e),this.client.send("/api/crons",e)}async run(e,t){return t=Object.assign({method:"POST"},t),this.client.send(`/api/crons/${encodeURIComponent(e)}`,t).then(()=>!0)}}function $r(r){return typeof Blob<"u"&&r instanceof Blob||typeof File<"u"&&r instanceof File||r!==null&&typeof r=="object"&&r.uri&&(typeof navigator<"u"&&navigator.product==="ReactNative"||typeof global<"u"&&global.HermesInternal)}function Lr(r){return r&&(r.constructor.name==="FormData"||typeof FormData<"u"&&r instanceof FormData)}function _n(r){for(const e in r){const t=Array.isArray(r[e])?r[e]:[r[e]];for(const n of t)if($r(n))return!0}return!1}const oi=/^[\-\.\d]+$/;function wn(r){if(typeof r!="string")return r;if(r=="true")return!0;if(r=="false")return!1;if((r[0]==="-"||r[0]>="0"&&r[0]<="9")&&oi.test(r)){let e=+r;if(""+e===r)return e}return r}class li extends et{constructor(){super(...arguments),this.requests=[],this.subs={}}collection(e){return this.subs[e]||(this.subs[e]=new ci(this.requests,e)),this.subs[e]}async send(e){const t=new FormData,n=[];for(let s=0;s<this.requests.length;s++){const a=this.requests[s];if(n.push({method:a.method,url:a.url,headers:a.headers,body:a.json}),a.files)for(let i in a.files){const l=a.files[i]||[];for(let c of l)t.append("requests."+s+"."+i,c)}}return t.append("@jsonPayload",JSON.stringify({requests:n})),e=Object.assign({method:"POST",body:t},e),this.client.send("/api/batch",e)}}class ci{constructor(e,t){this.requests=[],this.requests=e,this.collectionIdOrName=t}upsert(e,t){t=Object.assign({body:e||{}},t);const n={method:"PUT",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(n,t),this.requests.push(n)}create(e,t){t=Object.assign({body:e||{}},t);const n={method:"POST",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records"};this.prepareRequest(n,t),this.requests.push(n)}update(e,t,n){n=Object.assign({body:t||{}},n);const s={method:"PATCH",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(s,n),this.requests.push(s)}delete(e,t){t=Object.assign({},t);const n={method:"DELETE",url:"/api/collections/"+encodeURIComponent(this.collectionIdOrName)+"/records/"+encodeURIComponent(e)};this.prepareRequest(n,t),this.requests.push(n)}prepareRequest(e,t){if(Jr(t),e.headers=t.headers,e.json={},e.files={},t.query!==void 0){const s=cs(t.query);s&&(e.url+=(e.url.includes("?")?"&":"?")+s)}let n=t.body;Lr(n)&&(n=function(a){let i={};return a.forEach((l,c)=>{if(c==="@jsonPayload"&&typeof l=="string")try{let u=JSON.parse(l);Object.assign(i,u)}catch(u){console.warn("@jsonPayload error:",u)}else i[c]!==void 0?(Array.isArray(i[c])||(i[c]=[i[c]]),i[c].push(wn(l))):i[c]=wn(l)}),i}(n));for(const s in n){const a=n[s];if($r(a))e.files[s]=e.files[s]||[],e.files[s].push(a);else if(Array.isArray(a)){const i=[],l=[];for(const c of a)$r(c)?i.push(c):l.push(c);if(i.length>0&&i.length==a.length){e.files[s]=e.files[s]||[];for(let c of i)e.files[s].push(c)}else if(e.json[s]=l,i.length>0){let c=s;s.startsWith("+")||s.endsWith("+")||(c+="+"),e.files[c]=e.files[c]||[];for(let u of i)e.files[c].push(u)}}else e.json[s]=a}}}class fs{get baseUrl(){return this.baseURL}set baseUrl(e){this.baseURL=e}constructor(e="/",t,n="en-US"){this.cancelControllers={},this.recordServices={},this.enableAutoCancellation=!0,this.baseURL=e,this.lang=n,t?this.authStore=t:typeof window<"u"&&window.Deno?this.authStore=new Yr:this.authStore=new Ja,this.collections=new ti(this),this.files=new si(this),this.logs=new ri(this),this.settings=new Qa(this),this.realtime=new ds(this),this.health=new ni(this),this.backups=new ai(this),this.crons=new ii(this)}get admins(){return this.collection("_superusers")}createBatch(){return new li(this)}collection(e){return this.recordServices[e]||(this.recordServices[e]=new ei(this,e)),this.recordServices[e]}autoCancellation(e){return this.enableAutoCancellation=!!e,this}cancelRequest(e){return this.cancelControllers[e]&&(this.cancelControllers[e].abort(),delete this.cancelControllers[e]),this}cancelAllRequests(){for(let e in this.cancelControllers)this.cancelControllers[e].abort();return this.cancelControllers={},this}filter(e,t){if(!t)return e;for(let n in t){let s=t[n];switch(typeof s){case"boolean":case"number":s=""+s;break;case"string":s="'"+s.replace(/'/g,"\\'")+"'";break;default:s=s===null?"null":s instanceof Date?"'"+s.toISOString().replace("T"," ")+"'":"'"+JSON.stringify(s).replace(/'/g,"\\'")+"'"}e=e.replaceAll("{:"+n+"}",s)}return e}getFileUrl(e,t,n={}){return console.warn("Please replace pb.getFileUrl() with pb.files.getURL()"),this.files.getURL(e,t,n)}buildUrl(e){return console.warn("Please replace pb.buildUrl() with pb.buildURL()"),this.buildURL(e)}buildURL(e){var n;let t=this.baseURL;return typeof window>"u"||!window.location||t.startsWith("https://")||t.startsWith("http://")||(t=(n=window.location.origin)!=null&&n.endsWith("/")?window.location.origin.substring(0,window.location.origin.length-1):window.location.origin||"",this.baseURL.startsWith("/")||(t+=window.location.pathname||"/",t+=t.endsWith("/")?"":"/"),t+=this.baseURL),e&&(t+=t.endsWith("/")?"":"/",t+=e.startsWith("/")?e.substring(1):e),t}async send(e,t){t=this.initSendOptions(e,t);let n=this.buildURL(e);if(this.beforeSend){const s=Object.assign({},await this.beforeSend(n,t));s.url!==void 0||s.options!==void 0?(n=s.url||n,t=s.options||t):Object.keys(s).length&&(t=s,console!=null&&console.warn&&console.warn("Deprecated format of beforeSend return: please use `return { url, options }`, instead of `return options`."))}if(t.query!==void 0){const s=cs(t.query);s&&(n+=(n.includes("?")?"&":"?")+s),delete t.query}return this.getHeader(t.headers,"Content-Type")=="application/json"&&t.body&&typeof t.body!="string"&&(t.body=JSON.stringify(t.body)),(t.fetch||fetch)(n,t).then(async s=>{let a={};try{a=await s.json()}catch{}if(this.afterSend&&(a=await this.afterSend(s,a,t)),s.status>=400)throw new Fe({url:s.url,status:s.status,data:a});return a}).catch(s=>{throw new Fe(s)})}initSendOptions(e,t){if((t=Object.assign({method:"GET"},t)).body=function(s){if(typeof FormData>"u"||s===void 0||typeof s!="object"||s===null||Lr(s)||!_n(s))return s;const a=new FormData;for(const i in s){const l=s[i];if(l!==void 0)if(typeof l!="object"||_n({data:l})){const c=Array.isArray(l)?l:[l];for(let u of c)a.append(i,u)}else{let c={};c[i]=l,a.append("@jsonPayload",JSON.stringify(c))}}return a}(t.body),Jr(t),t.query=Object.assign({},t.params,t.query),t.requestKey===void 0&&(t.$autoCancel===!1||t.query.$autoCancel===!1?t.requestKey=null:(t.$cancelKey||t.query.$cancelKey)&&(t.requestKey=t.$cancelKey||t.query.$cancelKey)),delete t.$autoCancel,delete t.query.$autoCancel,delete t.$cancelKey,delete t.query.$cancelKey,this.getHeader(t.headers,"Content-Type")!==null||Lr(t.body)||(t.headers=Object.assign({},t.headers,{"Content-Type":"application/json"})),this.getHeader(t.headers,"Accept-Language")===null&&(t.headers=Object.assign({},t.headers,{"Accept-Language":this.lang})),this.authStore.token&&this.getHeader(t.headers,"Authorization")===null&&(t.headers=Object.assign({},t.headers,{Authorization:this.authStore.token})),this.enableAutoCancellation&&t.requestKey!==null){const n=t.requestKey||(t.method||"GET")+e;delete t.requestKey,this.cancelRequest(n);const s=new AbortController;this.cancelControllers[n]=s,t.signal=s.signal}return t}getHeader(e,t){e=e||{},t=t.toLowerCase();for(let n in e)if(n.toLowerCase()==t)return e[n];return null}}const di=()=>window.location.origin,H=new fs(di());function Ar(){if(H.authStore.isValid&&typeof H.authStore.token=="string"&&H.authStore.token!=="")return H.authStore.token;const r=localStorage.getItem("authToken");return r!==null?r:""}function ui(r=!0){r&&H.authStore.isValid&&localStorage.setItem("authToken",H.authStore.token)}function xr(){H.authStore.clear(),localStorage.removeItem("authToken")}const vs="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20width='32'%20height='32'%20viewBox='0%200%20100%20100'%20aria-hidden='true'%20role='img'%3e%3cdefs%3e%3c!--%20Playful%20Blue/Cyan%20Gradient%20--%3e%3clinearGradient%20id='shape1Gradient'%20x1='0%25'%20y1='0%25'%20x2='100%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%2300BFFF'/%3e%3c!--%20DeepSkyBlue%20--%3e%3cstop%20offset='100%25'%20stop-color='%2387CEFA'/%3e%3c!--%20LightSkyBlue%20--%3e%3c/linearGradient%3e%3c!--%20Bright%20Yellow/Lime%20Gradient%20--%3e%3clinearGradient%20id='shape2Gradient'%20x1='100%25'%20y1='0%25'%20x2='0%25'%20y2='100%25'%3e%3cstop%20offset='0%25'%20stop-color='%23FFD700'/%3e%3c!--%20Gold%20--%3e%3cstop%20offset='100%25'%20stop-color='%23ADFF2F'/%3e%3c!--%20GreenYellow%20--%3e%3c/linearGradient%3e%3c/defs%3e%3c!--%20Rounded%20Shape%201%20(like%20a%20soft%20square%20or%20cloud)%20--%3e%3cpath%20fill='url(%23shape1Gradient)'%20d='M20%2010%20C0%2010,%200%2030,%2020%2030%20H80%20C100%2030,%20100%2010,%2080%2010%20Z'%20transform='rotate(-15%2050%2050)%20translate(0%2015)'/%3e%3c!--%20Rounded%20Shape%202%20(like%20a%20soft%20triangle%20or%20drop)%20--%3e%3cpath%20fill='url(%23shape2Gradient)'%20d='M50%2045%20C20%2045,%2020%2090,%2050%2090%20C80%2090,%2080%2045,%2050%2045%20Z'%20transform='rotate(25%2050%2070)%20translate(0%20-5)'/%3e%3c!--%20Small%20Sparkle/Dot%20--%3e%3ccircle%20cx='75'%20cy='25'%20r='5'%20fill='%23FFFFFF'%20opacity='0.9'/%3e%3ccircle%20cx='75'%20cy='25'%20r='8'%20fill='%23FFFFFF'%20opacity='0.5'/%3e%3c/svg%3e";var fi=E('<div class="bg-red-100 dark:bg-red-900 border border-red-400 dark:border-red-700 text-red-700 dark:text-red-200 px-3 py-2 rounded relative text-sm" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),vi=E('<p id="email-error" class="mt-1 text-xs text-red-600 dark:text-red-300"> </p>'),pi=E('<p id="password-error" class="mt-1 text-xs text-red-600 dark:text-red-300"> </p>'),hi=Ht('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> Signing in...',1),gi=E('<div class="min-h-screen flex items-center justify-center bg-gray-100 dark:bg-gray-900"><div class="max-w-sm w-full space-y-6 p-6 bg-white dark:bg-gray-800 rounded-xl shadow-md"><div class="text-center"><div class="flex items-center justify-center"><img alt="Glimmer Logo" class="h-10 w-10 mr-3"> <h1 class="text-2xl font-bold text-primary dark:text-white svelte-phxsvf">Glimmer</h1></div> <p class="mt-1 text-gray-600 dark:text-gray-300 text-base">Learning Helper for Kids</p></div> <form class="space-y-4"><!> <div class="space-y-2"><div><label for="email" class="sr-only">Email address</label> <input id="email" name="email" type="email" autocomplete="email" required placeholder="Email address"> <!></div> <div><label for="password" class="sr-only">Password</label> <input id="password" name="password" type="password" autocomplete="current-password" required placeholder="Password"> <!></div></div> <div class="flex items-center justify-between"><div class="flex items-center"><input id="remember-me" name="remember-me" type="checkbox" class="h-4 w-4 text-secondary focus:ring-secondary border-gray-300 dark:border-gray-600 rounded bg-white dark:bg-gray-700 svelte-phxsvf"> <label for="remember-me" class="ml-2 block text-xs text-gray-900 dark:text-gray-200">Remember me</label></div> <div class="text-xs"><a href="/forgot-password" class="font-medium text-secondary hover:text-secondary focus:outline-none focus:underline dark:text-blue-400">Forgot your password?</a></div></div> <div><button type="submit" class="w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-secondary hover:bg-blue-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-secondary disabled:opacity-50 disabled:cursor-not-allowed transition-colors duration-200 svelte-phxsvf"><!></button></div></form></div></div>');function mi(r,e){ke(e,!1);const[t,n]=Pt(),s=()=>Je(_e,"$error",t);let a=j({email:"",password:"",rememberMe:!1}),i=j(!1),l=j({});function c(){b(l,{});let T=!0;return o(a).email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o(a).email)||(pe(l,o(l).email="Please enter a valid email address"),T=!1):(pe(l,o(l).email="Email is required"),T=!1),o(a).password?o(a).password.length<6&&(pe(l,o(l).password="Password must be at least 6 characters"),T=!1):(pe(l,o(l).password="Password is required"),T=!1),T}async function u(){if(c()){b(i,!0),_e.set(null);try{await H.collection("users").authWithPassword(o(a).email,o(a).password),ui(o(a).rememberMe),nt.set(!0),window.location.href="/dashboard"}catch(T){const q=T instanceof Error?T.message:"Login failed. Please check your credentials.";_e.set(q),pe(l,o(l).email=q)}finally{b(i,!1)}}}ut(()=>{_e.set(null)}),Ae();var w=gi(),p=f(w),h=f(p),v=f(h),d=f(v);X(d,"src",vs);var g=S(h,2),m=f(g);{var O=T=>{var q=fi(),Y=S(f(q),2),M=f(Y);D(()=>R(M,s())),_(T,q)};A(m,T=>{s()&&T(O)})}var P=S(m,2),k=f(P),y=S(f(k),2),x=S(y,2);{var C=T=>{var q=vi(),Y=f(q);D(()=>R(Y,o(l).email)),_(T,q)};A(x,T=>{o(l).email&&T(C)})}var L=S(k,2),$=S(f(L),2),U=S($,2);{var G=T=>{var q=pi(),Y=f(q);D(()=>R(Y,o(l).password)),_(T,q)};A(U,T=>{o(l).password&&T(G)})}var V=S(P,2),W=f(V),Q=f(W),Z=S(V,2),ee=f(Z),J=f(ee);{var ne=T=>{var q=hi();_(T,q)},I=T=>{var q=Pe("Sign in");_(T,q)};A(J,T=>{o(i)?T(ne):T(I,!1)})}D(()=>{ge(y,1,`block w-full px-3 py-2 rounded-t-md border ${o(l).email?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm`,"svelte-phxsvf"),y.disabled=o(i),X(y,"aria-invalid",!!o(l).email),X(y,"aria-describedby",o(l).email?"email-error":void 0),ge($,1,`block w-full px-3 py-2 rounded-b-md border ${o(l).password?"border-red-500 dark:border-red-400":"border-gray-300 dark:border-gray-600"} placeholder-gray-400 dark:placeholder-gray-500 text-gray-900 dark:text-gray-100 bg-gray-100 dark:bg-gray-700 focus:outline-none focus:ring-secondary focus:border-secondary sm:text-sm`,"svelte-phxsvf"),$.disabled=o(i),X($,"aria-invalid",!!o(l).password),X($,"aria-describedby",o(l).password?"password-error":void 0),Q.disabled=o(i),ee.disabled=o(i)}),qt(y,()=>o(a).email,T=>pe(a,o(a).email=T)),qt($,()=>o(a).password,T=>pe(a,o(a).password=T)),Fa(Q,()=>o(a).rememberMe,T=>pe(a,o(a).rememberMe=T)),ue("submit",g,Kr(u)),_(r,w),Ce(),n()}var bi=E('<li><a><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-3" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2"></path></svg> <span> </span></a></li>'),yi=E('<aside><div class="h-full flex flex-col"><div class="flex items-center justify-center h-16 border-b border-gray-200"><img alt="Glimmer Logo" class="h-8 w-8 mr-2"> <div class="text-xl font-semibold text-gray-800">Glimmer</div></div> <nav class="flex-1 overflow-y-auto p-4"><ul class="space-y-2"></ul></nav> <div class="p-4 border-t border-gray-200"><button class="flex items-center justify-center w-full p-2 bg-red-50 text-red-600 rounded-md hover:bg-red-100 transition-colors"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 mr-2" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"></path></svg> Sign Out</button></div></div></aside>');function xn(r,e){let t=F(e,"isOpen",8,!0);const n=[{href:"/",label:"Dashboard",icon:"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6"},{href:"/practice-topics",label:"Practice Topics",icon:"M12 6.253v13m0-13C10.832 5.477 9.246 5 7.5 5S4.168 5.477 3 6.253v13C4.168 18.477 5.754 18 7.5 18s3.332.477 4.5 1.253m0-13C13.168 5.477 14.754 5 16.5 5c1.747 0 3.332.477 4.5 1.253v13C19.832 18.477 18.247 18 16.5 18c-1.746 0-3.332.477-4.5 1.253"},{href:"/learners",label:"Learners",icon:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"},{href:"/chat",label:"Chat",icon:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"},{href:"/profile",label:"Profile",icon:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"},{href:"/settings",label:"Settings",icon:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}];function s(d,g){d.preventDefault(),window.navigate(g)}function a(d){if(typeof window<"u"){const g=window.location.pathname;return d==="/"?g==="/":g.startsWith(d)}return!1}var i=yi(),l=f(i),c=f(l),u=f(c);X(u,"src",vs);var w=S(c,2),p=f(w);Le(p,5,()=>n,$e,(d,g)=>{var m=bi(),O=f(m),P=f(O),k=f(P),y=S(P,2),x=f(y);D(C=>{X(O,"href",o(g).href),ge(O,1,C),X(k,"d",o(g).icon),R(x,o(g).label)},[()=>`flex items-center p-2 rounded-md hover:bg-gray-100 transition-colors ${a(o(g).href)?"bg-gray-100 text-indigo-600":"text-gray-700"}`],De),ue("click",O,C=>s(C,o(g).href)),_(d,m)});var h=S(w,2),v=f(h);D(()=>ge(i,1,`bg-white border-r border-gray-200 w-64 flex-shrink-0 ${t()?"":"hidden"} md:block`)),ue("click",v,()=>{localStorage.removeItem("pocketbase_auth"),window.location.href="/"}),_(r,i)}var _i=E('<div class="md:hidden fixed inset-0 flex z-40"><button class="fixed inset-0 bg-gray-600 bg-opacity-75" aria-label="Close sidebar overlay"></button> <!></div>'),wi=E('<div class="h-screen flex overflow-hidden bg-gray-100"><!> <div class="hidden md:flex md:flex-shrink-0"><!></div> <div class="flex flex-col w-0 flex-1 overflow-hidden h-screen"><div class="md:hidden pl-1 pt-1 sm:pl-3 sm:pt-3"><button class="-ml-0.5 -mt-0.5 h-12 w-12 inline-flex items-center justify-center rounded-md text-gray-500 hover:text-gray-900 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-secondary svelte-kbooa2"><span class="sr-only">Open sidebar</span> <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg></button></div> <main class="flex-1 relative z-0 overflow-y-auto focus:outline-none h-full"><!></main></div></div>');function ft(r,e){let t=F(e,"sidebarOpen",12,!0);function n(){t(!t())}var s=wi(),a=f(s);{var i=d=>{var g=_i(),m=f(g),O=S(m,2);xn(O,{isOpen:!0}),ue("click",m,()=>t(!1)),ue("keydown",m,P=>P.key==="Escape"&&t(!1)),_(d,g)};A(a,d=>{t()&&d(i)})}var l=S(a,2),c=f(l);xn(c,{get isOpen(){return t()}});var u=S(l,2),w=f(u),p=f(w),h=S(w,2),v=f(h);vr(v,e,"default",{},null),ue("click",p,n),_(r,s)}var xi=E('<div class="bg-red-100 border-l-4 border-red-500 text-red-700 p-4 rounded-md shadow-sm mb-4" role="alert"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-red-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm font-medium"> </p></div></div></div>');function Qr(r,e){let t=F(e,"message",8);var n=Ze(),s=Ne(n);{var a=i=>{var l=xi(),c=f(l),u=S(f(c),2),w=f(u),p=f(w);D(()=>R(p,t())),_(i,l)};A(s,i=>{t()&&i(a)})}_(r,n)}var Si=Ht('<svg class="animate-spin h-5 w-5 text-gray-400" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg>'),ki=E('<div class="bg-white overflow-hidden shadow rounded-lg"><div class="p-5"><div class="flex items-center"><div class="flex-shrink-0"><svg class="h-6 w-6 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><!></svg></div> <div class="ml-5 w-0 flex-1"><dl><dt class="text-sm font-medium text-gray-500 truncate"> </dt> <dd class="flex items-baseline"><div class="text-2xl font-semibold text-gray-900"><!></div></dd></dl></div></div></div></div>');function Sr(r,e){let t=F(e,"title",8),n=F(e,"value",8),s=F(e,"isLoading",8,!1),a=F(e,"icon",8);var i=ki(),l=f(i),c=f(l),u=f(c),w=f(u),p=f(w);La(p,a,!0);var h=S(u,2),v=f(h),d=f(v),g=f(d),m=S(d,2),O=f(m),P=f(O);{var k=x=>{var C=Si();_(x,C)},y=x=>{var C=Pe();D(()=>R(C,n())),_(x,C)};A(P,x=>{s()?x(k):x(y,!1)})}D(()=>R(g,t())),_(r,i)}var Ci=E('<div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8 mt-4"><!></div>'),Ei=E('<div class="py-6"><div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8"><h1 class="text-2xl font-semibold text-gray-900">Dashboard</h1></div> <!> <div class="max-w-7xl mx-auto px-4 sm:px-6 md:px-8"><div class="py-4"><div class="grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-3"><!> <!> <!></div></div></div></div>');function Oi(r,e){const[t,n]=Pt(),s=()=>Je(_e,"$error",t);let a=F(e,"activeLearners",8),i=F(e,"practiceTopics",8),l=F(e,"completedSessions",8),c=F(e,"isLoading",8,!1);const u={learners:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z" />',topics:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10" />',sessions:'<path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />'};var w=Ei(),p=S(f(w),2);{var h=k=>{var y=Ci(),x=f(y);Qr(x,{get message(){return s()}}),_(k,y)};A(p,k=>{s()&&k(h)})}var v=S(p,2),d=f(v),g=f(d),m=f(g);Sr(m,{title:"Active Learners",get value(){return a()},get isLoading(){return c()},get icon(){return u.learners}});var O=S(m,2);Sr(O,{title:"Practice Topics",get value(){return i()},get isLoading(){return c()},get icon(){return u.topics}});var P=S(O,2);Sr(P,{title:"Completed Sessions",get value(){return l()},get isLoading(){return c()},get icon(){return u.sessions}}),_(r,w),n()}function Sn(r,e){ke(e,!1);const[t,n]=Pt(),s=()=>Je(St,"$user",t);let a=j(!0),i=j(0),l=j(0),c=j(0),u=j(!0);ut(async()=>{await w()});async function w(){b(u,!0),_e.set(null);try{const p=s();if(!p)throw new Error("User not found");let h={activeLearners:0,practiceTopics:0,completedSessions:0};"account"in p?(console.log(p),h={activeLearners:0,practiceTopics:0,completedSessions:0}):(console.log(p),h={activeLearners:1,practiceTopics:0,completedSessions:0}),b(i,h.activeLearners),b(l,h.practiceTopics),b(c,h.completedSessions)}catch(p){console.error("Error fetching dashboard stats:",p),_e.set(p instanceof Error?p.message:"Failed to fetch dashboard stats")}finally{b(u,!1)}}Ae(),ft(r,{get sidebarOpen(){return o(a)},set sidebarOpen(p){b(a,p)},children:(p,h)=>{Oi(p,{get activeLearners(){return o(i)},get practiceTopics(){return o(l)},get completedSessions(){return o(c)},get isLoading(){return o(u)}})},$$slots:{default:!0},$$legacy:!0}),Ce(),n()}var Ti=E('<span class="text-red-500">*</span>'),Pi=E('<div><label class="block text-sm font-medium text-gray-700 mb-1 text-left"> <!></label> <input></div>');function ht(r,e){let t=F(e,"id",8),n=F(e,"label",8),s=F(e,"type",8,"text"),a=F(e,"value",12),i=F(e,"disabled",8,!1),l=F(e,"required",8,!1),c=F(e,"placeholder",8,""),u=F(e,"cols",8,"col-span-6 sm:col-span-3");var w=Pi(),p=f(w),h=f(p),v=S(h);{var d=m=>{var O=Ti();_(m,O)};A(v,m=>{l()&&m(d)})}var g=S(p,2);D(()=>{ge(w,1,`${u()} mb-4`),X(p,"for",t()),R(h,`${n()??""} `),X(g,"type",s()),X(g,"name",t()),X(g,"id",t()),X(g,"placeholder",c()),g.required=l(),g.disabled=i(),ge(g,1,`mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-sm shadow-sm placeholder-gray-400
		focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500
		dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-500
		disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200 disabled:shadow-none
		${i()?"":"hover:border-gray-400"}`)}),qt(g,a),_(r,w)}var $i=Ht('<svg class="animate-spin -ml-1 mr-3 h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24"><circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle><path class="opacity-75" fill="currentColor" d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"></path></svg> ',1),Li=E("<button><!></button>");function Ge(r,e){let t=F(e,"type",8,"button"),n=F(e,"isLoading",8,!1),s=F(e,"disabled",8,!1),a=F(e,"variant",8,"primary"),i=F(e,"loadingText",8,"Loading...");const l={primary:"bg-indigo-600 hover:bg-indigo-700 focus:ring-indigo-500 border-indigo-600",secondary:"bg-gray-600 hover:bg-gray-700 focus:ring-gray-500 border-gray-600",danger:"bg-red-600 hover:bg-red-700 focus:ring-red-500 border-red-600"};var c=Li(),u=f(c);{var w=h=>{var v=$i(),d=S(Ne(v),1,!0);D(()=>R(d,i())),_(h,v)},p=h=>{var v=Ze(),d=Ne(v);vr(d,e,"default",{},g=>{var m=Pe("Submit");_(g,m)}),_(h,v)};A(u,h=>{n()?h(w):h(p,!1)})}D(()=>{X(c,"type",t()),ge(c,1,`inline-flex justify-center py-2 px-5 border shadow-sm text-sm font-medium rounded-md text-white 
	${l[a()]} 
	focus:outline-none focus:ring-2 focus:ring-offset-2
	transition-all duration-200 ease-in-out
	disabled:opacity-50 disabled:cursor-not-allowed
	`),c.disabled=s()||n()}),ue("click",c,function(h){ss.call(this,e,h)}),_(r,c)}var Ai=E('<p class="mt-1 max-w-2xl text-sm text-gray-500 mx-auto"> </p>'),Ii=E('<div class="bg-white shadow overflow-hidden sm:rounded-lg border border-gray-200 mb-6"><div class="px-4 py-5 sm:px-6 bg-gray-50"><h3 class="text-lg leading-6 font-medium text-gray-900"> </h3> <!></div> <div class="border-t border-gray-200"><!></div></div>');function ps(r,e){let t=F(e,"title",8),n=F(e,"description",8,"");var s=Ii(),a=f(s),i=f(a),l=f(i),c=S(i,2);{var u=h=>{var v=Ai(),d=f(v);D(()=>R(d,n())),_(h,v)};A(c,h=>{n()&&h(u)})}var w=S(a,2),p=f(w);vr(p,e,"default",{},null),D(()=>R(l,t())),_(r,s)}var Ri=E('<div class="max-w-3xl mx-auto px-4 sm:px-6 md:px-8 mb-6"><!></div>'),ji=E('<form class="p-4"><div class="py-4 bg-white"><div class="grid grid-cols-6 gap-6"><!> <!></div></div> <div class="px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4 -mx-4 -mb-4 border-t border-gray-200"><!></div></form>'),Di=E('<div class="py-6"><div class="max-w-3xl mx-auto px-4 sm:px-6 md:px-8"><h1 class="text-2xl font-semibold text-gray-900 mb-6">Edit Profile</h1></div> <!> <div class="max-w-3xl mx-auto px-4 sm:px-6 md:px-8"><!></div></div>');function Fi(r,e){ke(e,!1);const[t,n]=Pt(),s=()=>Je(_e,"$error",t);let a=F(e,"profile",8,null),i=F(e,"isLoading",8,!1),l=j(""),c=j("");const u=is();function w(){u("save",{name:o(l)})}Zt(()=>ts(a()),()=>{a()&&(b(l,a().name),b(c,a().email))}),zr(),Ae();var p=Di(),h=S(f(p),2);{var v=m=>{var O=Ri(),P=f(O);Qr(P,{get message(){return s()}}),_(m,O)};A(h,m=>{s()&&m(v)})}var d=S(h,2),g=f(d);ps(g,{title:"Profile Information",description:"Update your personal details",children:(m,O)=>{var P=ji(),k=f(P),y=f(k),x=f(y);ht(x,{id:"name",label:"Name",get disabled(){return i()},required:!0,get value(){return o(l)},set value(U){b(l,U)},$$legacy:!0});var C=S(x,2);ht(C,{id:"email",label:"Email address (cannot be changed)",type:"email",get value(){return o(c)},cols:"col-span-6 sm:col-span-4",disabled:!0,required:!0});var L=S(k,2),$=f(L);Ge($,{type:"submit",get isLoading(){return i()},loadingText:"Saving...",children:(U,G)=>{var V=Pe("Save");_(U,V)},$$slots:{default:!0}}),ue("submit",P,Kr(w)),_(m,P)},$$slots:{default:!0}}),_(r,p),Ce(),n()}var Ni=E('<div class="max-w-3xl mx-auto px-4 sm:px-6 md:px-8 my-4"><div class="bg-green-50 border-l-4 border-green-500 text-green-700 p-4 rounded-md shadow-sm" role="alert"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-green-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm font-medium">Your profile has been updated successfully!</p></div></div></div></div>'),qi=E("<!> <!>",1);function Ui(r,e){ke(e,!1);const[t,n]=Pt(),s=()=>Je(St,"$user",t);let a=j(!0),i=j(!1),l=j(null),c=j(!1);ut(async()=>{await u()});async function u(){var p,h;b(i,!0),_e.set(null);try{const v=s();if(!v)throw new Error("User not found");b(l,{name:((p=v.user)==null?void 0:p.name)||"",email:((h=v.user)==null?void 0:h.email)||""})}catch(v){console.error("Error fetching user profile:",v),_e.set(v instanceof Error?v.message:"Failed to fetch user profile")}finally{b(i,!1)}}async function w(p){b(i,!0),_e.set(null),b(c,!1);try{const{name:h}=p.detail,v=s();if(!v||!v.user)throw new Error("User not found");const d=v.user.id;await H.collection("users").update(d,{name:h}),v.user&&(v.user.name=h,St.set(v)),o(l)&&b(l,{...o(l),name:h}),b(c,!0),setTimeout(()=>{b(c,!1)},3e3)}catch(h){console.error("Error updating profile:",h),_e.set(h instanceof Error?h.message:"Failed to update profile")}finally{b(i,!1)}}Ae(),ft(r,{get sidebarOpen(){return o(a)},set sidebarOpen(p){b(a,p)},children:(p,h)=>{var v=qi(),d=Ne(v);{var g=O=>{var P=Ni();_(O,P)};A(d,O=>{o(c)&&O(g)})}var m=S(d,2);Fi(m,{get profile(){return o(l)},get isLoading(){return o(i)},$$events:{save:w}}),_(p,v)},$$slots:{default:!0},$$legacy:!0}),Ce(),n()}var Mi=E('<div class="max-w-3xl mx-auto px-4 sm:px-6 md:px-8 my-8"><h1 class="text-2xl font-semibold text-gray-900 mb-6">Settings</h1> <div class="bg-white shadow overflow-hidden sm:rounded-lg"><div class="px-4 py-5 sm:p-6"><p class="text-gray-700">This is the Settings page. Application settings and preferences will be available here.</p></div></div></div>');function Bi(r){let e=j(!0);ft(r,{get sidebarOpen(){return o(e)},set sidebarOpen(t){b(e,t)},children:(t,n)=>{var s=Mi();_(t,s)},$$slots:{default:!0},$$legacy:!0})}var zi=E('<span class="text-red-500">*</span>'),Hi=E('<label class="block text-sm font-medium text-gray-700 mb-1 text-left"> <!></label>'),Gi=E("<div><!> <textarea></textarea></div>");function Wt(r,e){let t=F(e,"id",8),n=F(e,"label",8),s=F(e,"value",12),a=F(e,"disabled",8,!1),i=F(e,"required",8,!1),l=F(e,"placeholder",8,""),c=F(e,"rows",8,3),u=F(e,"cols",8,"col-span-6 sm:col-span-3"),w=F(e,"class_override",8,"");var p=Gi(),h=f(p);{var v=g=>{var m=Hi(),O=f(m),P=S(O);{var k=y=>{var x=zi();_(y,x)};A(P,y=>{i()&&y(k)})}D(()=>{X(m,"for",t()),R(O,`${n()??""} `)}),_(g,m)};A(h,g=>{n()&&g(v)})}var d=S(h,2);D(()=>{ge(p,1,`${u()} ${n()?"mb-4":""}`),X(d,"name",t()),X(d,"id",t()),X(d,"placeholder",l()),d.required=i(),d.disabled=a(),X(d,"rows",c()),ge(d,1,w()||`mt-1 block w-full px-3 py-2 bg-white border border-gray-300 rounded-md text-sm shadow-sm placeholder-gray-400
		focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500
		dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-500
		disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200 disabled:shadow-none
		resize-none
		${a()?"":"hover:border-gray-400"}`)}),qt(d,s),ue("keydown",d,function(g){ss.call(this,e,g)}),_(r,p)}var Vi=E('<span class="text-red-500">*</span>'),Wi=E("<div><label> <!></label> <select><!></select></div>");function hs(r,e){let t=F(e,"id",8),n=F(e,"label",8),s=F(e,"value",12),a=F(e,"disabled",8,!1),i=F(e,"required",8,!1),l=F(e,"cols",8,"col-span-6 sm:col-span-3"),c=F(e,"inline",8,!1);var u=Wi(),w=f(u),p=f(w),h=S(p);{var v=m=>{var O=Vi();_(m,O)};A(h,m=>{i()&&m(v)})}var d=S(w,2);D(()=>{s(),ma(()=>{t(),i(),a(),c()})});var g=f(d);vr(g,e,"default",{},null),D(()=>{ge(u,1,`${l()} mb-4 ${c()?"flex items-center gap-2":""}`),X(w,"for",t()),ge(w,1,`block text-sm font-medium text-gray-700 text-left $${c()?"":"mb-1"}`),R(p,`${n()??""} `),X(d,"name",t()),X(d,"id",t()),d.required=i(),d.disabled=a(),ge(d,1,`mt-1 block w-full pl-3 pr-10 py-2 border border-gray-300 rounded-md text-sm shadow-sm placeholder-gray-400
		focus:outline-none focus:border-indigo-500 focus:ring-1 focus:ring-indigo-500
		dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-500
		disabled:bg-gray-50 disabled:text-gray-500 disabled:border-gray-200 disabled:shadow-none
		${a()?"":"hover:border-gray-400"} $${c()?"mt-0":""}
		appearance-none bg-no-repeat bg-[length:1.5em_1.5em] bg-[right_0.5rem_center] bg-[url('data:image/svg+xml;charset=utf-8,%3Csvg%20xmlns%3D%22http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg%22%20fill%3D%22none%22%20viewBox%3D%220%200%2020%2020%22%3E%3Cpath%20stroke%3D%22%236B7280%22%20stroke-linecap%3D%22round%22%20stroke-linejoin%3D%22round%22%20stroke-width%3D%221.5%22%20d%3D%22m6%208%204%204%204-4%22%2F%3E%3C%2Fsvg%3E')]`)}),qa(d,s),_(r,u)}const gt=class gt{constructor(){gr(this,"baseUrl","/api/llm")}static getInstance(){return gt.instance||(gt.instance=new gt),gt.instance}async getInfo(){const e=Ar();if(!e)throw new Error("Please log in again.");const t=await fetch(`${this.baseUrl}/info`,{headers:{Authorization:`Bearer ${e}`}});if(!t.ok)throw new Error(`Error: ${t.status} ${t.statusText}`);return t.json()}async chat(e,t,n){const s=Ar();if(!s)throw new Error("Please log in again.");const a={prompt:e,systemPrompt:t};n&&(a.model=n);const i=await fetch(`${this.baseUrl}/chat`,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${s}`},body:JSON.stringify(a)});if(!i.ok)throw new Error(`Error: ${i.status} ${i.statusText}`);return i.json()}};gr(gt,"instance");let Ir=gt;const Rr=Ir.getInstance();var Ki=E('<div class="mb-6"><!></div>'),Yi=E("<option>Loading models...</option>"),Ji=E("<option>Error loading models</option>"),Qi=E("<option> </option>"),Zi=E('<span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),Xi=E('<div class="mt-2 flex flex-wrap gap-2"></div>'),eo=E('<form class="p-4"><!> <div class="py-4 bg-white"><div class="grid grid-cols-6 gap-6"><!> <!> <!> <!> <!> <!> <!> <!> <!> <!> <!></div></div> <div class="px-4 py-3 bg-gray-50 text-right sm:px-6 mt-4 -mx-4 -mb-4 border-t border-gray-200 flex justify-end space-x-4"><!> <!> <!></div></form>'),to=E('<div class="mx-auto px-4 sm:px-6 md:px-8"><!></div>');function kn(r,e){ke(e,!1);let t=F(e,"topic",8,null);const n=is();let s=j(t()?{name:t().name,subject:t().subject,description:t().description||"",target_age_range:t().target_age_range||"",target_grade_level:t().target_grade_level||"",learning_goals:Array.isArray(t().learning_goals)?t().learning_goals:[],base_prompt:t().base_prompt||"",system_prompt:t().system_prompt||"",tags:Array.isArray(t().tags)?t().tags:[],llm_model:t().llm_model||""}:{name:"",subject:"",description:"",target_age_range:"",target_grade_level:"",learning_goals:[],base_prompt:"",system_prompt:"",tags:[],llm_model:""}),a=j(!1),i=j(null),l=j(o(s).learning_goals.join(`
`)),c=j(o(s).tags.join(", ")),u=j(!1),w=j(null),p=j([]);async function h(){b(u,!0),b(w,null);try{const y=await Rr.getInfo();if(b(p,y.platforms.flatMap(x=>x.models.map(C=>({id:C.name,name:`${C.name}${C.isDefault?" (Default)":""}`,isDefault:C.isDefault})))),o(p).length===0&&b(p,[{id:"",name:"Default"}]),!o(s).llm_model){const x=o(p).find(C=>C.isDefault);x&&pe(s,o(s).llm_model=x.id)}}catch(y){console.error("Error fetching models:",y),b(w,y instanceof Error?y.message:"Failed to fetch models"),b(p,[{id:"",name:"Default"}])}finally{b(u,!1)}}h();function v(){return o(s).name?o(s).subject?o(s).base_prompt?null:"Base prompt is required":"Subject is required":"Name is required"}async function d(){const y=v();if(y){b(i,y);return}try{b(a,!0),b(i,null);const x=H.authStore.model;if(!x&&!t()){b(i,"You must be logged in to create a topic"),b(a,!1);return}const C={...o(s)};if(typeof C.tags=="string"&&(C.tags=C.tags.split(",").map($=>$.trim()).filter(Boolean)),console.log("Data being sent to server:",C),!t())try{if(!x){b(i,"You must be logged in to create a topic"),b(a,!1);return}const $=await H.collection("instructors").getList(1,1,{filter:`user.id = "${x.id}"`});if($&&$.items.length>0)C.instructor=$.items[0].id,C.account=$.items[0].account;else{const U=await H.collection("accounts").getList(1,1,{filter:`owner.id = "${x.id}"`});if(U&&U.items.length>0)C.account=U.items[0].id;else{b(i,"Could not determine account for user"),b(a,!1);return}}}catch($){console.error("Failed to get user account info:",$),b(i,"Failed to get account information"),b(a,!1);return}let L;t()?L=await H.collection("practice_topics").update(t().id,C):L=await H.collection("practice_topics").create(C),console.log("Response from server:",L),n("update",L)}catch(x){console.error("Failed to save topic:",x),b(i,"Failed to save practice topic")}finally{b(a,!1)}}function g(y){const x=y.target;b(c,x.value),pe(s,o(s).tags=o(c).split(",").map(C=>C.trim()).filter(Boolean)),console.log("Tags updated through input:",o(s).tags)}async function m(){if(t()&&confirm("Are you sure you want to delete this practice topic?"))try{b(a,!0),b(i,null),await H.collection("practice_topics").delete(t().id),n("delete",t().id)}catch(y){console.error("Failed to delete topic:",y),b(i,"Failed to delete practice topic")}finally{b(a,!1)}}Zt(()=>(o(l),o(c)),()=>{pe(s,o(s).learning_goals=o(l).split(`
`).map(y=>y.trim()).filter(Boolean)),pe(s,o(s).tags=o(c).split(",").map(y=>y.trim()).filter(Boolean))}),zr(),Ae();var O=to(),P=f(O);const k=De(()=>t()?"Edit Practice Topic":"Create Practice Topic");ps(P,{get title(){return o(k)},description:"Enter the details for this practice topic",children:(y,x)=>{var C=eo(),L=f(C);{var $=N=>{var ae=Ki(),fe=f(ae);Qr(fe,{get message(){return o(i)}}),_(N,ae)};A(L,N=>{o(i)&&N($)})}var U=S(L,2),G=f(U),V=f(G);ht(V,{id:"name",label:"Name",get disabled(){return o(a)},required:!0,cols:"col-span-6",placeholder:"Enter topic name",get value(){return o(s).name},set value(N){pe(s,o(s).name=N)},$$legacy:!0});var W=S(V,2);ht(W,{id:"subject",label:"Subject",get disabled(){return o(a)},required:!0,cols:"col-span-6 sm:col-span-3",placeholder:"e.g. Mathematics, Science, History",get value(){return o(s).subject},set value(N){pe(s,o(s).subject=N)},$$legacy:!0});var Q=S(W,2);ht(Q,{id:"target_age_range",label:"Target Age Range",get disabled(){return o(a)},cols:"col-span-6 sm:col-span-3",placeholder:"e.g. 7-10",get value(){return o(s).target_age_range},set value(N){pe(s,o(s).target_age_range=N)},$$legacy:!0});var Z=S(Q,2);ht(Z,{id:"target_grade_level",label:"Target Grade Level",get disabled(){return o(a)},cols:"col-span-6 sm:col-span-3",placeholder:"e.g. 3-5",get value(){return o(s).target_grade_level},set value(N){pe(s,o(s).target_grade_level=N)},$$legacy:!0});var ee=S(Z,2);Wt(ee,{id:"description",label:"Description",get disabled(){return o(a)},cols:"col-span-6",placeholder:"Describe the topic and its purpose",get value(){return o(s).description},set value(N){pe(s,o(s).description=N)},$$legacy:!0});var J=S(ee,2);Wt(J,{id:"learning_goals",label:"Learning Goals (one per line)",get disabled(){return o(a)},cols:"col-span-6",placeholder:"Enter learning goals, one per line",get value(){return o(l)},set value(N){b(l,N)},$$legacy:!0});var ne=S(J,2);Wt(ne,{id:"base_prompt",label:"Base Prompt",get disabled(){return o(a)},required:!0,cols:"col-span-6",placeholder:"Enter a base prompt for generating practice items",get value(){return o(s).base_prompt},set value(N){pe(s,o(s).base_prompt=N)},$$legacy:!0});var I=S(ne,2);Wt(I,{id:"system_prompt",label:"System Prompt",get disabled(){return o(a)},cols:"col-span-6",placeholder:"Enter a system prompt for the AI assistant",get value(){return o(s).system_prompt},set value(N){pe(s,o(s).system_prompt=N)},$$legacy:!0});var T=S(I,2);const q=De(()=>o(a)||o(u));hs(T,{id:"llm_model",label:"LLM Model",get disabled(){return o(q)},cols:"col-span-6 sm:col-span-3",get value(){return o(s).llm_model},set value(N){pe(s,o(s).llm_model=N)},children:(N,ae)=>{var fe=Ze(),de=Ne(fe);{var me=Oe=>{var ve=Yi();ve.value=ve.__value="",_(Oe,ve)},Be=(Oe,ve)=>{{var K=ie=>{var ce=Ji();ce.value=ce.__value="",_(ie,ce)},te=ie=>{var ce=Ze(),ze=Ne(ce);Le(ze,1,()=>o(p),$e,(He,he)=>{var vt=Qi(),$t={},hr=f(vt);D(()=>{$t!==($t=o(he).id)&&(vt.value=(vt.__value=o(he).id)??""),R(hr,o(he).name)}),_(He,vt)}),_(ie,ce)};A(Oe,ie=>{o(w)?ie(K):ie(te,!1)},ve)}};A(de,Oe=>{o(u)?Oe(me):Oe(Be,!1)})}_(N,fe)},$$slots:{default:!0},$$legacy:!0});var Y=S(T,2);ht(Y,{id:"tags",label:"Tags (comma-separated)",type:"text",get disabled(){return o(a)},cols:"col-span-6",placeholder:"e.g. math, arithmetic, addition",get value(){return o(c)},set value(N){b(c,N)},$$events:{input:g},$$legacy:!0});var M=S(Y,2);{var le=N=>{var ae=Xi();Le(ae,5,()=>o(s).tags,$e,(fe,de)=>{var me=Zi(),Be=f(me);D(()=>R(Be,o(de))),_(fe,me)}),_(N,ae)};A(M,N=>{o(s).tags.length>0&&N(le)})}var z=S(U,2),be=f(z);Ge(be,{type:"button",variant:"secondary",get disabled(){return o(a)},$$events:{click:()=>n("cancel")},children:(N,ae)=>{var fe=Pe("Cancel");_(N,fe)},$$slots:{default:!0}});var Ee=S(be,2);{var ye=N=>{Ge(N,{type:"button",variant:"danger",get disabled(){return o(a)},$$events:{click:m},children:(ae,fe)=>{var de=Pe("Delete");_(ae,de)},$$slots:{default:!0}})};A(Ee,N=>{t()&&N(ye)})}var B=S(Ee,2);Ge(B,{type:"submit",get isLoading(){return o(a)},loadingText:"Saving...",children:(N,ae)=>{var fe=Pe("Save");_(N,fe)},$$slots:{default:!0}}),ue("submit",C,Kr(d)),_(y,C)},$$slots:{default:!0}}),_(r,O),Ce()}var ro=E("<p> </p>"),no=E('<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),so=E('<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),ao=E('<span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded"> </span>'),io=E('<div class="w-full mt-2 pt-2 border-t border-gray-50"><div class="flex flex-wrap gap-1"></div></div>'),oo=E('<div class="bg-white rounded-lg shadow-md p-6 hover:shadow-lg transition-shadow cursor-pointer relative" tabindex="0" role="button"><button class="absolute top-2 right-2 p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-full" aria-label="Edit topic"><svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15.232 5.232l3.536 3.536m-2.036-5.036a2.5 2.5 0 113.536 3.536L6.5 21.036H3v-3.572L16.732 3.732z"></path></svg></button> <h2 class="text-xl font-semibold text-gray-900 mb-2"> </h2> <div class="text-gray-600 mb-4 min-h-[1.5rem]"><!></div> <div class="flex flex-wrap gap-2"><span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span> <!> <!> <!></div></div>');function lo(r,e){ke(e,!1);let t=F(e,"topic",8),n=F(e,"onClick",8,()=>{}),s=F(e,"onEdit",8,()=>{});Ae();var a=oo(),i=f(a),l=S(i,2),c=f(l),u=S(l,2),w=f(u);{var p=x=>{var C=ro(),L=f(C);D(()=>R(L,t().description)),_(x,C)};A(w,x=>{t().description&&x(p)})}var h=S(u,2),v=f(h),d=f(v),g=S(v,2);{var m=x=>{var C=no(),L=f(C);D(()=>R(L,`Age: ${t().target_age_range??""}`)),_(x,C)};A(g,x=>{t().target_age_range&&x(m)})}var O=S(g,2);{var P=x=>{var C=so(),L=f(C);D(()=>R(L,`Grade: ${t().target_grade_level??""}`)),_(x,C)};A(O,x=>{t().target_grade_level&&x(P)})}var k=S(O,2);{var y=x=>{var C=io(),L=f(C);Le(L,5,()=>t().tags,$e,($,U)=>{var G=ao(),V=f(G);D(()=>R(V,o(U))),_($,G)}),_(x,C)};A(k,x=>{t().tags&&Array.isArray(t().tags)&&t().tags.length>0&&x(y)})}D(()=>{X(a,"aria-label",`View ${t().name}`),R(c,t().name),R(d,t().subject)}),ue("click",i,At(x=>{x.preventDefault(),s()(t())})),ue("click",a,()=>n()(t())),ue("keydown",a,x=>x.key==="Enter"&&n()(t())),_(r,a),Ce()}var co=E('<div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">Practice Topics</h1> <!></div>'),uo=E('<div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900"> </h1> <!></div>'),fo=E('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div></div>'),vo=E('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),po=E('<div class="max-w-4xl mx-auto"><!></div>'),ho=E('<div class="max-w-4xl mx-auto"><!></div>'),go=E('<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-700">No practice topics available. Create your first topic!</p></div></div></div>'),mo=E('<div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6"></div>'),bo=E('<div class="container mx-auto px-4 py-8"><!> <!></div>');function yo(r,e){ke(e,!1);let t=j([]),n=j(!0),s=j(null),a=j(null),i=j(!1),l=j(!0);async function c(){try{b(n,!0),b(s,null);const g=await H.collection("practice_topics").getFullList({sort:"-created",expand:"account"});b(t,g.map(m=>{if(m.tags&&!Array.isArray(m.tags))try{typeof m.tags=="string"&&m.tags.trim().startsWith("[")?m.tags=JSON.parse(m.tags):typeof m.tags=="string"&&(m.tags=m.tags.split(",").map(O=>O.trim()).filter(Boolean))}catch(O){console.error("Error parsing tags:",O),m.tags=[]}else m.tags||(m.tags=[]);return m})),console.log("Loaded topics:",o(t))}catch(g){console.error("Failed to load topics:",g),b(s,"Failed to load practice topics")}finally{b(n,!1)}}ut(()=>{console.log("PracticeTopics mounted, loading topics"),c();const m=new URLSearchParams(window.location.search).get("edit");if(console.log("URL edit parameter:",m),m){console.log("Found edit parameter, will edit topic:",m),c().then(()=>{const P=o(t).find(k=>k.id===m);P?(console.log("Found topic to edit:",P.name),w(P)):console.error("Could not find topic with id:",m)});const O=new URL(window.location.href);O.searchParams.delete("edit"),window.history.replaceState({},"",O)}});function u(g){window.navigate(`/practice-topic/${g.id}`)}function w(g){b(a,g),b(i,!1)}function p(g){b(t,o(t).map(m=>m.id===g.id?g:m)),b(a,null),b(i,!1),c()}function h(g){b(t,o(t).filter(m=>m.id!==g)),b(a,null),b(i,!1)}function v(){b(a,null),b(i,!0)}function d(){b(a,null),b(i,!1)}Ae(),ft(r,{get sidebarOpen(){return o(l)},set sidebarOpen(g){b(l,g)},children:(g,m)=>{var O=bo(),P=f(O);{var k=$=>{var U=co(),G=S(f(U),2);Ge(G,{type:"button",$$events:{click:v},children:(V,W)=>{var Q=Pe("Create New Topic");_(V,Q)},$$slots:{default:!0}}),_($,U)},y=$=>{var U=uo(),G=f(U),V=f(G),W=S(G,2);Ge(W,{type:"button",variant:"secondary",$$events:{click:d},children:(Q,Z)=>{var ee=Pe("Back to Topics");_(Q,ee)},$$slots:{default:!0}}),D(()=>R(V,o(a)?"Edit Practice Topic":"Create New Topic")),_($,U)};A(P,$=>{!o(a)&&!o(i)?$(k):$(y,!1)})}var x=S(P,2);{var C=$=>{var U=fo();_($,U)},L=($,U)=>{{var G=W=>{var Q=vo(),Z=S(f(Q),2),ee=f(Z);D(()=>R(ee,o(s))),_(W,Q)},V=(W,Q)=>{{var Z=J=>{var ne=po(),I=f(ne);kn(I,{get topic(){return o(a)},$$events:{update:({detail:T})=>p(T),delete:({detail:T})=>h(T),cancel:d}}),_(J,ne)},ee=(J,ne)=>{{var I=q=>{var Y=ho(),M=f(Y);kn(M,{$$events:{update:({detail:le})=>p(le),cancel:d}}),_(q,Y)},T=(q,Y)=>{{var M=z=>{var be=go();_(z,be)},le=z=>{var be=mo();Le(be,5,()=>o(t),$e,(Ee,ye)=>{lo(Ee,{get topic(){return o(ye)},onClick:u,onEdit:w})}),_(z,be)};A(q,z=>{o(t).length===0?z(M):z(le,!1)},Y)}};A(J,q=>{o(i)?q(I):q(T,!1)},ne)}};A(W,J=>{o(a)!==null?J(Z):J(ee,!1)},Q)}};A($,W=>{o(s)?W(G):W(V,!1)},U)}};A(x,$=>{o(n)?$(C):$(L,!1)})}_(g,O)},$$slots:{default:!0},$$legacy:!0}),Ce()}var _o=E('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div></div>'),wo=E('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),xo=E('<p class="text-gray-600 mb-4"> </p>'),So=E('<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),ko=E('<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),Co=E('<span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded"> </span>'),Eo=E('<div class="mb-4"><h3 class="text-sm font-medium text-gray-700 mb-2">Tags:</h3> <div class="flex flex-wrap gap-1"></div></div>'),Oo=E('<li class="text-gray-600"> </li>'),To=E('<div class="mb-4"><h3 class="text-sm font-medium text-gray-700 mb-2">Learning Goals:</h3> <ul class="list-disc list-inside"></ul></div>'),Po=E('<tr><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm"><span> </span></td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"> </td><td class="px-6 py-4 whitespace-nowrap text-sm text-gray-900"><a class="text-indigo-600 hover:text-indigo-900"> </a></td></tr>'),$o=E('<div class="bg-white shadow-md rounded-lg p-6"><h2 class="text-xl font-semibold text-gray-900 mb-4">Past Practice Sessions</h2> <div class="overflow-x-auto"><table class="min-w-full divide-y divide-gray-200"><thead class="bg-gray-50"><tr><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Date</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Name</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Status</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Score</th><th scope="col" class="px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider">Actions</th></tr></thead><tbody class="bg-white divide-y divide-gray-200"></tbody></table></div></div>'),Lo=E('<div class="bg-gray-50 border border-gray-200 p-4 rounded-md"><p class="text-gray-600">No practice sessions yet. Start your first one!</p></div>'),Ao=E('<div class="bg-white shadow-md rounded-lg p-6 mb-6"><h2 class="text-xl font-semibold text-gray-900 mb-2"> </h2> <!> <div class="flex flex-wrap gap-2 mb-4"><span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span> <!> <!></div> <!> <!> <div class="mt-6"><!></div></div> <!>',1),Io=E('<div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">Practice Topic</h1> <div class="flex space-x-2"><!> <!></div></div> <!></div>');function Ro(r,e){ke(e,!1);let t=j(null),n=j([]),s=j(!0),a=j(null),i=j(!0),l=null;ut(()=>{const v=window.location.pathname;console.log("Current path:",v),v.includes("/practice-topic/")?(l=v.split("/practice-topic/")[1],console.log("Extracted topicId:",l),l?(c(l),u(l)):(b(a,"Invalid topic ID"),b(s,!1))):(console.error("Invalid URL format, expected /practice-topic/ID"),b(a,"Invalid URL format"),b(s,!1))});async function c(v){try{console.log("Loading topic with ID:",v),b(s,!0),b(a,null);const d=await H.collection("practice_topics").getOne(v);if(console.log("Topic data loaded:",d),d.tags&&!Array.isArray(d.tags))try{typeof d.tags=="string"&&d.tags.trim().startsWith("[")?d.tags=JSON.parse(d.tags):typeof d.tags=="string"&&(d.tags=d.tags.split(",").map(g=>g.trim()).filter(Boolean))}catch(g){console.error("Error parsing tags:",g),d.tags=[]}else d.tags||(d.tags=[]);b(t,d),console.log("Topic assigned:",o(t))}catch(d){console.error("Failed to load topic:",d),b(a,"Failed to load practice topic")}finally{b(s,!1)}}async function u(v){try{console.log("Loading past practices for topic:",v);const d=await H.collection("practice_sessions").getList(1,10,{filter:`practice_topic="${v}"`,sort:"-created",expand:"learner,practice_topic"});console.log("Past practices loaded:",d),b(n,d.items)}catch(d){console.error("Failed to load past practices:",d)}}function w(){window.navigate("/practice-topics")}function p(){if(!o(t))return;const v=new URL(window.location.origin+"/practice-topics");v.searchParams.set("edit",o(t).id),console.log("Navigating to edit:",v.toString()),window.navigate(v.pathname+v.search)}async function h(){if(o(t))try{const v=H.authStore.model;if(!v){console.error("User not authenticated"),b(a,"You must be logged in to start a practice");return}console.log("Auth data:",v);try{const d=await H.collection("instructors").getFirstListItem(`user="${v.id}"`);if(d){console.log("User is an instructor",d),window.navigate(`/create-practice/${o(t).id}`);return}}catch{console.log("User is not an instructor")}try{const d=await H.collection("learners").getFirstListItem(`user="${v.id}"`);console.log("Found learner record:",d);const g={practice_topic:o(t).id,learner:d.id,practice_items:"[]",assigned_at:new Date().toISOString(),status:"InProgress",name:`Practice: ${o(t).name}`};console.log("Creating session with data:",g);const m=await H.collection("practice_sessions").create(g);console.log("Created session:",m),window.navigate(`/practice-session/${m.id}`)}catch(d){console.error("Failed to find learner record:",d),b(a,"Could not find your learner profile. Please contact support.");return}}catch(v){console.error("Failed to create practice session:",v),b(a,"Failed to start new practice: "+(v instanceof Error?v.message:String(v)))}}Ae(),ft(r,{get sidebarOpen(){return o(i)},set sidebarOpen(v){b(i,v)},children:(v,d)=>{var g=Io(),m=f(g),O=S(f(m),2),P=f(O);Ge(P,{type:"button",variant:"secondary",$$events:{click:w},children:(L,$)=>{var U=Pe("Back to Topics");_(L,U)},$$slots:{default:!0}});var k=S(P,2);Ge(k,{type:"button",variant:"primary",$$events:{click:p},children:(L,$)=>{var U=Pe("Edit Topic");_(L,U)},$$slots:{default:!0}});var y=S(m,2);{var x=L=>{var $=_o();_(L,$)},C=(L,$)=>{{var U=V=>{var W=wo(),Q=S(f(W),2),Z=f(Q);D(()=>R(Z,o(a))),_(V,W)},G=(V,W)=>{{var Q=Z=>{var ee=Ao(),J=Ne(ee),ne=f(J),I=f(ne),T=S(ne,2);{var q=K=>{var te=xo(),ie=f(te);D(()=>R(ie,o(t).description)),_(K,te)};A(T,K=>{o(t).description&&K(q)})}var Y=S(T,2),M=f(Y),le=f(M),z=S(M,2);{var be=K=>{var te=So(),ie=f(te);D(()=>R(ie,`Age: ${o(t).target_age_range??""}`)),_(K,te)};A(z,K=>{o(t).target_age_range&&K(be)})}var Ee=S(z,2);{var ye=K=>{var te=ko(),ie=f(te);D(()=>R(ie,`Grade: ${o(t).target_grade_level??""}`)),_(K,te)};A(Ee,K=>{o(t).target_grade_level&&K(ye)})}var B=S(Y,2);{var N=K=>{var te=Eo(),ie=S(f(te),2);Le(ie,5,()=>o(t).tags,$e,(ce,ze)=>{var He=Co(),he=f(He);D(()=>R(he,o(ze))),_(ce,He)}),_(K,te)};A(B,K=>{o(t).tags&&Array.isArray(o(t).tags)&&o(t).tags.length>0&&K(N)})}var ae=S(B,2);{var fe=K=>{var te=To(),ie=S(f(te),2);Le(ie,5,()=>o(t).learning_goals,$e,(ce,ze)=>{var He=Oo(),he=f(He);D(()=>R(he,o(ze))),_(ce,He)}),_(K,te)};A(ae,K=>{o(t).learning_goals&&Array.isArray(o(t).learning_goals)&&o(t).learning_goals.length>0&&K(fe)})}var de=S(ae,2),me=f(de);Ge(me,{type:"button",variant:"primary",$$events:{click:h},children:(K,te)=>{var ie=Pe("Start New Practice");_(K,ie)},$$slots:{default:!0}});var Be=S(J,2);{var Oe=K=>{var te=$o(),ie=S(f(te),2),ce=f(ie),ze=S(f(ce));Le(ze,5,()=>o(n),$e,(He,he)=>{var vt=Po(),$t=f(vt),hr=f($t),Zr=S($t),ms=f(Zr),Xr=S(Zr),en=f(Xr),bs=f(en),tn=S(Xr),ys=f(tn),_s=S(tn),rn=f(_s),ws=f(rn);D(xs=>{R(hr,xs),R(ms,o(he).name||"Unnamed practice"),ge(en,1,`px-2 inline-flex text-xs leading-5 font-semibold rounded-full 
                                                ${o(he).status==="Completed"?"bg-green-100 text-green-800":o(he).status==="InProgress"?"bg-blue-100 text-blue-800":"bg-gray-100 text-gray-800"}`),R(bs,o(he).status),R(ys,o(he).score?`${o(he).score}%`:"-"),X(rn,"href",`#practice-session/${o(he).id}`),R(ws,o(he).status==="InProgress"?"Continue":"View")},[()=>new Date(o(he).assigned_at).toLocaleDateString()],De),_(He,vt)}),_(K,te)},ve=K=>{var te=Lo();_(K,te)};A(Be,K=>{o(n).length>0?K(Oe):K(ve,!1)})}D(()=>{R(I,o(t).name),R(le,o(t).subject)}),_(Z,ee)};A(V,Z=>{o(t)&&Z(Q)},W)}};A(L,V=>{o(a)?V(U):V(G,!1)},$)}};A(y,L=>{o(s)?L(x):L(C,!1)})}_(v,g)},$$slots:{default:!0},$$legacy:!0}),Ce()}var jo=E('<img class="h-8 w-8 rounded-full object-cover">'),Do=Ht('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>'),Fo=E('<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),No=E('<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),qo=E('<div class="mt-3 mb-4"><p class="text-xs text-gray-500 mb-1">Learning preferences:</p> <div class="flex flex-wrap gap-1"><span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded"> </span></div></div>'),Uo=E('<div role="button" tabindex="0"> </div>'),Mo=E('<div class="flex flex-wrap gap-2 mt-3"></div>'),Bo=E('<button><div class="flex items-center mb-4"><div class="bg-blue-100 text-blue-800 p-3 rounded-full mr-4"><!></div> <div><h3 class="text-lg font-semibold text-gray-900"> </h3> <p class="text-sm text-gray-600"> </p></div></div> <div class="flex flex-wrap gap-2 mb-3"><!> <!></div> <!> <!></button>'),zo=E('<img class="h-8 w-8 rounded-full object-cover">'),Ho=Ht('<svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"></path></svg>'),Go=E('<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),Vo=E('<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),Wo=E('<span class="bg-gray-100 text-gray-800 text-xs font-medium px-2 py-0.5 rounded"> </span>'),Ko=E('<div class="mt-3 mb-4"><p class="text-xs text-gray-500 mb-1">Learning preferences:</p> <div class="flex flex-wrap gap-1"></div></div>'),Yo=E('<div role="button" tabindex="0"> </div>'),Jo=E('<div class="flex flex-wrap gap-2 mt-3"></div>'),Qo=E('<div><div class="flex items-center mb-4"><div class="bg-blue-100 text-blue-800 p-3 rounded-full mr-4"><!></div> <div><h3 class="text-lg font-semibold text-gray-900"> </h3> <p class="text-sm text-gray-600"> </p></div></div> <div class="flex flex-wrap gap-2 mb-3"><!> <!></div> <!> <!></div>');function Zo(r,e){ke(e,!1);let t=F(e,"learner",8),n=F(e,"actions",24,()=>[]),s=F(e,"clickable",8,!1),a=F(e,"onClick",8,()=>{}),i=F(e,"shadow",8,!0),l=F(e,"showPreferences",8,!0);function c(v="primary"){switch(v){case"secondary":return"bg-gray-100 hover:bg-gray-200 text-gray-800";case"success":return"bg-green-100 hover:bg-green-200 text-green-800";case"danger":return"bg-red-100 hover:bg-red-200 text-red-800";case"warning":return"bg-yellow-100 hover:bg-yellow-200 text-yellow-800";case"primary":default:return"bg-blue-100 hover:bg-blue-200 text-blue-800"}}Ae();var u=Ze(),w=Ne(u);{var p=v=>{var d=Bo(),g=f(d),m=f(g),O=f(m);{var P=I=>{var T=jo();D(()=>{X(T,"src",t().avatar),X(T,"alt",t().nickname)}),_(I,T)},k=I=>{var T=Do();_(I,T)};A(O,I=>{t().avatar?I(P):I(k,!1)})}var y=S(m,2),x=f(y),C=f(x),L=S(x,2),$=f(L),U=S(g,2),G=f(U);{var V=I=>{var T=Fo(),q=f(T);D(()=>R(q,`Age: ${t().age??""}`)),_(I,T)};A(G,I=>{t().age&&I(V)})}var W=S(G,2);{var Q=I=>{var T=No(),q=f(T);D(()=>R(q,`Grade: ${t().grade_level??""}`)),_(I,T)};A(W,I=>{t().grade_level&&I(Q)})}var Z=S(U,2);{var ee=I=>{var T=qo(),q=S(f(T),2),Y=f(q),M=f(Y);D(()=>R(M,t().learning_preferences)),_(I,T)};A(Z,I=>{l()&&t().learning_preferences&&t().learning_preferences.length>0&&I(ee)})}var J=S(Z,2);{var ne=I=>{var T=Mo();Le(T,5,n,$e,(q,Y)=>{var M=Uo(),le=f(M);D(z=>{ge(M,1,z),R(le,o(Y).label)},[()=>`px-3 py-1.5 text-xs font-medium rounded-md cursor-pointer ${c(o(Y).color)}`],De),ue("click",M,At(z=>{z.preventDefault(),o(Y).onClick(t())})),ue("keypress",M,At(z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),o(Y).onClick(t()))})),_(q,M)}),_(I,T)};A(J,I=>{n().length>0&&I(ne)})}D(()=>{var I;ge(d,1,`
        bg-white rounded-lg w-full text-left
        ${i()?"shadow-md":"border border-gray-100"} 
        p-6 
        hover:shadow-lg transition-shadow cursor-pointer
    `),X(d,"aria-label",`Select ${t().nickname}`),R(C,t().nickname),R($,((I=t().user)==null?void 0:I.name)||"Unknown user")}),ue("click",d,()=>a()(t())),_(v,d)},h=v=>{var d=Qo(),g=f(d),m=f(g),O=f(m);{var P=I=>{var T=zo();D(()=>{X(T,"src",t().avatar),X(T,"alt",t().nickname)}),_(I,T)},k=I=>{var T=Ho();_(I,T)};A(O,I=>{t().avatar?I(P):I(k,!1)})}var y=S(m,2),x=f(y),C=f(x),L=S(x,2),$=f(L),U=S(g,2),G=f(U);{var V=I=>{var T=Go(),q=f(T);D(()=>R(q,`Age: ${t().age??""}`)),_(I,T)};A(G,I=>{t().age&&I(V)})}var W=S(G,2);{var Q=I=>{var T=Vo(),q=f(T);D(()=>R(q,`Grade: ${t().grade_level??""}`)),_(I,T)};A(W,I=>{t().grade_level&&I(Q)})}var Z=S(U,2);{var ee=I=>{var T=Ko(),q=S(f(T),2);Le(q,5,()=>t().learning_preferences,$e,(Y,M)=>{var le=Wo(),z=f(le);D(()=>R(z,o(M))),_(Y,le)}),_(I,T)};A(Z,I=>{l()&&t().learning_preferences&&t().learning_preferences.length>0&&I(ee)})}var J=S(Z,2);{var ne=I=>{var T=Jo();Le(T,5,n,$e,(q,Y)=>{var M=Yo(),le=f(M);D(z=>{ge(M,1,z),R(le,o(Y).label)},[()=>`px-3 py-1.5 text-xs font-medium rounded-md cursor-pointer ${c(o(Y).color)}`],De),ue("click",M,At(z=>{z.preventDefault(),o(Y).onClick(t())})),ue("keypress",M,At(z=>{(z.key==="Enter"||z.key===" ")&&(z.preventDefault(),o(Y).onClick(t()))})),_(q,M)}),_(I,T)};A(J,I=>{n().length>0&&I(ne)})}D(()=>{var I;ge(d,1,`
        bg-white rounded-lg
        ${i()?"shadow-md":"border border-gray-100"} 
        p-6 
    `),R(C,t().nickname),R($,((I=t().user)==null?void 0:I.name)||"Unknown user")}),_(v,d)};A(w,v=>{s()?v(p):v(h,!1)})}_(r,u),Ce()}var Xo=E('<div class="flex justify-center items-center h-32"><div class="animate-spin rounded-full h-10 w-10 border-t-2 border-b-2 border-primary"></div></div>'),el=E('<div class="bg-yellow-50 border-l-4 border-yellow-400 p-4"><div class="flex"><div class="flex-shrink-0"><svg class="h-5 w-5 text-yellow-400" viewBox="0 0 20 20" fill="currentColor"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z" clip-rule="evenodd"></path></svg></div> <div class="ml-3"><p class="text-sm text-yellow-700"> </p></div></div></div>'),tl=E("<div></div>");function gs(r,e){ke(e,!1);let t=F(e,"learners",24,()=>[]),n=F(e,"loading",8,!1),s=F(e,"emptyMessage",8,"No learners found."),a=F(e,"gridCols",8,"grid-cols-1 md:grid-cols-2 lg:grid-cols-3"),i=F(e,"showPreferences",8,!0),l=F(e,"onClick",8,()=>{}),c=F(e,"cardActions",24,()=>[]);function u(d){return c().filter(g=>!g.condition||g.condition(d))}Ae();var w=Ze(),p=Ne(w);{var h=d=>{var g=Xo();_(d,g)},v=(d,g)=>{{var m=P=>{var k=el(),y=f(k),x=S(f(y),2),C=f(x),L=f(C);D(()=>R(L,s())),_(P,k)},O=P=>{var k=tl();Le(k,5,t,$e,(y,x)=>{const C=De(()=>l()!==void 0),L=De(()=>u(o(x)));Zo(y,{get learner(){return o(x)},get clickable(){return o(C)},get onClick(){return l()},get showPreferences(){return i()},get actions(){return o(L)}})}),D(()=>ge(k,1,`grid ${a()} gap-6`)),_(P,k)};A(d,P=>{t().length===0?P(m):P(O,!1)},g)}};A(p,d=>{n()?d(h):d(v,!1)})}_(r,w),Ce()}var rl=E('<div class="flex justify-center items-center h-64"><div class="animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-primary"></div></div>'),nl=E('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),sl=E('<p class="text-gray-600 mb-4"> </p>'),al=E('<span class="bg-green-100 text-green-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),il=E('<span class="bg-purple-100 text-purple-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span>'),ol=E('<div class="bg-white shadow-md rounded-lg p-6 mb-6"><h2 class="text-xl font-semibold text-gray-900 mb-2"> </h2> <!> <div class="flex flex-wrap gap-2 mb-4"><span class="bg-blue-100 text-blue-800 text-xs font-medium px-2.5 py-0.5 rounded"> </span> <!> <!></div></div> <h2 class="text-xl font-semibold text-gray-900 mb-4">Select a Learner</h2> <!>',1),ll=E('<div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">Create New Practice Session</h1> <div class="flex space-x-2"><!></div></div> <!></div>');function cl(r,e){ke(e,!1);let t=j(null),n=j([]),s=j(!0),a=j(!0),i=j(null),l=j(!0),c=null;ut(()=>{const v=window.location.pathname;console.log("Current path:",v),v.includes("/create-practice/")?(c=v.split("/create-practice/")[1],console.log("Extracted topicId:",c),c?(u(c),w()):(b(i,"Invalid topic ID"),b(s,!1))):(console.error("Invalid URL format, expected /create-practice/ID"),b(i,"Invalid URL format"),b(s,!1))});async function u(v){try{console.log("Loading topic with ID:",v),b(s,!0),b(i,null);const d=await H.collection("practice_topics").getOne(v);if(console.log("Topic data loaded:",d),d.tags&&!Array.isArray(d.tags))try{typeof d.tags=="string"&&d.tags.trim().startsWith("[")?d.tags=JSON.parse(d.tags):typeof d.tags=="string"&&(d.tags=d.tags.split(",").map(g=>g.trim()).filter(Boolean))}catch(g){console.error("Error parsing tags:",g),d.tags=[]}else d.tags||(d.tags=[]);b(t,d),console.log("Topic assigned:",o(t))}catch(d){console.error("Failed to load topic:",d),b(i,"Failed to load practice topic")}finally{b(s,!1)}}async function w(){try{b(a,!0);const v=H.authStore.model;if(!v){console.error("User not authenticated"),b(i,"You must be logged in to create a practice session");return}const d=await H.collection("instructors").getFirstListItem(`user="${v.id}"`),g=await H.collection("learners").getList(1,100,{filter:`account="${d.account}"`,sort:"nickname",expand:"user"});b(n,g.items),console.log("Loaded learners:",o(n))}catch(v){console.error("Failed to load learners:",v),b(i,"Failed to load learners")}finally{b(a,!1)}}function p(){c?window.navigate(`/practice-topic/${c}`):window.navigate("/practice-topics")}async function h(v){if(o(t))try{console.log("Creating practice session for topic:",o(t).id,"and learner:",v.id);const d=H.authStore.model;if(!d){console.error("User not authenticated"),b(i,"You must be logged in to create a practice session");return}const g=await H.collection("instructors").getFirstListItem(`user="${d.id}"`),m={practice_topic:o(t).id,learner:v.id,instructor:g.id,practice_items:"[]",assigned_at:new Date().toISOString(),status:"InProgress",name:`${v.nickname} - ${o(t).name}`};console.log("Creating session with data:",m);const O=await H.collection("practice_sessions").create(m);console.log("Created session:",O),window.navigate(`/practice-session/${O.id}`)}catch(d){console.error("Failed to create practice session:",d),b(i,"Failed to create practice session: "+(d instanceof Error?d.message:String(d)))}}Ae(),ft(r,{get sidebarOpen(){return o(l)},set sidebarOpen(v){b(l,v)},children:(v,d)=>{var g=ll(),m=f(g),O=S(f(m),2),P=f(O);Ge(P,{type:"button",variant:"secondary",$$events:{click:p},children:(C,L)=>{var $=Pe("Back to Topic");_(C,$)},$$slots:{default:!0}});var k=S(m,2);{var y=C=>{var L=rl();_(C,L)},x=(C,L)=>{{var $=G=>{var V=nl(),W=S(f(V),2),Q=f(W);D(()=>R(Q,o(i))),_(G,V)},U=(G,V)=>{{var W=Q=>{var Z=ol(),ee=Ne(Z),J=f(ee),ne=f(J),I=S(J,2);{var T=B=>{var N=sl(),ae=f(N);D(()=>R(ae,o(t).description)),_(B,N)};A(I,B=>{o(t).description&&B(T)})}var q=S(I,2),Y=f(q),M=f(Y),le=S(Y,2);{var z=B=>{var N=al(),ae=f(N);D(()=>R(ae,`Age: ${o(t).target_age_range??""}`)),_(B,N)};A(le,B=>{o(t).target_age_range&&B(z)})}var be=S(le,2);{var Ee=B=>{var N=il(),ae=f(N);D(()=>R(ae,`Grade: ${o(t).target_grade_level??""}`)),_(B,N)};A(be,B=>{o(t).target_grade_level&&B(Ee)})}var ye=S(ee,4);gs(ye,{get learners(){return o(n)},get loading(){return o(a)},emptyMessage:"No learners found. Please add learners to your account first.",onClick:h,cardActions:[{label:"Create Practice",color:"primary",onClick:h}]}),D(()=>{R(ne,o(t).name),R(M,o(t).subject)}),_(Q,Z)};A(G,Q=>{o(t)&&Q(W)},V)}};A(C,G=>{o(i)?G($):G(U,!1)},L)}};A(k,C=>{o(s)?C(y):C(x,!1)})}_(v,g)},$$slots:{default:!0},$$legacy:!0}),Ce()}var dl=E('<div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative mb-6" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div>'),ul=E('<div class="container mx-auto px-4 py-8"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-bold text-gray-900">Learners</h1> <!></div> <!> <!></div>');function fl(r,e){ke(e,!1);let t=j([]),n=j(!0),s=j(null),a=j(!0);ut(()=>{i()});async function i(){try{b(n,!0),b(s,null);const p=H.authStore.model;if(!p){console.error("User not authenticated"),b(s,"You must be logged in to view learners");return}const h=await H.collection("instructors").getFirstListItem(`user="${p.id}"`),v=await H.collection("learners").getList(1,100,{filter:`account="${h.account}"`,sort:"nickname",expand:"user"});b(t,v.items),console.log("Loaded learners:",o(t))}catch(p){console.error("Failed to load learners:",p),b(s,"Failed to load learners")}finally{b(n,!1)}}function l(p){console.log("View learner profile:",p),window.navigate(`/learner/${p.id}`)}function c(p){console.log("Edit learner:",p),window.navigate(`/edit-learner/${p.id}`)}function u(p){confirm(`Are you sure you want to delete ${p.nickname}?`)&&console.log("Delete learner:",p)}function w(){console.log("Create new learner"),window.navigate("/create-learner")}Ae(),ft(r,{get sidebarOpen(){return o(a)},set sidebarOpen(p){b(a,p)},children:(p,h)=>{var v=ul(),d=f(v),g=S(f(d),2);Ge(g,{type:"button",$$events:{click:w},children:(k,y)=>{var x=Pe("Add New Learner");_(k,x)},$$slots:{default:!0}});var m=S(d,2);{var O=k=>{var y=dl(),x=S(f(y),2),C=f(x);D(()=>R(C,o(s))),_(k,y)};A(m,k=>{o(s)&&k(O)})}var P=S(m,2);gs(P,{get learners(){return o(t)},get loading(){return o(n)},emptyMessage:"No learners found. Add your first learner to get started!",onClick:l,cardActions:[{label:"View",color:"primary",onClick:l},{label:"Edit",color:"secondary",onClick:c},{label:"Delete",color:"danger",onClick:u}]}),_(p,v)},$$slots:{default:!0},$$legacy:!0}),Ce()}var vl=E("<option>Loading models...</option>"),pl=E("<option>Error loading models</option>"),hl=E("<option> </option>"),gl=E('<div class="text-center py-12 border border-dashed border-gray-200 rounded-lg"><p class="text-gray-500">No messages yet. Start a conversation below.</p></div>'),ml=E('<span class="text-xs text-gray-400 ml-2 tooltip svelte-49xhcr"> </span>'),bl=E('<div class="flex flex-col"><div class="flex items-center mb-2"><span class="font-medium text-sm text-gray-700 mr-2"> </span> <span class="text-xs text-gray-500"> </span> <!></div> <div><p class="whitespace-pre-wrap break-words text-left text-gray-800"> </p></div></div>'),yl=E('<div class="flex flex-col"><div class="flex items-center mb-2"><span class="font-medium text-sm text-gray-700">Assistant</span></div> <div class="bg-gray-50 border border-gray-100 rounded-lg p-4"><div class="flex space-x-2"><div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce"></div> <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.2s"></div> <div class="w-2 h-2 bg-gray-400 rounded-full animate-bounce" style="animation-delay: 0.4s"></div></div></div></div>'),_l=E('<div class="space-y-6"><!> <!></div>'),wl=E(`<div class="max-w-4xl mx-auto px-4 sm:px-6 md:px-8 my-8"><div class="flex justify-between items-center mb-6"><h1 class="text-2xl font-semibold text-gray-900">Chat with LLM</h1> <div class="flex items-center"><!></div></div> <div class="bg-white shadow rounded-lg"><div class="px-4 py-5 sm:p-6 chat-container svelte-49xhcr"><!></div> <div class="border-t border-gray-200 px-4 py-5 sm:p-6"><div class="flex"><textarea placeholder="Type your message..." rows="3" class="		dark:bg-gray-700 dark:text-gray-100 dark:border-gray-600 dark:placeholder-gray-500
 flex-1 px-4 py-2 border border-gray-300 rounded-l-md focus:outline-none focus:ring-0 focus:ring-secondary focus:border-secondary resize-none"></textarea> <button class="bg-secondary text-white px-6 py-2 rounded-r-md hover:bg-blue-600 focus:outline-none focus:ring-0 focus:ring-secondary focus:ring-offset-2 disabled:opacity-50 disabled:cursor-not-allowed flex-shrink-0"> </button></div> <div class="flex justify-between mt-2"><p class="text-xs text-gray-500">Press Enter to send, Shift+Enter for new line</p> <p class="text-xs text-gray-500 font-medium tooltip svelte-49xhcr"> </p></div></div></div></div>`);function xl(r,e){ke(e,!1);const t=j();let n=j(!0),s=j(""),a=j([]),i=j(!1),l="You are a helpful learning assistant for kids.",c=j(""),u=j(0),w=j(0),p=j(0),h=j(0),v=j(!1),d=j(null),g=j([]);async function m(){b(v,!0),b(d,null);try{const k=await Rr.getInfo();b(g,k.platforms.flatMap(x=>x.models.map(C=>({id:C.name,name:`${C.name}${C.isDefault?" (Default)":""}`,isDefault:C.isDefault})))),o(g).length===0&&b(g,[{id:"",name:"Default"}]);const y=o(g).find(x=>x.isDefault);y&&b(c,y.id)}catch(k){console.error("Error fetching models:",k),b(d,k instanceof Error?k.message:"Failed to fetch models"),b(g,[{id:"",name:"Default"}])}finally{b(v,!1)}}m();async function O(){if(!o(s).trim())return;const k={role:"user",content:o(s),timestamp:new Date};b(a,[...o(a),k]),b(s,""),b(i,!0),_e.set(null);try{const y=o(a).map(L=>`${L.role==="user"?"User":"Assistant"}: ${L.content}`).join(`

`),x=await Rr.chat(y,l,o(c)||void 0),C={role:"assistant",content:x.response,timestamp:new Date,usage:x.usage};b(a,[...o(a),C]),setTimeout(()=>{const L=document.querySelector(".chat-container");L&&(L.scrollTop=L.scrollHeight)},50)}catch(y){console.error("Error sending message:",y),_e.set(y instanceof Error?y.message:"Failed to send message")}finally{b(i,!1)}}function P(k){k.key==="Enter"&&!k.shiftKey&&(k.preventDefault(),O())}Zt(()=>o(a),()=>{let k=0,y=0,x=0,C=0;o(a).forEach(L=>{L.usage&&(k+=L.usage.PromptTokens||0,y+=L.usage.CompletionTokens||0,x+=L.usage.TotalTokens||0,C+=L.usage.Cost||0)}),b(w,k),b(p,y),b(u,x),b(h,C)}),Zt(()=>(o(w),o(p),o(h)),()=>{b(t,`Prompt: ${o(w)} tokens
Completion: ${o(p)} tokens
Cost: $${o(h).toFixed(6)}`)}),zr(),Ae(),ft(r,{get sidebarOpen(){return o(n)},set sidebarOpen(k){b(n,k)},children:(k,y)=>{var x=wl(),C=f(x),L=S(f(C),2),$=f(L);hs($,{id:"modelSelect",label:"Model",get disabled(){return o(v)},cols:"",inline:!0,get value(){return o(c)},set value(M){b(c,M)},children:(M,le)=>{var z=Ze(),be=Ne(z);{var Ee=B=>{var N=vl();N.value=N.__value="",_(B,N)},ye=(B,N)=>{{var ae=de=>{var me=pl();me.value=me.__value="",_(de,me)},fe=de=>{var me=Ze(),Be=Ne(me);Le(Be,1,()=>o(g),$e,(Oe,ve)=>{var K=hl(),te={},ie=f(K);D(()=>{te!==(te=o(ve).id)&&(K.value=(K.__value=o(ve).id)??""),R(ie,o(ve).name)}),_(Oe,K)}),_(de,me)};A(B,de=>{o(d)?de(ae):de(fe,!1)},N)}};A(be,B=>{o(v)?B(Ee):B(ye,!1)})}_(M,z)},$$slots:{default:!0},$$legacy:!0});var U=S(C,2),G=f(U),V=f(G);{var W=M=>{var le=gl();_(M,le)},Q=M=>{var le=_l(),z=f(le);Le(z,1,()=>o(a),$e,(ye,B)=>{var N=bl(),ae=f(N),fe=f(ae),de=f(fe),me=S(fe,2),Be=f(me),Oe=S(me,2);{var ve=ce=>{var ze=ml(),He=f(ze);D(he=>{X(ze,"title",`Model: ${o(B).usage.LlmModelName||"Default"} Cache hit: ${o(B).usage.CacheHit?"Yes":"No"} Prompt: ${o(B).usage.PromptTokens??""} tokens Completion: ${o(B).usage.CompletionTokens??""} tokens Cost: $${he??""}`),R(He,`(${o(B).usage.TotalTokens??""} tokens)`)},[()=>(o(B).usage.Cost||0).toFixed(6)],De),_(ce,ze)};A(Oe,ce=>{o(B).role==="assistant"&&o(B).usage&&ce(ve)})}var K=S(ae,2),te=f(K),ie=f(te);D(ce=>{R(de,o(B).role==="user"?"You":"Assistant"),R(Be,ce),ge(K,1,`${o(B).role==="user"?"bg-blue-50 border-blue-100":"bg-gray-50 border-gray-100"} border rounded-lg p-4`),R(ie,o(B).content)},[()=>o(B).timestamp.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})],De),_(ye,N)});var be=S(z,2);{var Ee=ye=>{var B=yl();_(ye,B)};A(be,ye=>{o(i)&&ye(Ee)})}_(M,le)};A(V,M=>{o(a).length===0?M(W):M(Q,!1)})}var Z=S(G,2),ee=f(Z),J=f(ee),ne=S(J,2),I=f(ne),T=S(ee,2),q=S(f(T),2),Y=f(q);D(M=>{ne.disabled=M,R(I,o(i)?"Sending...":"Send"),X(q,"title",o(t)),R(Y,`${o(u)??""} tokens`)},[()=>o(i)||!o(s).trim()],De),qt(J,()=>o(s),M=>b(s,M)),ue("keydown",J,P),ue("click",ne,O),_(k,x)},$$slots:{default:!0},$$legacy:!0}),Ce()}var Sl=E('<div class="flex justify-center items-center h-screen"><div class="animate-spin rounded-full h-32 w-32 border-t-2 border-b-2 border-gray-900 dark:border-white"></div></div>'),kl=E('<div class="flex flex-col items-center justify-center h-screen"><div class="bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded relative" role="alert"><strong class="font-bold">Error!</strong> <span class="block sm:inline"> </span></div> <button class="mt-4 bg-blue-500 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded">Try Again</button></div>'),Cl=E('<main class="svelte-1rivxoc"><!></main>');function El(r,e){ke(e,!1);const[t,n]=Pt(),s=()=>Je(_r,"$isAuthLoading",t),a=()=>Je(_e,"$error",t),i=()=>Je(nt,"$isAuthenticated",t),l=()=>Je(St,"$user",t);let c=j("dashboard");async function u(){var g,m,O;_r.set(!0),_e.set(null);try{const P=Ar();if(P){H.authStore.token!==P&&(H.authStore.clear(),localStorage.setItem("pocketbase_auth",JSON.stringify({token:P,model:H.authStore.model})));try{if(await H.collection("users").authRefresh(),H.authStore.isValid){const k=await H.collection("users").getOne(((g=H.authStore.record)==null?void 0:g.id)??"");try{const y=await H.collection("instructors").getFirstListItem(`user="${(m=H.authStore.record)==null?void 0:m.id}"`);if(y){y.user=k,St.set(y),nt.set(!0);return}}catch{}try{const y=await H.collection("learners").getFirstListItem(`user="${(O=H.authStore.record)==null?void 0:O.id}"`,{requestKey:null});if(y){y.user=k,St.set(y),nt.set(!0);return}}catch{}xr(),nt.set(!1)}}catch(k){console.error("Auth refresh failed:",k),xr(),nt.set(!1)}}else nt.set(!1)}catch(P){console.error("Authentication initialization failed:",P),xr(),nt.set(!1)}finally{_r.set(!1)}}ut(()=>{u();function g(){const m=window.location.pathname||"/";if(console.log("Routing path:",m),m.includes("/practice-topic/"))console.log("Setting route to practice-topic view"),b(c,"practice-topic");else if(m.includes("/create-practice/"))console.log("Setting route to create-practice"),b(c,"create-practice");else if(m.includes("/practice-session/"))console.log("Setting route to practice-session"),b(c,"practice-session");else if(m==="/")console.log("Setting route to dashboard"),b(c,"dashboard");else{const O=m.startsWith("/")?m.slice(1):m;console.log("Setting route to:",O),b(c,O)}}g(),window.addEventListener("popstate",()=>{console.log("Navigation event, path:",window.location.pathname),g()}),document.addEventListener("click",m=>{var k;const P=m.target.closest("a");if(P&&((k=P.getAttribute("href"))!=null&&k.startsWith("/"))&&!P.hasAttribute("target")){const y=P.getAttribute("href")||"/";if(y.startsWith("/assets/")||y.endsWith(".svg")||y.endsWith(".png")||y.endsWith(".jpg")||y.endsWith(".jpeg")||y.endsWith(".gif")||y.endsWith(".ico"))return;m.preventDefault(),history.pushState(null,"",y),g()}})});function w(g){history.pushState(null,"",g);const m=window.location.pathname||"/";if(console.log("Navigated to path:",m),m.includes("/practice-topic/"))b(c,"practice-topic");else if(m.includes("/create-practice/"))b(c,"create-practice");else if(m.includes("/practice-session/"))b(c,"practice-session");else if(m==="/")b(c,"dashboard");else{const O=m.startsWith("/")?m.slice(1):m;b(c,O)}}typeof window<"u"&&(window.navigate=w),window.addEventListener("popstate",g=>{console.log("Popstate event triggered",g);const m=window.location.pathname||"/";console.log("Current path:",m)}),Ae();var p=Cl(),h=f(p);{var v=g=>{var m=Sl();_(g,m)},d=(g,m)=>{{var O=k=>{var y=kl(),x=f(y),C=S(f(x),2),L=f(C),$=S(x,2);D(()=>R(L,a())),ue("click",$,()=>window.location.reload()),_(k,y)},P=(k,y)=>{{var x=L=>{var $=Ze(),U=Ne($);{var G=W=>{Sn(W,{})},V=(W,Q)=>{{var Z=J=>{Ui(J,{})},ee=(J,ne)=>{{var I=q=>{Bi(q)},T=(q,Y)=>{{var M=z=>{yo(z,{})},le=(z,be)=>{{var Ee=B=>{Ro(B,{})},ye=(B,N)=>{{var ae=de=>{cl(de,{})},fe=(de,me)=>{{var Be=ve=>{fl(ve,{})},Oe=(ve,K)=>{{var te=ce=>{xl(ce,{})},ie=ce=>{Sn(ce,{})};A(ve,ce=>{o(c)==="chat"?ce(te):ce(ie,!1)},K)}};A(de,ve=>{o(c)==="learners"?ve(Be):ve(Oe,!1)},me)}};A(B,de=>{o(c)==="create-practice"?de(ae):de(fe,!1)},N)}};A(z,B=>{o(c)==="practice-topic"?B(Ee):B(ye,!1)},be)}};A(q,z=>{o(c)==="practice-topics"?z(M):z(le,!1)},Y)}};A(J,q=>{o(c)==="settings"?q(I):q(T,!1)},ne)}};A(W,J=>{o(c)==="profile"?J(Z):J(ee,!1)},Q)}};A(U,W=>{o(c)==="dashboard"?W(G):W(V,!1)})}_(L,$)},C=L=>{mi(L,{})};A(k,L=>{i()&&l()!==null?L(x):L(C,!1)},y)}};A(g,k=>{a()?k(O):k(P,!1)},m)}};A(h,g=>{s()?g(v):g(d,!1)})}_(r,p),Ce(),n()}function Ol(){const r=document.getElementById("app");if(!r){console.error("Failed to find app element");return}try{return ka(El,{target:r})}catch(e){console.error("Failed to mount app:",e),r.innerHTML=`
      <div class="min-h-screen flex items-center justify-center bg-gray-50">
        <div class="text-center">
          <h1 class="text-2xl font-bold text-red-600">Error</h1>
          <p class="mt-2 text-gray-600">Failed to initialize the application. Please try refreshing the page.</p>
        </div>
      </div>
    `}}Ol();
